{"version":3,"names":["createBlock","normalizeRowColSpan","tableContentPasteSchema","phrasingContentSchema","tr","allowEmpty","children","th","attributes","td","tablePasteSchema","args","table","thead","tfoot","tbody","transforms","from","type","selector","schema","transform","node","Array","reduce","sectionAcc","section","length","sectionName","nodeName","toLowerCase","slice","sectionAttributes","rowAcc","row","rowAttributes","colAcc","col","rowspan","getAttribute","colspan","push","tag","content","innerHTML","cells"],"sources":["@wordpress/block-library/src/table/transforms.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { normalizeRowColSpan } from './utils';\n\nconst tableContentPasteSchema = ( { phrasingContentSchema } ) => ( {\n\ttr: {\n\t\tallowEmpty: true,\n\t\tchildren: {\n\t\t\tth: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: phrasingContentSchema,\n\t\t\t\tattributes: [ 'scope', 'colspan', 'rowspan' ],\n\t\t\t},\n\t\t\ttd: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: phrasingContentSchema,\n\t\t\t\tattributes: [ 'colspan', 'rowspan' ],\n\t\t\t},\n\t\t},\n\t},\n} );\n\nconst tablePasteSchema = ( args ) => ( {\n\ttable: {\n\t\tchildren: {\n\t\t\tthead: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: tableContentPasteSchema( args ),\n\t\t\t},\n\t\t\ttfoot: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: tableContentPasteSchema( args ),\n\t\t\t},\n\t\t\ttbody: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: tableContentPasteSchema( args ),\n\t\t\t},\n\t\t},\n\t},\n} );\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'raw',\n\t\t\tselector: 'table',\n\t\t\tschema: tablePasteSchema,\n\t\t\ttransform: ( node ) => {\n\t\t\t\tconst attributes = Array.from( node.children ).reduce(\n\t\t\t\t\t( sectionAcc, section ) => {\n\t\t\t\t\t\tif ( ! section.children.length ) {\n\t\t\t\t\t\t\treturn sectionAcc;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst sectionName = section.nodeName\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.slice( 1 );\n\n\t\t\t\t\t\tconst sectionAttributes = Array.from(\n\t\t\t\t\t\t\tsection.children\n\t\t\t\t\t\t).reduce( ( rowAcc, row ) => {\n\t\t\t\t\t\t\tif ( ! row.children.length ) {\n\t\t\t\t\t\t\t\treturn rowAcc;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst rowAttributes = Array.from(\n\t\t\t\t\t\t\t\trow.children\n\t\t\t\t\t\t\t).reduce( ( colAcc, col ) => {\n\t\t\t\t\t\t\t\tconst rowspan = normalizeRowColSpan(\n\t\t\t\t\t\t\t\t\tcol.getAttribute( 'rowspan' )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tconst colspan = normalizeRowColSpan(\n\t\t\t\t\t\t\t\t\tcol.getAttribute( 'colspan' )\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tcolAcc.push( {\n\t\t\t\t\t\t\t\t\ttag: col.nodeName.toLowerCase(),\n\t\t\t\t\t\t\t\t\tcontent: col.innerHTML,\n\t\t\t\t\t\t\t\t\trowspan,\n\t\t\t\t\t\t\t\t\tcolspan,\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\treturn colAcc;\n\t\t\t\t\t\t\t}, [] );\n\n\t\t\t\t\t\t\trowAcc.push( {\n\t\t\t\t\t\t\t\tcells: rowAttributes,\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\treturn rowAcc;\n\t\t\t\t\t\t}, [] );\n\n\t\t\t\t\t\tsectionAcc[ sectionName ] = sectionAttributes;\n\t\t\t\t\t\treturn sectionAcc;\n\t\t\t\t\t},\n\t\t\t\t\t{}\n\t\t\t\t);\n\n\t\t\t\treturn createBlock( 'core/table', attributes );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n"],"mappings":"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"}