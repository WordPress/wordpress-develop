{"version":3,"names":["View","AccessibilityInfo","classnames","RichText","PlainText","useBlockProps","InspectorControls","PanelBody","SelectControl","ToggleControl","Icon","__","search","useRef","useEffect","useState","usePreferredColorSchemeStyle","styles","MIN_BUTTON_WIDTH","MARGINS","widthMargin","marginLeft","paddingLeft","BUTTON_OPTIONS","value","label","useIsScreenReaderEnabled","isScreenReaderEnabled","setIsScreenReaderEnabled","mounted","changeListener","addEventListener","enabled","then","screenReaderEnabled","remove","SearchEdit","onFocus","isSelected","attributes","setAttributes","className","blockWidth","style","isButtonSelected","setIsButtonSelected","isLabelSelected","setIsLabelSelected","isPlaceholderSelected","setIsPlaceholderSelected","isLongButton","setIsLongButton","buttonWidth","setButtonWidth","textInputRef","showLabel","buttonPosition","buttonUseIcon","placeholder","buttonText","hasTextInput","current","blur","maxButtonWidth","Math","floor","tempIsLongButton","onLayoutButton","nativeEvent","width","layout","getBlockClassNames","undefined","getSelectedButtonPositionLabel","option","blockProps","controls","createElement","title","checked","onChange","position","options","hideCancelButton","isButtonInside","borderStyle","border","borderDark","inputStyle","plainTextInput","plainTextInputDark","baseColors","color","text","placeholderStyle","plainTextPlaceholder","plainTextPlaceholderDark","searchBarStyle","searchBarContainer","flexDirection","getAccessibilityLabelForButton","getAccessibilityLabelForPlaceholder","description","getAccessibilityLabelForLabel","renderTextField","searchInputContainer","accessible","accessibilityRole","accessibilityHint","accessibilityLabel","ref","numberOfLines","ellipsizeMode","newVal","onBlur","placeholderTextColor","buttonPlaceholderText","baseButtonStyles","blocks","richTextButtonContainerStyle","buttonContainer","buttonContainerWide","background","backgroundColor","borderWidth","richTextButtonStyle","richTextButton","placeholderColor","iconStyles","icon","fill","renderButton","onLayout","identifier","tagName","withoutInteractiveFormatting","html","minWidth","maxWidth","textAlign","__unstableMobileNoFocusOnMount","unstableOnFocus","selectionColor","richTextButtonCursor","searchBlockContainer","importantForAccessibility","accessibilityElementsHidden","richTextLabel"],"sources":["@wordpress/block-library/src/search/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, AccessibilityInfo } from 'react-native';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tRichText,\n\tPlainText,\n\tuseBlockProps,\n\tInspectorControls,\n} from '@wordpress/block-editor';\nimport {\n\tPanelBody,\n\tSelectControl,\n\tToggleControl,\n\tIcon,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { search } from '@wordpress/icons';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\n/**\n * Constants\n */\nconst MIN_BUTTON_WIDTH = 75;\nconst MARGINS =\n\tstyles.widthMargin?.marginLeft + styles.widthMargin?.paddingLeft;\n\nconst BUTTON_OPTIONS = [\n\t{ value: 'button-inside', label: __( 'Button inside' ) },\n\t{ value: 'button-outside', label: __( 'Button outside' ) },\n\t{ value: 'no-button', label: __( 'No button' ) },\n];\n\nfunction useIsScreenReaderEnabled() {\n\tconst [ isScreenReaderEnabled, setIsScreenReaderEnabled ] =\n\t\tuseState( false );\n\n\tuseEffect( () => {\n\t\tlet mounted = true;\n\n\t\tconst changeListener = AccessibilityInfo.addEventListener(\n\t\t\t'screenReaderChanged',\n\t\t\t( enabled ) => setIsScreenReaderEnabled( enabled )\n\t\t);\n\n\t\tAccessibilityInfo.isScreenReaderEnabled().then(\n\t\t\t( screenReaderEnabled ) => {\n\t\t\t\tif ( mounted && screenReaderEnabled ) {\n\t\t\t\t\tsetIsScreenReaderEnabled( screenReaderEnabled );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn () => {\n\t\t\tmounted = false;\n\n\t\t\tchangeListener.remove();\n\t\t};\n\t}, [] );\n\n\treturn isScreenReaderEnabled;\n}\n\nexport default function SearchEdit( {\n\tonFocus,\n\tisSelected,\n\tattributes,\n\tsetAttributes,\n\tclassName,\n\tblockWidth,\n\tstyle,\n} ) {\n\tconst [ isButtonSelected, setIsButtonSelected ] = useState( false );\n\tconst [ isLabelSelected, setIsLabelSelected ] = useState( false );\n\tconst [ isPlaceholderSelected, setIsPlaceholderSelected ] =\n\t\tuseState( false );\n\tconst [ isLongButton, setIsLongButton ] = useState( false );\n\tconst [ buttonWidth, setButtonWidth ] = useState( MIN_BUTTON_WIDTH );\n\tconst isScreenReaderEnabled = useIsScreenReaderEnabled();\n\n\tconst textInputRef = useRef( null );\n\n\tconst {\n\t\tlabel,\n\t\tshowLabel,\n\t\tbuttonPosition,\n\t\tbuttonUseIcon,\n\t\tplaceholder,\n\t\tbuttonText,\n\t} = attributes;\n\n\t/*\n\t * Called when the value of isSelected changes. Blurs the PlainText component\n\t * used by the placeholder when this block loses focus.\n\t */\n\tuseEffect( () => {\n\t\tif ( hasTextInput() && isPlaceholderSelected && ! isSelected ) {\n\t\t\ttextInputRef.current.blur();\n\t\t}\n\t}, [ isSelected ] );\n\n\tuseEffect( () => {\n\t\tconst maxButtonWidth = Math.floor( blockWidth / 2 - MARGINS );\n\t\tconst tempIsLongButton = buttonWidth > maxButtonWidth;\n\n\t\t// Update this value only if it has changed to avoid flickering.\n\t\tif ( isLongButton !== tempIsLongButton ) {\n\t\t\tsetIsLongButton( tempIsLongButton );\n\t\t}\n\t}, [ blockWidth, buttonWidth ] );\n\n\tconst hasTextInput = () => {\n\t\treturn textInputRef && textInputRef.current;\n\t};\n\n\tconst onLayoutButton = ( { nativeEvent } ) => {\n\t\tconst { width } = nativeEvent?.layout;\n\n\t\tif ( width ) {\n\t\t\tsetButtonWidth( width );\n\t\t}\n\t};\n\n\tconst getBlockClassNames = () => {\n\t\treturn classnames(\n\t\t\tclassName,\n\t\t\t'button-inside' === buttonPosition\n\t\t\t\t? 'wp-block-search__button-inside'\n\t\t\t\t: undefined,\n\t\t\t'button-outside' === buttonPosition\n\t\t\t\t? 'wp-block-search__button-outside'\n\t\t\t\t: undefined,\n\t\t\t'no-button' === buttonPosition\n\t\t\t\t? 'wp-block-search__no-button'\n\t\t\t\t: undefined,\n\t\t\t'button-only' === buttonPosition\n\t\t\t\t? 'wp-block-search__button-only'\n\t\t\t\t: undefined,\n\t\t\t! buttonUseIcon && 'no-button' !== buttonPosition\n\t\t\t\t? 'wp-block-search__text-button'\n\t\t\t\t: undefined,\n\t\t\tbuttonUseIcon && 'no-button' !== buttonPosition\n\t\t\t\t? 'wp-block-search__icon-button'\n\t\t\t\t: undefined\n\t\t);\n\t};\n\n\tconst getSelectedButtonPositionLabel = ( option ) => {\n\t\tswitch ( option ) {\n\t\t\tcase 'button-inside':\n\t\t\t\treturn __( 'Inside' );\n\t\t\tcase 'button-outside':\n\t\t\t\treturn __( 'Outside' );\n\t\t\tcase 'no-button':\n\t\t\t\treturn __( 'No button' );\n\t\t}\n\t};\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: getBlockClassNames(),\n\t} );\n\n\tconst controls = (\n\t\t<InspectorControls>\n\t\t\t<PanelBody title={ __( 'Search settings' ) }>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={ __( 'Hide search heading' ) }\n\t\t\t\t\tchecked={ ! showLabel }\n\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tshowLabel: ! showLabel,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<SelectControl\n\t\t\t\t\tlabel={ __( 'Button position' ) }\n\t\t\t\t\tvalue={ getSelectedButtonPositionLabel( buttonPosition ) }\n\t\t\t\t\tonChange={ ( position ) => {\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tbuttonPosition: position,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\toptions={ BUTTON_OPTIONS }\n\t\t\t\t\thideCancelButton={ true }\n\t\t\t\t/>\n\t\t\t\t{ buttonPosition !== 'no-button' && (\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Use icon button' ) }\n\t\t\t\t\t\tchecked={ buttonUseIcon }\n\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\tbuttonUseIcon: ! buttonUseIcon,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</PanelBody>\n\t\t</InspectorControls>\n\t);\n\n\tconst isButtonInside = buttonPosition === 'button-inside';\n\n\tconst borderStyle = usePreferredColorSchemeStyle(\n\t\tstyles.border,\n\t\tstyles.borderDark\n\t);\n\n\tconst inputStyle = [\n\t\t! isButtonInside && borderStyle,\n\t\tusePreferredColorSchemeStyle(\n\t\t\tstyles.plainTextInput,\n\t\t\tstyles.plainTextInputDark\n\t\t),\n\t\tstyle?.baseColors?.color && { color: style?.baseColors?.color?.text },\n\t];\n\n\tconst placeholderStyle = {\n\t\t...usePreferredColorSchemeStyle(\n\t\t\tstyles.plainTextPlaceholder,\n\t\t\tstyles.plainTextPlaceholderDark\n\t\t),\n\t\t...( style?.baseColors?.color && {\n\t\t\tcolor: style?.baseColors?.color?.text,\n\t\t} ),\n\t};\n\n\tconst searchBarStyle = [\n\t\tstyles.searchBarContainer,\n\t\tisButtonInside && borderStyle,\n\t\tisLongButton && { flexDirection: 'column' },\n\t];\n\n\t/**\n\t * If a screenreader is enabled, create a descriptive label for this field. If\n\t * not, return a label that is used during automated UI tests.\n\t *\n\t * @return {string} The accessibilityLabel for the Search Button\n\t */\n\tconst getAccessibilityLabelForButton = () => {\n\t\tif ( ! isScreenReaderEnabled ) {\n\t\t\treturn 'search-block-button';\n\t\t}\n\n\t\treturn `${ __(\n\t\t\t'Search button. Current button text is'\n\t\t) } ${ buttonText }`;\n\t};\n\n\t/**\n\t * If a screenreader is enabled, create a descriptive label for this field. If\n\t * not, return a label that is used during automated UI tests.\n\t *\n\t * @return {string} The accessibilityLabel for the Search Input\n\t * \t\t\t\t\t placeholder field.\n\t */\n\tconst getAccessibilityLabelForPlaceholder = () => {\n\t\tif ( ! isScreenReaderEnabled ) {\n\t\t\treturn 'search-block-input';\n\t\t}\n\n\t\tconst title = __( 'Search input field.' );\n\t\tconst description = placeholder\n\t\t\t? `${ __( 'Current placeholder text is' ) } ${ placeholder }`\n\t\t\t: __( 'No custom placeholder set' );\n\t\treturn `${ title } ${ description }`;\n\t};\n\n\t/**\n\t * If a screenreader is enabled, create a descriptive label for this field. If\n\t * not, return a label that is used during automated UI tests.\n\t *\n\t * @return {string} The accessibilityLabel for the Search Label field\n\t */\n\tconst getAccessibilityLabelForLabel = () => {\n\t\tif ( ! isScreenReaderEnabled ) {\n\t\t\treturn 'search-block-label';\n\t\t}\n\n\t\treturn `${ __( 'Search block label. Current text is' ) } ${ label }`;\n\t};\n\n\tconst renderTextField = () => {\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ styles.searchInputContainer }\n\t\t\t\taccessible={ true }\n\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\taccessibilityHint={\n\t\t\t\t\tisScreenReaderEnabled\n\t\t\t\t\t\t? __( 'Double tap to edit placeholder text' )\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\taccessibilityLabel={ getAccessibilityLabelForPlaceholder() }\n\t\t\t>\n\t\t\t\t<PlainText\n\t\t\t\t\tref={ textInputRef }\n\t\t\t\t\tisSelected={ isPlaceholderSelected }\n\t\t\t\t\tclassName=\"wp-block-search__input\"\n\t\t\t\t\tstyle={ inputStyle }\n\t\t\t\t\tnumberOfLines={ 1 }\n\t\t\t\t\tellipsizeMode=\"tail\" // Currently only works on ios.\n\t\t\t\t\tlabel={ null }\n\t\t\t\t\tvalue={ placeholder }\n\t\t\t\t\tplaceholder={\n\t\t\t\t\t\tplaceholder ? undefined : __( 'Optional placeholder…' )\n\t\t\t\t\t}\n\t\t\t\t\tonChange={ ( newVal ) =>\n\t\t\t\t\t\tsetAttributes( { placeholder: newVal } )\n\t\t\t\t\t}\n\t\t\t\t\tonFocus={ () => {\n\t\t\t\t\t\tsetIsPlaceholderSelected( true );\n\t\t\t\t\t\tonFocus();\n\t\t\t\t\t} }\n\t\t\t\t\tonBlur={ () => setIsPlaceholderSelected( false ) }\n\t\t\t\t\tplaceholderTextColor={ placeholderStyle?.color }\n\t\t\t\t/>\n\t\t\t</View>\n\t\t);\n\t};\n\n\t// To achieve proper expanding and shrinking `RichText` on Android, there is a need to set\n\t// a `placeholder` as an empty string when `RichText` is focused,\n\t// because `AztecView` is calculating a `minWidth` based on placeholder text.\n\tconst buttonPlaceholderText =\n\t\tisButtonSelected ||\n\t\t( ! isButtonSelected && buttonText && buttonText !== '' )\n\t\t\t? ''\n\t\t\t: __( 'Add button text' );\n\n\tconst baseButtonStyles = {\n\t\t...style?.baseColors?.blocks?.[ 'core/button' ]?.color,\n\t\t...attributes?.style?.color,\n\t\t...( style?.color && { text: style.color } ),\n\t};\n\n\tconst richTextButtonContainerStyle = [\n\t\tstyles.buttonContainer,\n\t\tisLongButton && styles.buttonContainerWide,\n\t\tbaseButtonStyles?.background && {\n\t\t\tbackgroundColor: baseButtonStyles.background,\n\t\t\tborderWidth: 0,\n\t\t},\n\t\tstyle?.backgroundColor && {\n\t\t\tbackgroundColor: style.backgroundColor,\n\t\t\tborderWidth: 0,\n\t\t},\n\t];\n\n\tconst richTextButtonStyle = {\n\t\t...styles.richTextButton,\n\t\t...( baseButtonStyles?.text && {\n\t\t\tcolor: baseButtonStyles.text,\n\t\t\tplaceholderColor: baseButtonStyles.text,\n\t\t} ),\n\t};\n\n\tconst iconStyles = {\n\t\t...styles.icon,\n\t\t...( baseButtonStyles?.text && { fill: baseButtonStyles.text } ),\n\t};\n\n\tconst renderButton = () => {\n\t\treturn (\n\t\t\t<View style={ richTextButtonContainerStyle }>\n\t\t\t\t{ buttonUseIcon && (\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={ search }\n\t\t\t\t\t\t{ ...iconStyles }\n\t\t\t\t\t\tonLayout={ onLayoutButton }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ ! buttonUseIcon && (\n\t\t\t\t\t<View\n\t\t\t\t\t\taccessible={ true }\n\t\t\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\t\t\taccessibilityHint={\n\t\t\t\t\t\t\tisScreenReaderEnabled\n\t\t\t\t\t\t\t\t? __( 'Double tap to edit button text' )\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\taccessibilityLabel={ getAccessibilityLabelForButton() }\n\t\t\t\t\t\tonLayout={ onLayoutButton }\n\t\t\t\t\t>\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tclassName=\"wp-block-search__button\"\n\t\t\t\t\t\t\tidentifier=\"text\"\n\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\tstyle={ richTextButtonStyle }\n\t\t\t\t\t\t\tplaceholder={ buttonPlaceholderText }\n\t\t\t\t\t\t\tvalue={ buttonText }\n\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\tonChange={ ( html ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { buttonText: html } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tminWidth={ MIN_BUTTON_WIDTH }\n\t\t\t\t\t\t\tmaxWidth={ blockWidth - MARGINS }\n\t\t\t\t\t\t\ttextAlign=\"center\"\n\t\t\t\t\t\t\tisSelected={ isButtonSelected }\n\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount={ ! isSelected }\n\t\t\t\t\t\t\tunstableOnFocus={ () => {\n\t\t\t\t\t\t\t\tsetIsButtonSelected( true );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\t\tsetIsButtonSelected( false );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tselectionColor={\n\t\t\t\t\t\t\t\tstyles.richTextButtonCursor?.color\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\t\t\t</View>\n\t\t);\n\t};\n\n\treturn (\n\t\t<View\n\t\t\t{ ...blockProps }\n\t\t\tstyle={ styles.searchBlockContainer }\n\t\t\timportantForAccessibility={\n\t\t\t\tisSelected ? 'yes' : 'no-hide-descendants'\n\t\t\t}\n\t\t\taccessibilityElementsHidden={ isSelected ? false : true }\n\t\t>\n\t\t\t{ isSelected && controls }\n\n\t\t\t{ showLabel && (\n\t\t\t\t<View\n\t\t\t\t\taccessible={ true }\n\t\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\t\taccessibilityHint={\n\t\t\t\t\t\tisScreenReaderEnabled\n\t\t\t\t\t\t\t? __( 'Double tap to edit label text' )\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t}\n\t\t\t\t\taccessibilityLabel={ getAccessibilityLabelForLabel() }\n\t\t\t\t>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\tclassName=\"wp-block-search__label\"\n\t\t\t\t\t\tidentifier=\"text\"\n\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\tstyle={ styles.richTextLabel }\n\t\t\t\t\t\tplaceholder={ __( 'Add label…' ) }\n\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\tvalue={ label }\n\t\t\t\t\t\tonChange={ ( html ) =>\n\t\t\t\t\t\t\tsetAttributes( { label: html } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisSelected={ isLabelSelected }\n\t\t\t\t\t\t__unstableMobileNoFocusOnMount={ ! isSelected }\n\t\t\t\t\t\tunstableOnFocus={ () => {\n\t\t\t\t\t\t\tsetIsLabelSelected( true );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\tsetIsLabelSelected( false );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tselectionColor={ styles.richTextButtonCursor?.color }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t) }\n\n\t\t\t{ ( 'button-inside' === buttonPosition ||\n\t\t\t\t'button-outside' === buttonPosition ) && (\n\t\t\t\t<View style={ searchBarStyle }>\n\t\t\t\t\t{ renderTextField() }\n\t\t\t\t\t{ renderButton() }\n\t\t\t\t</View>\n\t\t\t) }\n\n\t\t\t{ 'button-only' === buttonPosition && renderButton() }\n\t\t\t{ 'no-button' === buttonPosition && renderTextField() }\n\t\t</View>\n\t);\n}\n"],"mappings":"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"}