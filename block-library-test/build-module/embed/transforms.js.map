{"version":3,"names":["createBlock","metadata","$schema","apiVersion","name","title","category","description","textdomain","attributes","url","type","__experimentalRole","caption","source","selector","providerNameSlug","allowResponsive","responsive","previewable","supports","align","spacing","margin","editorStyle","style","EMBED_BLOCK","transforms","from","isMatch","node","nodeName","test","textContent","match","length","transform","trim","to","blocks","value","content"],"sources":["@wordpress/block-library/src/embed/transforms.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport metadata from './block.json';\n\nconst { name: EMBED_BLOCK } = metadata;\n\n/**\n * Default transforms for generic embeds.\n */\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'raw',\n\t\t\tisMatch: ( node ) =>\n\t\t\t\tnode.nodeName === 'P' &&\n\t\t\t\t/^\\s*(https?:\\/\\/\\S+)\\s*$/i.test( node.textContent ) &&\n\t\t\t\tnode.textContent?.match( /https/gi )?.length === 1,\n\t\t\ttransform: ( node ) => {\n\t\t\t\treturn createBlock( EMBED_BLOCK, {\n\t\t\t\t\turl: node.textContent.trim(),\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n\tto: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/paragraph' ],\n\t\t\tisMatch: ( { url } ) => !! url,\n\t\t\ttransform: ( { url, caption } ) => {\n\t\t\t\tlet value = `<a href=\"${ url }\">${ url }</a>`;\n\t\t\t\tif ( caption?.trim() ) {\n\t\t\t\t\tvalue += `<br />${ caption }`;\n\t\t\t\t}\n\t\t\t\treturn createBlock( 'core/paragraph', {\n\t\t\t\t\tcontent: value,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAW,QAAQ,mBAAmB;;AAE/C;AACA;AACA;AAFA,MAAAC,QAAA;EAAAC,OAAA;EAAAC,UAAA;EAAAC,IAAA;EAAAC,KAAA;EAAAC,QAAA;EAAAC,WAAA;EAAAC,UAAA;EAAAC,UAAA;IAAAC,GAAA;MAAAC,IAAA;MAAAC,kBAAA;IAAA;IAAAC,OAAA;MAAAF,IAAA;MAAAG,MAAA;MAAAC,QAAA;MAAAH,kBAAA;IAAA;IAAAD,IAAA;MAAAA,IAAA;MAAAC,kBAAA;IAAA;IAAAI,gBAAA;MAAAL,IAAA;MAAAC,kBAAA;IAAA;IAAAK,eAAA;MAAAN,IAAA;MAAA;IAAA;IAAAO,UAAA;MAAAP,IAAA;MAAA;MAAAC,kBAAA;IAAA;IAAAO,WAAA;MAAAR,IAAA;MAAA;MAAAC,kBAAA;IAAA;EAAA;EAAAQ,QAAA;IAAAC,KAAA;IAAAC,OAAA;MAAAC,MAAA;IAAA;EAAA;EAAAC,WAAA;EAAAC,KAAA;AAAA;AAKA,MAAM;EAAErB,IAAI,EAAEsB;AAAY,CAAC,GAAGzB,QAAQ;;AAEtC;AACA;AACA;AACA,MAAM0B,UAAU,GAAG;EAClBC,IAAI,EAAE,CACL;IACCjB,IAAI,EAAE,KAAK;IACXkB,OAAO,EAAIC,IAAI,IACdA,IAAI,CAACC,QAAQ,KAAK,GAAG,IACrB,2BAA2B,CAACC,IAAI,CAAEF,IAAI,CAACG,WAAY,CAAC,IACpDH,IAAI,CAACG,WAAW,EAAEC,KAAK,CAAE,SAAU,CAAC,EAAEC,MAAM,KAAK,CAAC;IACnDC,SAAS,EAAIN,IAAI,IAAM;MACtB,OAAO9B,WAAW,CAAE0B,WAAW,EAAE;QAChChB,GAAG,EAAEoB,IAAI,CAACG,WAAW,CAACI,IAAI,CAAC;MAC5B,CAAE,CAAC;IACJ;EACD,CAAC,CACD;EACDC,EAAE,EAAE,CACH;IACC3B,IAAI,EAAE,OAAO;IACb4B,MAAM,EAAE,CAAE,gBAAgB,CAAE;IAC5BV,OAAO,EAAEA,CAAE;MAAEnB;IAAI,CAAC,KAAM,CAAC,CAAEA,GAAG;IAC9B0B,SAAS,EAAEA,CAAE;MAAE1B,GAAG;MAAEG;IAAQ,CAAC,KAAM;MAClC,IAAI2B,KAAK,GAAI,YAAY9B,GAAK,KAAKA,GAAK,MAAK;MAC7C,IAAKG,OAAO,EAAEwB,IAAI,CAAC,CAAC,EAAG;QACtBG,KAAK,IAAK,SAAS3B,OAAS,EAAC;MAC9B;MACA,OAAOb,WAAW,CAAE,gBAAgB,EAAE;QACrCyC,OAAO,EAAED;MACV,CAAE,CAAC;IACJ;EACD,CAAC;AAEH,CAAC;AAED,eAAeb,UAAU"}