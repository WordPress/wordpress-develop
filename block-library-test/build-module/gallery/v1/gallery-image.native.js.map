{"version":3,"names":["StyleSheet","View","ScrollView","TouchableWithoutFeedback","requestImageFailedRetryDialog","requestImageUploadCancelDialog","requestImageFullscreenPreview","Component","Image","__","sprintf","Caption","MediaUploadProgress","getProtocol","withPreferredColorScheme","arrowLeft","arrowRight","warning","Button","style","compose","separatorStyle","separator","borderRightWidth","hairlineWidth","buttonStyle","button","aspectRatio","ICON_SIZE_ARROW","GalleryImage","constructor","arguments","onSelectImage","bind","onSelectCaption","onMediaPressed","onCaptionChange","onSelectMedia","updateMediaProgress","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","renderContent","state","captionSelected","isUploadInProgress","didUploadFail","setState","props","isSelected","onSelect","id","url","isBlockSelected","onSelectBlock","media","setAttributes","caption","componentDidUpdate","prevProps","image","source_url","alt","alt_text","payload","mediaServerId","mediaUrl","params","isFirstItem","isLastItem","onRemove","onMoveForward","onMoveBackward","ariaLabel","isCropped","getStylesFromColorScheme","isRTL","isUploadFailed","retryMessage","resizeMode","captionPlaceholderStyle","captionPlaceholder","captionPlaceholderDark","shouldShowCaptionEditable","shouldShowCaptionExpanded","captionContainerStyle","captionExpandedContainer","captionContainer","captionStyle","captionExpanded","mediaPickerOptions","destructiveButton","label","onPress","separated","value","createElement","Fragment","height","onSelectMediaUploadOption","retryIcon","toolbarContainer","toolbar","moverButtonContainer","icon","iconSize","onClick","undefined","accessibilityLabel","disabled","nestedScrollEnabled","keyboardShouldPersistTaps","bounces","inlineToolbar","onChange","onFocus","placeholder","placeholderTextColor","color","render","containerStyle","galleryImageContainer","galleryImageContainerDark","accessible","accessibilityLabelImageContainer","accessibilityRole","mediaId","onUpdateMediaProgress","onFinishMediaUploadWithSuccess","onFinishMediaUploadWithFailure","onMediaUploadStateReset"],"sources":["@wordpress/block-library/src/gallery/v1/gallery-image.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tStyleSheet,\n\tView,\n\tScrollView,\n\tTouchableWithoutFeedback,\n} from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n\trequestImageFullscreenPreview,\n} from '@wordpress/react-native-bridge';\nimport { Component } from '@wordpress/element';\nimport { Image } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Caption, MediaUploadProgress } from '@wordpress/block-editor';\nimport { getProtocol } from '@wordpress/url';\nimport { withPreferredColorScheme } from '@wordpress/compose';\nimport { arrowLeft, arrowRight, warning } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport Button from './gallery-button';\nimport style from './gallery-image-style.scss';\n\nconst { compose } = StyleSheet;\n\nconst separatorStyle = compose( style.separator, {\n\tborderRightWidth: StyleSheet.hairlineWidth,\n} );\nconst buttonStyle = compose( style.button, { aspectRatio: 1 } );\nconst ICON_SIZE_ARROW = 15;\n\nclass GalleryImage extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onSelectImage = this.onSelectImage.bind( this );\n\t\tthis.onSelectCaption = this.onSelectCaption.bind( this );\n\t\tthis.onMediaPressed = this.onMediaPressed.bind( this );\n\t\tthis.onCaptionChange = this.onCaptionChange.bind( this );\n\t\tthis.onSelectMedia = this.onSelectMedia.bind( this );\n\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\n\t\tthis.finishMediaUploadWithSuccess =\n\t\t\tthis.finishMediaUploadWithSuccess.bind( this );\n\t\tthis.finishMediaUploadWithFailure =\n\t\t\tthis.finishMediaUploadWithFailure.bind( this );\n\t\tthis.renderContent = this.renderContent.bind( this );\n\n\t\tthis.state = {\n\t\t\tcaptionSelected: false,\n\t\t\tisUploadInProgress: false,\n\t\t\tdidUploadFail: false,\n\t\t};\n\t}\n\n\tonSelectCaption() {\n\t\tif ( ! this.state.captionSelected ) {\n\t\t\tthis.setState( {\n\t\t\t\tcaptionSelected: true,\n\t\t\t} );\n\t\t}\n\n\t\tif ( ! this.props.isSelected ) {\n\t\t\tthis.props.onSelect();\n\t\t}\n\t}\n\n\tonMediaPressed() {\n\t\tconst { id, url, isSelected } = this.props;\n\t\tconst { captionSelected, isUploadInProgress, didUploadFail } =\n\t\t\tthis.state;\n\n\t\tthis.onSelectImage();\n\n\t\tif ( isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( id );\n\t\t} else if (\n\t\t\tdidUploadFail ||\n\t\t\t( id && getProtocol( url ) === 'file:' )\n\t\t) {\n\t\t\trequestImageFailedRetryDialog( id );\n\t\t} else if ( isSelected && ! captionSelected ) {\n\t\t\trequestImageFullscreenPreview( url );\n\t\t}\n\t}\n\n\tonSelectImage() {\n\t\tif ( ! this.props.isBlockSelected ) {\n\t\t\tthis.props.onSelectBlock();\n\t\t}\n\n\t\tif ( ! this.props.isSelected ) {\n\t\t\tthis.props.onSelect();\n\t\t}\n\n\t\tif ( this.state.captionSelected ) {\n\t\t\tthis.setState( {\n\t\t\t\tcaptionSelected: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\tonSelectMedia( media ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( media );\n\t}\n\n\tonCaptionChange( caption ) {\n\t\tconst { setAttributes } = this.props;\n\t\tsetAttributes( { caption } );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { isSelected, image, url } = this.props;\n\t\tif ( image && ! url ) {\n\t\t\tthis.props.setAttributes( {\n\t\t\t\turl: image.source_url,\n\t\t\t\talt: image.alt_text,\n\t\t\t} );\n\t\t}\n\n\t\t// Unselect the caption so when the user selects other image and comeback\n\t\t// the caption is not immediately selected.\n\t\tif (\n\t\t\tthis.state.captionSelected &&\n\t\t\t! isSelected &&\n\t\t\tprevProps.isSelected\n\t\t) {\n\t\t\tthis.setState( {\n\t\t\t\tcaptionSelected: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\tupdateMediaProgress() {\n\t\tif ( ! this.state.isUploadInProgress ) {\n\t\t\tthis.setState( { isUploadInProgress: true } );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tthis.setState( {\n\t\t\tisUploadInProgress: false,\n\t\t\tdidUploadFail: false,\n\t\t} );\n\n\t\tthis.props.setAttributes( {\n\t\t\tid: payload.mediaServerId,\n\t\t\turl: payload.mediaUrl,\n\t\t} );\n\t}\n\n\tfinishMediaUploadWithFailure() {\n\t\tthis.setState( {\n\t\t\tisUploadInProgress: false,\n\t\t\tdidUploadFail: true,\n\t\t} );\n\t}\n\n\trenderContent( params ) {\n\t\tconst {\n\t\t\turl,\n\t\t\tisFirstItem,\n\t\t\tisLastItem,\n\t\t\tisSelected,\n\t\t\tcaption,\n\t\t\tonRemove,\n\t\t\tonMoveForward,\n\t\t\tonMoveBackward,\n\t\t\t'aria-label': ariaLabel,\n\t\t\tisCropped,\n\t\t\tgetStylesFromColorScheme,\n\t\t\tisRTL,\n\t\t} = this.props;\n\n\t\tconst { isUploadInProgress, captionSelected } = this.state;\n\t\tconst { isUploadFailed, retryMessage } = params;\n\t\tconst resizeMode = isCropped ? 'cover' : 'contain';\n\n\t\tconst captionPlaceholderStyle = getStylesFromColorScheme(\n\t\t\tstyle.captionPlaceholder,\n\t\t\tstyle.captionPlaceholderDark\n\t\t);\n\n\t\tconst shouldShowCaptionEditable = ! isUploadFailed && isSelected;\n\t\tconst shouldShowCaptionExpanded =\n\t\t\t! isUploadFailed && ! isSelected && !! caption;\n\n\t\tconst captionContainerStyle = shouldShowCaptionExpanded\n\t\t\t? style.captionExpandedContainer\n\t\t\t: style.captionContainer;\n\n\t\tconst captionStyle = shouldShowCaptionExpanded\n\t\t\t? style.captionExpanded\n\t\t\t: style.caption;\n\n\t\tconst mediaPickerOptions = [\n\t\t\t{\n\t\t\t\tdestructiveButton: true,\n\t\t\t\tid: 'removeImage',\n\t\t\t\tlabel: __( 'Remove' ),\n\t\t\t\tonPress: onRemove,\n\t\t\t\tseparated: true,\n\t\t\t\tvalue: 'removeImage',\n\t\t\t},\n\t\t];\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Image\n\t\t\t\t\talt={ ariaLabel }\n\t\t\t\t\theight={ style.image.height }\n\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\tisUploadFailed={ isUploadFailed }\n\t\t\t\t\tisUploadInProgress={ isUploadInProgress }\n\t\t\t\t\tmediaPickerOptions={ mediaPickerOptions }\n\t\t\t\t\tonSelectMediaUploadOption={ this.onSelectMedia }\n\t\t\t\t\tresizeMode={ resizeMode }\n\t\t\t\t\turl={ url }\n\t\t\t\t\tretryMessage={ retryMessage }\n\t\t\t\t\tretryIcon={ warning }\n\t\t\t\t/>\n\n\t\t\t\t{ ! isUploadInProgress && isSelected && (\n\t\t\t\t\t<View style={ style.toolbarContainer }>\n\t\t\t\t\t\t<View style={ style.toolbar }>\n\t\t\t\t\t\t\t<View style={ style.moverButtonContainer }>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tstyle={ buttonStyle }\n\t\t\t\t\t\t\t\t\ticon={ isRTL ? arrowRight : arrowLeft }\n\t\t\t\t\t\t\t\t\ticonSize={ ICON_SIZE_ARROW }\n\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\tisFirstItem ? undefined : onMoveBackward\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\taccessibilityLabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Move Image Backward'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\taria-disabled={ isFirstItem }\n\t\t\t\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<View style={ separatorStyle } />\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tstyle={ buttonStyle }\n\t\t\t\t\t\t\t\t\ticon={ isRTL ? arrowLeft : arrowRight }\n\t\t\t\t\t\t\t\t\ticonSize={ ICON_SIZE_ARROW }\n\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\tisLastItem ? undefined : onMoveForward\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\taccessibilityLabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Move Image Forward'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\taria-disabled={ isLastItem }\n\t\t\t\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\n\t\t\t\t{ ! isUploadInProgress &&\n\t\t\t\t\t( shouldShowCaptionEditable ||\n\t\t\t\t\t\tshouldShowCaptionExpanded ) && (\n\t\t\t\t\t\t<View style={ captionContainerStyle }>\n\t\t\t\t\t\t\t<ScrollView\n\t\t\t\t\t\t\t\tnestedScrollEnabled\n\t\t\t\t\t\t\t\tkeyboardShouldPersistTaps=\"handled\"\n\t\t\t\t\t\t\t\tbounces={ false }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Caption\n\t\t\t\t\t\t\t\t\tinlineToolbar\n\t\t\t\t\t\t\t\t\tisSelected={ isSelected && captionSelected }\n\t\t\t\t\t\t\t\t\tonChange={ this.onCaptionChange }\n\t\t\t\t\t\t\t\t\tonFocus={ this.onSelectCaption }\n\t\t\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t\t\tisSelected ? __( 'Add caption' ) : null\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tplaceholderTextColor={\n\t\t\t\t\t\t\t\t\t\tcaptionPlaceholderStyle.color\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tstyle={ captionStyle }\n\t\t\t\t\t\t\t\t\tvalue={ caption }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ScrollView>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { id, onRemove, getStylesFromColorScheme, isSelected } =\n\t\t\tthis.props;\n\n\t\tconst containerStyle = getStylesFromColorScheme(\n\t\t\tstyle.galleryImageContainer,\n\t\t\tstyle.galleryImageContainerDark\n\t\t);\n\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\tonPress={ this.onMediaPressed }\n\t\t\t\taccessible={ ! isSelected } // We need only child views to be accessible after the selection.\n\t\t\t\taccessibilityLabel={ this.accessibilityLabelImageContainer() } // if we don't set this explicitly it reads system provided accessibilityLabels of all child components and those include pretty technical words which don't make sense\n\t\t\t\taccessibilityRole={ 'imagebutton' } // this makes VoiceOver to read a description of image provided by system on iOS and lets user know this is a button which conveys the message of tappablity\n\t\t\t>\n\t\t\t\t<View style={ containerStyle }>\n\t\t\t\t\t<MediaUploadProgress\n\t\t\t\t\t\tmediaId={ id }\n\t\t\t\t\t\tonUpdateMediaProgress={ this.updateMediaProgress }\n\t\t\t\t\t\tonFinishMediaUploadWithSuccess={\n\t\t\t\t\t\t\tthis.finishMediaUploadWithSuccess\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonFinishMediaUploadWithFailure={\n\t\t\t\t\t\t\tthis.finishMediaUploadWithFailure\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMediaUploadStateReset={ onRemove }\n\t\t\t\t\t\trenderContent={ this.renderContent }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t}\n\n\taccessibilityLabelImageContainer() {\n\t\tconst { caption, 'aria-label': ariaLabel } = this.props;\n\n\t\treturn ! caption\n\t\t\t? ariaLabel\n\t\t\t: ariaLabel +\n\t\t\t\t\t'. ' +\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t/* translators: accessibility text. %s: image caption. */\n\t\t\t\t\t\t__( 'Image caption. %s' ),\n\t\t\t\t\t\tcaption\n\t\t\t\t\t);\n\t}\n}\n\nexport default withPreferredColorScheme( GalleryImage );\n"],"mappings":"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"}