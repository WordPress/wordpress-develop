{"version":3,"names":["BlockControls","store","ToolbarGroup","ToolbarButton","Modal","Button","Flex","FlexItem","useEffect","useState","RawHTML","__","useSelect","fullscreen","useViewportMatch","ModalAuxiliaryActions","onClick","isModalFullScreen","isMobileViewport","createElement","icon","isPressed","label","ClassicEdit","props","styles","select","getSettings","baseURL","suffix","settings","window","wpEditorL10n","tinymce","EditorManager","overrideDefaults","base_url","wp","oldEditor","initialize","id","setup","editor","on","doc","getDoc","forEach","css","styleEl","innerHTML","head","appendChild","remove","ModalEdit","clientId","attributes","content","setAttributes","onReplace","isOpen","setOpen","setIsModalFullScreen","onClose","Fragment","title","onRequestClose","shouldCloseOnClickOutside","overlayClassName","isFullScreen","className","headerActions","defaultValue","justify","expanded","variant","getContent"],"sources":["@wordpress/block-library/src/freeform/modal.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { BlockControls, store } from '@wordpress/block-editor';\nimport {\n\tToolbarGroup,\n\tToolbarButton,\n\tModal,\n\tButton,\n\tFlex,\n\tFlexItem,\n} from '@wordpress/components';\nimport { useEffect, useState, RawHTML } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { fullscreen } from '@wordpress/icons';\nimport { useViewportMatch } from '@wordpress/compose';\n\nfunction ModalAuxiliaryActions( { onClick, isModalFullScreen } ) {\n\t// 'small' to match the rules in editor.scss.\n\tconst isMobileViewport = useViewportMatch( 'small', '<' );\n\tif ( isMobileViewport ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Button\n\t\t\tonClick={ onClick }\n\t\t\ticon={ fullscreen }\n\t\t\tisPressed={ isModalFullScreen }\n\t\t\tlabel={\n\t\t\t\tisModalFullScreen\n\t\t\t\t\t? __( 'Exit fullscreen' )\n\t\t\t\t\t: __( 'Enter fullscreen' )\n\t\t\t}\n\t\t/>\n\t);\n}\n\nfunction ClassicEdit( props ) {\n\tconst styles = useSelect(\n\t\t( select ) => select( store ).getSettings().styles\n\t);\n\tuseEffect( () => {\n\t\tconst { baseURL, suffix, settings } = window.wpEditorL10n.tinymce;\n\n\t\twindow.tinymce.EditorManager.overrideDefaults( {\n\t\t\tbase_url: baseURL,\n\t\t\tsuffix,\n\t\t} );\n\n\t\twindow.wp.oldEditor.initialize( props.id, {\n\t\t\ttinymce: {\n\t\t\t\t...settings,\n\t\t\t\tsetup( editor ) {\n\t\t\t\t\teditor.on( 'init', () => {\n\t\t\t\t\t\tconst doc = editor.getDoc();\n\t\t\t\t\t\tstyles.forEach( ( { css } ) => {\n\t\t\t\t\t\t\tconst styleEl = doc.createElement( 'style' );\n\t\t\t\t\t\t\tstyleEl.innerHTML = css;\n\t\t\t\t\t\t\tdoc.head.appendChild( styleEl );\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t},\n\t\t} );\n\n\t\treturn () => {\n\t\t\twindow.wp.oldEditor.remove( props.id );\n\t\t};\n\t}, [] );\n\n\treturn <textarea { ...props } />;\n}\n\nexport default function ModalEdit( props ) {\n\tconst {\n\t\tclientId,\n\t\tattributes: { content },\n\t\tsetAttributes,\n\t\tonReplace,\n\t} = props;\n\tconst [ isOpen, setOpen ] = useState( false );\n\tconst [ isModalFullScreen, setIsModalFullScreen ] = useState( false );\n\tconst id = `editor-${ clientId }`;\n\n\tconst onClose = () => ( content ? setOpen( false ) : onReplace( [] ) );\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ToolbarButton onClick={ () => setOpen( true ) }>\n\t\t\t\t\t\t{ __( 'Edit' ) }\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t{ content && <RawHTML>{ content }</RawHTML> }\n\t\t\t{ ( isOpen || ! content ) && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={ __( 'Classic Editor' ) }\n\t\t\t\t\tonRequestClose={ onClose }\n\t\t\t\t\tshouldCloseOnClickOutside={ false }\n\t\t\t\t\toverlayClassName=\"block-editor-freeform-modal\"\n\t\t\t\t\tisFullScreen={ isModalFullScreen }\n\t\t\t\t\tclassName=\"block-editor-freeform-modal__content\"\n\t\t\t\t\theaderActions={\n\t\t\t\t\t\t<ModalAuxiliaryActions\n\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\tsetIsModalFullScreen( ! isModalFullScreen )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisModalFullScreen={ isModalFullScreen }\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<ClassicEdit id={ id } defaultValue={ content } />\n\t\t\t\t\t<Flex\n\t\t\t\t\t\tclassName=\"block-editor-freeform-modal__actions\"\n\t\t\t\t\t\tjustify=\"flex-end\"\n\t\t\t\t\t\texpanded={ false }\n\t\t\t\t\t>\n\t\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t\t<Button variant=\"tertiary\" onClick={ onClose }>\n\t\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t\t<FlexItem>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tcontent:\n\t\t\t\t\t\t\t\t\t\t\twindow.wp.oldEditor.getContent(\n\t\t\t\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\tsetOpen( false );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t</Flex>\n\t\t\t\t</Modal>\n\t\t\t) }\n\t\t</>\n\t);\n}\n"],"mappings":"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"}