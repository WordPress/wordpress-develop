{"version":3,"names":["View","TouchableWithoutFeedback","Text","Clipboard","requestImageFailedRetryDialog","requestImageUploadCancelDialog","mediaUploadSync","BlockIcon","MediaPlaceholder","MediaUploadProgress","RichText","PlainText","BlockControls","MediaUpload","InspectorControls","MEDIA_TYPE_ANY","store","blockEditorStore","ToolbarButton","ToolbarGroup","PanelBody","ToggleControl","TextControl","SelectControl","Icon","file","icon","replace","button","external","link","warning","Component","__","_x","compose","withPreferredColorScheme","withDispatch","withSelect","getProtocol","coreStore","styles","URL_COPIED_NOTIFICATION_DURATION_MS","MIN_WIDTH","FileEdit","constructor","props","state","isUploadInProgress","isSidebarLinkSettings","placeholderTextWidth","maxWidth","timerRef","onLayout","bind","onSelectFile","onChangeFileName","onChangeDownloadButtonText","updateMediaProgress","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","getFileComponent","onChangeDownloadButtonVisibility","onCopyURL","onChangeOpenInNewWindow","onChangeLinkDestinationOption","onShowLinkSettings","onFilePressed","mediaUploadStateReset","componentDidMount","attributes","setAttributes","downloadButtonText","isEmpty","id","url","componentWillUnmount","clearTimeout","componentDidUpdate","prevProps","isSidebarOpened","setState","media","href","fileName","title","textLinkHref","showDownloadButton","newHref","isUrlCopied","setString","setTimeout","newValue","textLinkTarget","payload","mediaUrl","mediaServerId","mediaId","openSidebar","getToolbarEditButton","open","createElement","onClick","getInspectorControls","isUploadFailed","linkDestinationOptions","value","label","attachmentPage","actionButtonStyle","getStylesFromColorScheme","actionButton","actionButtonDark","isCopyUrlDisabled","dimmedActionButtonStyle","dimmedActionButton","dimmedActionButtonDark","finalButtonStyle","onChange","options","hideCancelButton","checked","disabled","labelStyle","onPress","getStyleForAlignment","align","getFlexAlign","alignment","alignSelf","getTextAlignmentForAlignment","nativeEvent","width","layout","paddingLeft","paddingRight","defaultButton","getPlaceholderWidth","placeholderText","style","placeholder","onTextLayout","textWidth","lines","Math","min","openMediaOptions","getMediaOptions","isSelected","isButtonFocused","minWidth","onUpdateMediaProgress","onFinishMediaUploadWithSuccess","onFinishMediaUploadWithFailure","onMediaUploadStateReset","renderContent","dimmedStyle","disabledButton","errorIconStyle","Object","assign","errorIcon","uploadFailed","accessible","testID","container","withoutInteractiveFormatting","__unstableMobileNoFocusOnMount","tagName","underlineColorAndroid","deleteEnter","textAlign","errorContainer","editable","buttonText","unstableOnFocus","onBlur","selectionColor","color","placeholderTextColor","render","wasBlockJustInserted","labels","instructions","onSelect","onFocus","allowedTypes","autoOpenMediaUpload","isReplacingMedia","select","clientId","isEditorSidebarOpened","isNotFileHref","getMedia","undefined","dispatch","openGeneralSidebar"],"sources":["@wordpress/block-library/src/file/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, TouchableWithoutFeedback, Text } from 'react-native';\nimport Clipboard from '@react-native-clipboard/clipboard';\n\n/**\n * WordPress dependencies\n */\nimport {\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n\tmediaUploadSync,\n} from '@wordpress/react-native-bridge';\nimport {\n\tBlockIcon,\n\tMediaPlaceholder,\n\tMediaUploadProgress,\n\tRichText,\n\tPlainText,\n\tBlockControls,\n\tMediaUpload,\n\tInspectorControls,\n\tMEDIA_TYPE_ANY,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport {\n\tToolbarButton,\n\tToolbarGroup,\n\tPanelBody,\n\tToggleControl,\n\tTextControl,\n\tSelectControl,\n\tIcon,\n} from '@wordpress/components';\nimport {\n\tfile as icon,\n\treplace,\n\tbutton,\n\texternal,\n\tlink,\n\twarning,\n} from '@wordpress/icons';\nimport { Component } from '@wordpress/element';\nimport { __, _x } from '@wordpress/i18n';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { getProtocol } from '@wordpress/url';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nconst URL_COPIED_NOTIFICATION_DURATION_MS = 1500;\nconst MIN_WIDTH = 40;\n\nexport class FileEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisUploadInProgress: false,\n\t\t\tisSidebarLinkSettings: false,\n\t\t\tplaceholderTextWidth: 0,\n\t\t\tmaxWidth: 0,\n\t\t};\n\n\t\tthis.timerRef = null;\n\n\t\tthis.onLayout = this.onLayout.bind( this );\n\t\tthis.onSelectFile = this.onSelectFile.bind( this );\n\t\tthis.onChangeFileName = this.onChangeFileName.bind( this );\n\t\tthis.onChangeDownloadButtonText =\n\t\t\tthis.onChangeDownloadButtonText.bind( this );\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\n\t\tthis.finishMediaUploadWithSuccess =\n\t\t\tthis.finishMediaUploadWithSuccess.bind( this );\n\t\tthis.finishMediaUploadWithFailure =\n\t\t\tthis.finishMediaUploadWithFailure.bind( this );\n\t\tthis.getFileComponent = this.getFileComponent.bind( this );\n\t\tthis.onChangeDownloadButtonVisibility =\n\t\t\tthis.onChangeDownloadButtonVisibility.bind( this );\n\t\tthis.onCopyURL = this.onCopyURL.bind( this );\n\t\tthis.onChangeOpenInNewWindow =\n\t\t\tthis.onChangeOpenInNewWindow.bind( this );\n\n\t\tthis.onChangeLinkDestinationOption =\n\t\t\tthis.onChangeLinkDestinationOption.bind( this );\n\t\tthis.onShowLinkSettings = this.onShowLinkSettings.bind( this );\n\t\tthis.onFilePressed = this.onFilePressed.bind( this );\n\t\tthis.mediaUploadStateReset = this.mediaUploadStateReset.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { attributes, setAttributes } = this.props;\n\t\tconst { downloadButtonText } = attributes;\n\n\t\tif ( RichText.isEmpty( downloadButtonText ) ) {\n\t\t\tsetAttributes( {\n\t\t\t\tdownloadButtonText: _x( 'Download', 'button label' ),\n\t\t\t} );\n\t\t}\n\n\t\tif (\n\t\t\tattributes.id &&\n\t\t\tattributes.url &&\n\t\t\tgetProtocol( attributes.url ) === 'file:'\n\t\t) {\n\t\t\tmediaUploadSync();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout( this.timerRef );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tprevProps.isSidebarOpened &&\n\t\t\t! this.props.isSidebarOpened &&\n\t\t\tthis.state.isSidebarLinkSettings\n\t\t) {\n\t\t\tthis.setState( { isSidebarLinkSettings: false } );\n\t\t}\n\t}\n\n\tonSelectFile( media ) {\n\t\tthis.props.setAttributes( {\n\t\t\thref: media.url,\n\t\t\tfileName: media.title,\n\t\t\ttextLinkHref: media.url,\n\t\t\tid: media.id,\n\t\t} );\n\t}\n\n\tonChangeFileName( fileName ) {\n\t\tthis.props.setAttributes( { fileName } );\n\t}\n\n\tonChangeDownloadButtonText( downloadButtonText ) {\n\t\tthis.props.setAttributes( { downloadButtonText } );\n\t}\n\n\tonChangeDownloadButtonVisibility( showDownloadButton ) {\n\t\tthis.props.setAttributes( { showDownloadButton } );\n\t}\n\n\tonChangeLinkDestinationOption( newHref ) {\n\t\t// Choose Media File or Attachment Page (when file is in Media Library)\n\t\tthis.props.setAttributes( { textLinkHref: newHref } );\n\t}\n\n\tonCopyURL() {\n\t\tif ( this.state.isUrlCopied ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { href } = this.props.attributes;\n\t\tClipboard.setString( href );\n\n\t\tthis.setState( { isUrlCopied: true } );\n\t\tthis.timerRef = setTimeout( () => {\n\t\t\tthis.setState( { isUrlCopied: false } );\n\t\t}, URL_COPIED_NOTIFICATION_DURATION_MS );\n\t}\n\n\tonChangeOpenInNewWindow( newValue ) {\n\t\tthis.props.setAttributes( {\n\t\t\ttextLinkTarget: newValue ? '_blank' : false,\n\t\t} );\n\t}\n\n\tupdateMediaProgress( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tif ( payload.mediaUrl ) {\n\t\t\tsetAttributes( { url: payload.mediaUrl } );\n\t\t}\n\t\tif ( ! this.state.isUploadInProgress ) {\n\t\t\tthis.setState( { isUploadInProgress: true } );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\thref: payload.mediaUrl,\n\t\t\tid: payload.mediaServerId,\n\t\t\ttextLinkHref: payload.mediaUrl,\n\t\t} );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tfinishMediaUploadWithFailure( payload ) {\n\t\tthis.props.setAttributes( { id: payload.mediaId } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tmediaUploadStateReset() {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\tid: null,\n\t\t\thref: null,\n\t\t\ttextLinkHref: null,\n\t\t\tfileName: null,\n\t\t} );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tonShowLinkSettings() {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tisSidebarLinkSettings: true,\n\t\t\t},\n\t\t\tthis.props.openSidebar\n\t\t);\n\t}\n\n\tgetToolbarEditButton( open ) {\n\t\treturn (\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ttitle={ __( 'Edit file' ) }\n\t\t\t\t\t\ticon={ replace }\n\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ttitle={ __( 'Link To' ) }\n\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\tonClick={ this.onShowLinkSettings }\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t);\n\t}\n\n\tgetInspectorControls(\n\t\t{ showDownloadButton, textLinkTarget, href, textLinkHref },\n\t\tmedia,\n\t\tisUploadInProgress,\n\t\tisUploadFailed\n\t) {\n\t\tlet linkDestinationOptions = [ { value: href, label: __( 'URL' ) } ];\n\t\tconst attachmentPage = media && media.link;\n\t\tconst { isSidebarLinkSettings } = this.state;\n\n\t\tif ( attachmentPage ) {\n\t\t\tlinkDestinationOptions = [\n\t\t\t\t{ value: href, label: __( 'Media file' ) },\n\t\t\t\t{ value: attachmentPage, label: __( 'Attachment page' ) },\n\t\t\t];\n\t\t}\n\n\t\tconst actionButtonStyle = this.props.getStylesFromColorScheme(\n\t\t\tstyles.actionButton,\n\t\t\tstyles.actionButtonDark\n\t\t);\n\n\t\tconst isCopyUrlDisabled = isUploadFailed || isUploadInProgress;\n\n\t\tconst dimmedActionButtonStyle = this.props.getStylesFromColorScheme(\n\t\t\tstyles.dimmedActionButton,\n\t\t\tstyles.dimmedActionButtonDark\n\t\t);\n\n\t\tconst finalButtonStyle = isCopyUrlDisabled\n\t\t\t? dimmedActionButtonStyle\n\t\t\t: actionButtonStyle;\n\n\t\treturn (\n\t\t\t<InspectorControls>\n\t\t\t\t{ isSidebarLinkSettings || (\n\t\t\t\t\t<PanelBody title={ __( 'File block settings' ) } />\n\t\t\t\t) }\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\tlabel={ __( 'Link to' ) }\n\t\t\t\t\t\tvalue={ textLinkHref }\n\t\t\t\t\t\tonChange={ this.onChangeLinkDestinationOption }\n\t\t\t\t\t\toptions={ linkDestinationOptions }\n\t\t\t\t\t\thideCancelButton={ true }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\ticon={ external }\n\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\tchecked={ textLinkTarget === '_blank' }\n\t\t\t\t\t\tonChange={ this.onChangeOpenInNewWindow }\n\t\t\t\t\t/>\n\t\t\t\t\t{ ! isSidebarLinkSettings && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\ticon={ button }\n\t\t\t\t\t\t\tlabel={ __( 'Show download button' ) }\n\t\t\t\t\t\t\tchecked={ showDownloadButton }\n\t\t\t\t\t\t\tonChange={ this.onChangeDownloadButtonVisibility }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tdisabled={ isCopyUrlDisabled }\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\tthis.state.isUrlCopied\n\t\t\t\t\t\t\t\t? __( 'Copied!' )\n\t\t\t\t\t\t\t\t: __( 'Copy file URL' )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlabelStyle={\n\t\t\t\t\t\t\tthis.state.isUrlCopied || finalButtonStyle\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonPress={ this.onCopyURL }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t);\n\t}\n\n\tgetStyleForAlignment( align ) {\n\t\tconst getFlexAlign = ( alignment ) => {\n\t\t\tswitch ( alignment ) {\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn 'flex-end';\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn 'center';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'flex-start';\n\t\t\t}\n\t\t};\n\t\treturn { alignSelf: getFlexAlign( align ) };\n\t}\n\n\tgetTextAlignmentForAlignment( align ) {\n\t\tswitch ( align ) {\n\t\t\tcase 'right':\n\t\t\t\treturn 'right';\n\t\t\tcase 'center':\n\t\t\t\treturn 'center';\n\t\t\tdefault:\n\t\t\t\treturn 'left';\n\t\t}\n\t}\n\n\tonFilePressed() {\n\t\tconst { attributes } = this.props;\n\n\t\tif ( this.state.isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( attributes.id );\n\t\t} else if (\n\t\t\tattributes.id &&\n\t\t\tgetProtocol( attributes.href ) === 'file:'\n\t\t) {\n\t\t\trequestImageFailedRetryDialog( attributes.id );\n\t\t}\n\t}\n\n\tonLayout( { nativeEvent } ) {\n\t\tconst { width } = nativeEvent.layout;\n\t\tconst { paddingLeft, paddingRight } = styles.defaultButton;\n\t\tthis.setState( {\n\t\t\tmaxWidth: width - ( paddingLeft + paddingRight ),\n\t\t} );\n\t}\n\n\t// Render `Text` with `placeholderText` styled as a placeholder\n\t// to calculate its width which then is set as a `minWidth`\n\t// This should be fixed on RNAztec level. In the mean time,\n\t// We use the same strategy implemented in Button block.\n\tgetPlaceholderWidth( placeholderText ) {\n\t\tconst { maxWidth, placeholderTextWidth } = this.state;\n\t\treturn (\n\t\t\t<Text\n\t\t\t\tstyle={ styles.placeholder }\n\t\t\t\tonTextLayout={ ( { nativeEvent } ) => {\n\t\t\t\t\tconst textWidth =\n\t\t\t\t\t\tnativeEvent.lines[ 0 ] && nativeEvent.lines[ 0 ].width;\n\t\t\t\t\tif ( textWidth && textWidth !== placeholderTextWidth ) {\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tplaceholderTextWidth: Math.min(\n\t\t\t\t\t\t\t\ttextWidth,\n\t\t\t\t\t\t\t\tmaxWidth\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ placeholderText }\n\t\t\t</Text>\n\t\t);\n\t}\n\n\tgetFileComponent( openMediaOptions, getMediaOptions ) {\n\t\tconst { attributes, media, isSelected } = this.props;\n\t\tconst { isButtonFocused, placeholderTextWidth } = this.state;\n\n\t\tconst { fileName, downloadButtonText, id, showDownloadButton, align } =\n\t\t\tattributes;\n\n\t\tconst minWidth =\n\t\t\tisButtonFocused ||\n\t\t\t( ! isButtonFocused &&\n\t\t\t\tdownloadButtonText &&\n\t\t\t\tdownloadButtonText !== '' )\n\t\t\t\t? MIN_WIDTH\n\t\t\t\t: placeholderTextWidth;\n\n\t\tconst placeholderText =\n\t\t\tisButtonFocused ||\n\t\t\t( ! isButtonFocused &&\n\t\t\t\tdownloadButtonText &&\n\t\t\t\tdownloadButtonText !== '' )\n\t\t\t\t? ''\n\t\t\t\t: __( 'Add textâ€¦' );\n\n\t\treturn (\n\t\t\t<MediaUploadProgress\n\t\t\t\tmediaId={ id }\n\t\t\t\tonUpdateMediaProgress={ this.updateMediaProgress }\n\t\t\t\tonFinishMediaUploadWithSuccess={\n\t\t\t\t\tthis.finishMediaUploadWithSuccess\n\t\t\t\t}\n\t\t\t\tonFinishMediaUploadWithFailure={\n\t\t\t\t\tthis.finishMediaUploadWithFailure\n\t\t\t\t}\n\t\t\t\tonMediaUploadStateReset={ this.mediaUploadStateReset }\n\t\t\t\trenderContent={ ( { isUploadInProgress, isUploadFailed } ) => {\n\t\t\t\t\tconst dimmedStyle =\n\t\t\t\t\t\t( this.state.isUploadInProgress || isUploadFailed ) &&\n\t\t\t\t\t\tstyles.disabledButton;\n\t\t\t\t\tconst finalButtonStyle = [\n\t\t\t\t\t\tstyles.defaultButton,\n\t\t\t\t\t\tdimmedStyle,\n\t\t\t\t\t];\n\n\t\t\t\t\tconst errorIconStyle = Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tstyles.errorIcon,\n\t\t\t\t\t\tstyles.uploadFailed\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\t\t\taccessible={ ! isSelected }\n\t\t\t\t\t\t\tonPress={ this.onFilePressed }\n\t\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tonLayout={ this.onLayout }\n\t\t\t\t\t\t\t\ttestID=\"file-edit-container\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ this.getPlaceholderWidth( placeholderText ) }\n\t\t\t\t\t\t\t\t{ isUploadInProgress ||\n\t\t\t\t\t\t\t\t\tthis.getToolbarEditButton(\n\t\t\t\t\t\t\t\t\t\topenMediaOptions\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ getMediaOptions() }\n\t\t\t\t\t\t\t\t{ isSelected &&\n\t\t\t\t\t\t\t\t\tthis.getInspectorControls(\n\t\t\t\t\t\t\t\t\t\tattributes,\n\t\t\t\t\t\t\t\t\t\tmedia,\n\t\t\t\t\t\t\t\t\t\tisUploadInProgress,\n\t\t\t\t\t\t\t\t\t\tisUploadFailed\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<View style={ styles.container }>\n\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount\n\t\t\t\t\t\t\t\t\t\tonChange={ this.onChangeFileName }\n\t\t\t\t\t\t\t\t\t\tplaceholder={ __( 'File name' ) }\n\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\tunderlineColorAndroid=\"transparent\"\n\t\t\t\t\t\t\t\t\t\tvalue={ fileName }\n\t\t\t\t\t\t\t\t\t\tdeleteEnter={ true }\n\t\t\t\t\t\t\t\t\t\ttextAlign={ this.getTextAlignmentForAlignment(\n\t\t\t\t\t\t\t\t\t\t\talign\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{ isUploadFailed && (\n\t\t\t\t\t\t\t\t\t\t<View style={ styles.errorContainer }>\n\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\ticon={ warning }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ errorIconStyle }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<PlainText\n\t\t\t\t\t\t\t\t\t\t\t\teditable={ false }\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={ __( 'Error' ) }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ styles.uploadFailed }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t{ showDownloadButton &&\n\t\t\t\t\t\t\t\t\tthis.state.maxWidth > 0 && (\n\t\t\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\t\t\t\t\tfinalButtonStyle,\n\t\t\t\t\t\t\t\t\t\t\t\tthis.getStyleForAlignment(\n\t\t\t\t\t\t\t\t\t\t\t\t\talign\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount\n\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\t\t\ttextAlign=\"center\"\n\t\t\t\t\t\t\t\t\t\t\t\tminWidth={ minWidth }\n\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth={ this.state.maxWidth }\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteEnter={ true }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ styles.buttonText }\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={ downloadButtonText }\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={ placeholderText }\n\t\t\t\t\t\t\t\t\t\t\t\tunstableOnFocus={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisButtonFocused: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisButtonFocused: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tselectionColor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyles.buttonText.color\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholderTextColor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyles.placeholderTextColor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.color\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tunderlineColorAndroid=\"transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.onChangeDownloadButtonText\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { attributes, wasBlockJustInserted, isSelected } = this.props;\n\t\tconst { href } = attributes;\n\n\t\tif ( ! href ) {\n\t\t\treturn (\n\t\t\t\t<MediaPlaceholder\n\t\t\t\t\ticon={ <BlockIcon icon={ icon } /> }\n\t\t\t\t\tlabels={ {\n\t\t\t\t\t\ttitle: __( 'File' ),\n\t\t\t\t\t\tinstructions: __( 'Choose a file' ),\n\t\t\t\t\t} }\n\t\t\t\t\tonSelect={ this.onSelectFile }\n\t\t\t\t\tonFocus={ this.props.onFocus }\n\t\t\t\t\tallowedTypes={ [ MEDIA_TYPE_ANY ] }\n\t\t\t\t\tautoOpenMediaUpload={ isSelected && wasBlockJustInserted }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<MediaUpload\n\t\t\t\tallowedTypes={ [ MEDIA_TYPE_ANY ] }\n\t\t\t\tisReplacingMedia={ true }\n\t\t\t\tonSelect={ this.onSelectFile }\n\t\t\t\trender={ ( { open, getMediaOptions } ) => {\n\t\t\t\t\treturn this.getFileComponent( open, getMediaOptions );\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, props ) => {\n\t\tconst { attributes, isSelected, clientId } = props;\n\t\tconst { id, href } = attributes;\n\t\tconst { isEditorSidebarOpened } = select( 'core/edit-post' );\n\t\tconst isNotFileHref = id && getProtocol( href ) !== 'file:';\n\t\treturn {\n\t\t\tmedia: isNotFileHref\n\t\t\t\t? select( coreStore ).getMedia( id )\n\t\t\t\t: undefined,\n\t\t\tisSidebarOpened: isSelected && isEditorSidebarOpened(),\n\t\t\twasBlockJustInserted: select(\n\t\t\t\tblockEditorStore\n\t\t\t).wasBlockJustInserted( clientId, 'inserter_menu' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { openGeneralSidebar } = dispatch( 'core/edit-post' );\n\t\treturn {\n\t\t\topenSidebar: () => openGeneralSidebar( 'edit-post/block' ),\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( FileEdit );\n"],"mappings":"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"}