{"version":3,"names":["useEffect","useState","usePrevious","useDeprecatedOpacity","opacity","currentColor","setAttributes","deprecatedOpacityWithNoColor","setDeprecatedOpacityWithNoColor","previousColor"],"sources":["@wordpress/block-library/src/separator/use-deprecated-opacity.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\nimport { usePrevious } from '@wordpress/compose';\n\nexport default function useDeprecatedOpacity(\n\topacity,\n\tcurrentColor,\n\tsetAttributes\n) {\n\tconst [ deprecatedOpacityWithNoColor, setDeprecatedOpacityWithNoColor ] =\n\t\tuseState( false );\n\tconst previousColor = usePrevious( currentColor );\n\n\t// A separator with no color set will always have previousColor set to undefined,\n\t// and we need to differentiate these from those with color set that will return\n\t// previousColor as undefined on the first render.\n\tuseEffect( () => {\n\t\tif ( opacity === 'css' && ! currentColor && ! previousColor ) {\n\t\t\tsetDeprecatedOpacityWithNoColor( true );\n\t\t}\n\t}, [ currentColor, previousColor, opacity ] );\n\n\t// For deprecated blocks, that have a default 0.4 css opacity set, we\n\t// need to remove this if the current color is changed, or a color is added.\n\t// In these instances the opacity attribute is set back to the default of\n\t// alpha-channel which allows a new custom opacity to be set via the color picker.\n\tuseEffect( () => {\n\t\tif (\n\t\t\topacity === 'css' &&\n\t\t\t( ( deprecatedOpacityWithNoColor && currentColor ) ||\n\t\t\t\t( previousColor && currentColor !== previousColor ) )\n\t\t) {\n\t\t\tsetAttributes( { opacity: 'alpha-channel' } );\n\t\t\tsetDeprecatedOpacityWithNoColor( false );\n\t\t}\n\t}, [ deprecatedOpacityWithNoColor, currentColor, previousColor ] );\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,oBAAoB;AACxD,SAASC,WAAW,QAAQ,oBAAoB;AAEhD,eAAe,SAASC,oBAAoBA,CAC3CC,OAAO,EACPC,YAAY,EACZC,aAAa,EACZ;EACD,MAAM,CAAEC,4BAA4B,EAAEC,+BAA+B,CAAE,GACtEP,QAAQ,CAAE,KAAM,CAAC;EAClB,MAAMQ,aAAa,GAAGP,WAAW,CAAEG,YAAa,CAAC;;EAEjD;EACA;EACA;EACAL,SAAS,CAAE,MAAM;IAChB,IAAKI,OAAO,KAAK,KAAK,IAAI,CAAEC,YAAY,IAAI,CAAEI,aAAa,EAAG;MAC7DD,+BAA+B,CAAE,IAAK,CAAC;IACxC;EACD,CAAC,EAAE,CAAEH,YAAY,EAAEI,aAAa,EAAEL,OAAO,CAAG,CAAC;;EAE7C;EACA;EACA;EACA;EACAJ,SAAS,CAAE,MAAM;IAChB,IACCI,OAAO,KAAK,KAAK,KACbG,4BAA4B,IAAIF,YAAY,IAC7CI,aAAa,IAAIJ,YAAY,KAAKI,aAAe,CAAE,EACrD;MACDH,aAAa,CAAE;QAAEF,OAAO,EAAE;MAAgB,CAAE,CAAC;MAC7CI,+BAA+B,CAAE,KAAM,CAAC;IACzC;EACD,CAAC,EAAE,CAAED,4BAA4B,EAAEF,YAAY,EAAEI,aAAa,CAAG,CAAC;AACnE"}