{"version":3,"names":["View","InnerBlocks","store","blockEditorStore","withDispatch","withSelect","useRef","useEffect","useState","compose","usePreferredColorSchemeStyle","styles","TEMPLATE","service","url","SocialLinksEdit","shouldDelete","onDelete","isSelected","isInnerIconSelected","innerBlocks","attributes","activeInnerBlocks","getBlock","blockWidth","initialCreation","setInitialCreation","shouldRenderFooterAppender","align","marginLeft","spacing","renderFooterAppender","createElement","style","footerAppenderContainer","ButtonBlockAppender","isFloating","placeholderStyle","placeholder","placeholderDark","renderPlaceholder","Array","length","map","_","index","testID","key","filterInnerBlocks","blockIds","filter","blockId","placeholderWrapper","templateLock","template","current","orientation","onDeleteBlock","undefined","marginVertical","marginHorizontal","horizontalAlignment","select","clientId","getBlockCount","getBlockParents","getSelectedBlockClientId","getBlocks","selectedBlockClientId","selectedBlockParents","block","dispatch","removeBlock"],"sources":["@wordpress/block-library/src/social-links/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n/**\n * WordPress dependencies\n */\nimport {\n\tInnerBlocks,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { compose, usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './editor.scss';\n\n// Template contains the links that show when start.\nconst TEMPLATE = [\n\t[\n\t\t'core/social-link-wordpress',\n\t\t{ service: 'wordpress', url: 'https://wordpress.org' },\n\t],\n\t[ 'core/social-link-facebook', { service: 'facebook' } ],\n\t[ 'core/social-link-twitter', { service: 'twitter' } ],\n\t[ 'core/social-link-instagram', { service: 'instagram' } ],\n];\n\nfunction SocialLinksEdit( {\n\tshouldDelete,\n\tonDelete,\n\tisSelected,\n\tisInnerIconSelected,\n\tinnerBlocks,\n\tattributes,\n\tactiveInnerBlocks,\n\tgetBlock,\n\tblockWidth,\n} ) {\n\tconst [ initialCreation, setInitialCreation ] = useState( true );\n\tconst shouldRenderFooterAppender = isSelected || isInnerIconSelected;\n\tconst { align } = attributes;\n\tconst { marginLeft: spacing } = styles.spacing;\n\n\tuseEffect( () => {\n\t\tif ( ! shouldRenderFooterAppender ) {\n\t\t\tsetInitialCreation( false );\n\t\t}\n\t}, [ shouldRenderFooterAppender ] );\n\n\tconst renderFooterAppender = useRef( () => (\n\t\t<View style={ styles.footerAppenderContainer }>\n\t\t\t<InnerBlocks.ButtonBlockAppender isFloating={ true } />\n\t\t</View>\n\t) );\n\n\tconst placeholderStyle = usePreferredColorSchemeStyle(\n\t\tstyles.placeholder,\n\t\tstyles.placeholderDark\n\t);\n\n\tfunction renderPlaceholder() {\n\t\treturn [ ...new Array( innerBlocks.length || 1 ) ].map(\n\t\t\t( _, index ) => (\n\t\t\t\t<View\n\t\t\t\t\ttestID=\"social-links-placeholder\"\n\t\t\t\t\tstyle={ placeholderStyle }\n\t\t\t\t\tkey={ index }\n\t\t\t\t/>\n\t\t\t)\n\t\t);\n\t}\n\n\tfunction filterInnerBlocks( blockIds ) {\n\t\treturn blockIds.filter(\n\t\t\t( blockId ) => getBlock( blockId ).attributes.url\n\t\t);\n\t}\n\n\tif ( ! shouldRenderFooterAppender && activeInnerBlocks.length === 0 ) {\n\t\treturn (\n\t\t\t<View style={ styles.placeholderWrapper }>\n\t\t\t\t{ renderPlaceholder() }\n\t\t\t</View>\n\t\t);\n\t}\n\n\treturn (\n\t\t<InnerBlocks\n\t\t\ttemplateLock={ false }\n\t\t\ttemplate={ initialCreation && TEMPLATE }\n\t\t\trenderFooterAppender={\n\t\t\t\tshouldRenderFooterAppender && renderFooterAppender.current\n\t\t\t}\n\t\t\torientation={ 'horizontal' }\n\t\t\tonDeleteBlock={ shouldDelete ? onDelete : undefined }\n\t\t\tmarginVertical={ spacing }\n\t\t\tmarginHorizontal={ spacing }\n\t\t\thorizontalAlignment={ align }\n\t\t\tfilterInnerBlocks={\n\t\t\t\t! shouldRenderFooterAppender && filterInnerBlocks\n\t\t\t}\n\t\t\tblockWidth={ blockWidth }\n\t\t/>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlockCount,\n\t\t\tgetBlockParents,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlocks,\n\t\t\tgetBlock,\n\t\t} = select( blockEditorStore );\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst selectedBlockParents = getBlockParents(\n\t\t\tselectedBlockClientId,\n\t\t\ttrue\n\t\t);\n\t\tconst innerBlocks = getBlocks( clientId );\n\t\tconst activeInnerBlocks = innerBlocks.filter(\n\t\t\t( block ) => block.attributes?.url\n\t\t);\n\n\t\treturn {\n\t\t\tshouldDelete: getBlockCount( clientId ) === 1,\n\t\t\tisInnerIconSelected: selectedBlockParents[ 0 ] === clientId,\n\t\t\tinnerBlocks,\n\t\t\tactiveInnerBlocks,\n\t\t\tgetBlock,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\tconst { removeBlock } = dispatch( blockEditorStore );\n\n\t\treturn {\n\t\t\tonDelete: () => {\n\t\t\t\tremoveBlock( clientId, false );\n\t\t\t},\n\t\t};\n\t} )\n)( SocialLinksEdit );\n"],"mappings":"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"}