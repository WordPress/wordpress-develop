{"version":3,"names":["_i18n","require","_components","_url","_data","_notices","_element","EmbedLinkSettings","autoFocus","value","label","isVisible","onClose","onSubmit","withBottomSheet","url","useRef","inputURL","setInputURL","useState","createErrorNotice","useDispatch","noticesStore","linkSettingsOptions","sprintf","__","placeholder","autoFill","footer","_react","createElement","FooterMessageLink","href","separatorType","onDismiss","useCallback","isURL","current","useEffect","performOnCloseOperations","onSetAttributes","attributes","LinkSettingsNavigation","setAttributes","options","showIcon","_default","exports","default"],"sources":["@wordpress/block-library/src/embed/embed-link-settings.native.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tLinkSettingsNavigation,\n\tFooterMessageLink,\n} from '@wordpress/components';\nimport { isURL } from '@wordpress/url';\nimport { useDispatch } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { useCallback, useEffect, useRef, useState } from '@wordpress/element';\n\nconst EmbedLinkSettings = ( {\n\tautoFocus,\n\tvalue,\n\tlabel,\n\tisVisible,\n\tonClose,\n\tonSubmit,\n\twithBottomSheet,\n} ) => {\n\tconst url = useRef( value );\n\tconst [ inputURL, setInputURL ] = useState( value );\n\tconst { createErrorNotice } = useDispatch( noticesStore );\n\n\tconst linkSettingsOptions = {\n\t\turl: {\n\t\t\tlabel: sprintf(\n\t\t\t\t// translators: %s: embed block variant's label e.g: \"Twitter\".\n\t\t\t\t__( '%s link' ),\n\t\t\t\tlabel\n\t\t\t),\n\t\t\tplaceholder: __( 'Add link' ),\n\t\t\tautoFocus,\n\t\t\tautoFill: true,\n\t\t},\n\t\tfooter: {\n\t\t\tlabel: (\n\t\t\t\t<FooterMessageLink\n\t\t\t\t\thref={ __(\n\t\t\t\t\t\t'https://wordpress.org/documentation/article/embeds/'\n\t\t\t\t\t) }\n\t\t\t\t\tvalue={ __( 'Learn more about embeds' ) }\n\t\t\t\t/>\n\t\t\t),\n\t\t\tseparatorType: 'topFullWidth',\n\t\t},\n\t};\n\n\tconst onDismiss = useCallback( () => {\n\t\tif ( ! isURL( url.current ) && url.current !== '' ) {\n\t\t\tcreateErrorNotice( __( 'Invalid URL. Please enter a valid URL.' ) );\n\t\t\t// If the URL was already defined, we submit it to stop showing the embed placeholder.\n\t\t\tonSubmit( value );\n\t\t\treturn;\n\t\t}\n\t\tonSubmit( url.current );\n\t}, [ onSubmit, value ] );\n\n\tuseEffect( () => {\n\t\turl.current = value;\n\t\tsetInputURL( value );\n\t}, [ value ] );\n\n\t/**\n\t * If the Embed Bottom Sheet component does not utilize a bottom sheet then the onDismiss action is not\n\t * called. Here we are wiring the onDismiss to the onClose callback that gets triggered when input is submitted.\n\t */\n\tconst performOnCloseOperations = useCallback( () => {\n\t\tif ( onClose ) {\n\t\t\tonClose();\n\t\t}\n\n\t\tif ( ! withBottomSheet ) {\n\t\t\tonDismiss();\n\t\t}\n\t}, [ onClose ] );\n\n\tconst onSetAttributes = useCallback( ( attributes ) => {\n\t\turl.current = attributes.url;\n\t\tsetInputURL( attributes.url );\n\t}, [] );\n\n\treturn (\n\t\t<LinkSettingsNavigation\n\t\t\tisVisible={ isVisible }\n\t\t\turl={ inputURL }\n\t\t\tonClose={ performOnCloseOperations }\n\t\t\tonDismiss={ onDismiss }\n\t\t\tsetAttributes={ onSetAttributes }\n\t\t\toptions={ linkSettingsOptions }\n\t\t\twithBottomSheet={ withBottomSheet }\n\t\t\tshowIcon\n\t\t/>\n\t);\n};\n\nexport default EmbedLinkSettings;\n"],"mappings":"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"}