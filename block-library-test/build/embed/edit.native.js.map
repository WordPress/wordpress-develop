{"version":3,"names":["_util","require","_embedControls","_interopRequireDefault","_icons","_embedLoading","_embedPlaceholder","_embedPreview","_embedLinkSettings","_classnames","_i18n","_element","_data","_blockEditor","_coreData","_primitives","_url","PREVIEWABLE_PROVIDERS","NOT_PREVIEWABLE_WP_EMBED_PROVIDERS","WP_EMBED_TYPE","EmbedEdit","props","attributes","align","providerNameSlug","previewable","responsive","url","isSelected","onReplace","setAttributes","insertBlocksAfter","onFocus","clientId","defaultEmbedInfo","title","_x","icon","embedContentIcon","embedInfoByProvider","getEmbedInfoByProvider","wasBlockJustInserted","useSelect","select","blockEditorStore","isEditingURL","setIsEditingURL","useState","showEmbedBottomSheet","setShowEmbedBottomSheet","invalidateResolution","useDispatch","coreStore","preview","fetching","themeSupportsResponsive","cannotEmbed","getEmbedPreview","hasFinishedResolution","isPreviewEmbedFallback","getThemeSupports","embedPreview","hasResolvedEmbedPreview","previewIsFallback","badEmbedProvider","html","type","undefined","wordpressCantEmbed","code","validPreview","getMergedAttributes","getMergedAttributesWithPreview","toggleResponsive","allowResponsive","className","newAllowResponsive","getClassNames","useEffect","newURL","replace","getAuthority","URL","host","toString","mergedAttributes","upgradedBlock","createUpgradedEmbedBlock","onEditURL","useCallback","value","blockClass","removeAspectRatioClasses","blockProps","useBlockProps","_react","createElement","View","default","showEmbedPlaceholder","classFromPreview","classnames","isProviderPreviewable","includes","linkLabel","Fragment","label","onPress","event","fallback","tryAgain","openEmbedLinkSettings","blockSupportsResponsive","isDefaultEmbedInfo","autoFocus","isVisible","onClose","onSubmit","withBottomSheet","_default","exports"],"sources":["@wordpress/block-library/src/embed/edit.native.js"],"sourcesContent":["/**\n * Internal dependencies\n */\nimport {\n\tcreateUpgradedEmbedBlock,\n\tgetClassNames,\n\tremoveAspectRatioClasses,\n\tfallback,\n\tgetEmbedInfoByProvider,\n\tgetMergedAttributesWithPreview,\n} from './util';\nimport EmbedControls from './embed-controls';\nimport { embedContentIcon } from './icons';\nimport EmbedLoading from './embed-loading';\nimport EmbedPlaceholder from './embed-placeholder';\nimport EmbedPreview from './embed-preview';\nimport EmbedLinkSettings from './embed-link-settings';\n\n/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { _x } from '@wordpress/i18n';\nimport { useCallback, useState, useEffect } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { View } from '@wordpress/primitives';\nimport { getAuthority } from '@wordpress/url';\n\n// The inline preview feature will be released progressible, for this reason\n// the embed will only be considered previewable for the following providers list.\nconst PREVIEWABLE_PROVIDERS = [ 'youtube', 'twitter', 'instagram', 'vimeo' ];\n// Some providers are rendering the inline preview as a WordPress embed and\n// are not supported yet, so we need to disallow them with a fixed providers list.\nconst NOT_PREVIEWABLE_WP_EMBED_PROVIDERS = [ 'pinterest' ];\n\nconst WP_EMBED_TYPE = 'wp-embed';\n\nconst EmbedEdit = ( props ) => {\n\tconst {\n\t\tattributes: { align, providerNameSlug, previewable, responsive, url },\n\t\tattributes,\n\t\tisSelected,\n\t\tonReplace,\n\t\tsetAttributes,\n\t\tinsertBlocksAfter,\n\t\tonFocus,\n\t\tclientId,\n\t} = props;\n\n\tconst defaultEmbedInfo = {\n\t\ttitle: _x( 'Embed', 'block title' ),\n\t\ticon: embedContentIcon,\n\t};\n\tconst embedInfoByProvider = getEmbedInfoByProvider( providerNameSlug );\n\tconst { icon, title } = embedInfoByProvider || defaultEmbedInfo;\n\n\tconst { wasBlockJustInserted } = useSelect(\n\t\t( select ) => ( {\n\t\t\twasBlockJustInserted: select(\n\t\t\t\tblockEditorStore\n\t\t\t).wasBlockJustInserted( clientId, 'inserter_menu' ),\n\t\t} ),\n\t\t[ clientId ]\n\t);\n\tconst [ isEditingURL, setIsEditingURL ] = useState(\n\t\tisSelected && wasBlockJustInserted && ! url\n\t);\n\tconst [ showEmbedBottomSheet, setShowEmbedBottomSheet ] =\n\t\tuseState( isEditingURL );\n\tconst { invalidateResolution } = useDispatch( coreStore );\n\n\tconst { preview, fetching, themeSupportsResponsive, cannotEmbed } =\n\t\tuseSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst {\n\t\t\t\t\tgetEmbedPreview,\n\t\t\t\t\thasFinishedResolution,\n\t\t\t\t\tisPreviewEmbedFallback,\n\t\t\t\t\tgetThemeSupports,\n\t\t\t\t} = select( coreStore );\n\t\t\t\tif ( ! url ) {\n\t\t\t\t\treturn { fetching: false, cannotEmbed: false };\n\t\t\t\t}\n\n\t\t\t\tconst embedPreview = getEmbedPreview( url );\n\t\t\t\tconst hasResolvedEmbedPreview = hasFinishedResolution(\n\t\t\t\t\t'getEmbedPreview',\n\t\t\t\t\t[ url ]\n\t\t\t\t);\n\t\t\t\tconst previewIsFallback = isPreviewEmbedFallback( url );\n\n\t\t\t\t// The external oEmbed provider does not exist. We got no type info and no html.\n\t\t\t\tconst badEmbedProvider =\n\t\t\t\t\tembedPreview?.html === false &&\n\t\t\t\t\tembedPreview?.type === undefined;\n\t\t\t\t// Some WordPress URLs that can't be embedded will cause the API to return\n\t\t\t\t// a valid JSON response with no HTML and `code` set to 404, rather\n\t\t\t\t// than generating a fallback response as other embeds do.\n\t\t\t\tconst wordpressCantEmbed = embedPreview?.code === '404';\n\t\t\t\tconst validPreview =\n\t\t\t\t\t!! embedPreview &&\n\t\t\t\t\t! badEmbedProvider &&\n\t\t\t\t\t! wordpressCantEmbed;\n\n\t\t\t\treturn {\n\t\t\t\t\tpreview: validPreview ? embedPreview : undefined,\n\t\t\t\t\tfetching: ! hasResolvedEmbedPreview,\n\t\t\t\t\tthemeSupportsResponsive:\n\t\t\t\t\t\tgetThemeSupports()[ 'responsive-embeds' ],\n\t\t\t\t\tcannotEmbed: ! validPreview || previewIsFallback,\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ url ]\n\t\t);\n\n\t/**\n\t * Returns the attributes derived from the preview, merged with the current attributes.\n\t *\n\t * @return {Object} Merged attributes.\n\t */\n\tconst getMergedAttributes = () =>\n\t\tgetMergedAttributesWithPreview(\n\t\t\tattributes,\n\t\t\tpreview,\n\t\t\ttitle,\n\t\t\tresponsive\n\t\t);\n\n\tconst toggleResponsive = () => {\n\t\tconst { allowResponsive, className } = attributes;\n\t\tconst { html } = preview;\n\t\tconst newAllowResponsive = ! allowResponsive;\n\n\t\tsetAttributes( {\n\t\t\tallowResponsive: newAllowResponsive,\n\t\t\tclassName: getClassNames(\n\t\t\t\thtml,\n\t\t\t\tclassName,\n\t\t\t\tresponsive && newAllowResponsive\n\t\t\t),\n\t\t} );\n\t};\n\n\tuseEffect( () => {\n\t\tif ( ! preview?.html || ! cannotEmbed || fetching ) {\n\t\t\treturn;\n\t\t}\n\t\t// At this stage, we're not fetching the preview and know it can't be embedded,\n\t\t// so try removing any trailing slash, and resubmit.\n\t\tconst newURL = url.replace( /\\/$/, '' );\n\t\tsetIsEditingURL( false );\n\t\tsetAttributes( { url: newURL } );\n\t}, [ preview?.html, url, cannotEmbed, fetching ] );\n\n\t// Try a different provider in case the embed url is not supported.\n\tuseEffect( () => {\n\t\tif ( ! cannotEmbed || fetching || ! url ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Until X provider is supported in WordPress, as a workaround we use Twitter provider.\n\t\tif ( getAuthority( url ) === 'x.com' ) {\n\t\t\tconst newURL = new URL( url );\n\t\t\tnewURL.host = 'twitter.com';\n\t\t\tsetAttributes( { url: newURL.toString() } );\n\t\t}\n\t}, [ url, cannotEmbed, fetching, setAttributes ] );\n\n\t// Handle incoming preview.\n\tuseEffect( () => {\n\t\tif ( preview && ! isEditingURL ) {\n\t\t\t// When obtaining an incoming preview,\n\t\t\t// we set the attributes derived from the preview data.\n\t\t\tconst mergedAttributes = getMergedAttributes();\n\t\t\tsetAttributes( mergedAttributes );\n\n\t\t\tif ( onReplace ) {\n\t\t\t\tconst upgradedBlock = createUpgradedEmbedBlock(\n\t\t\t\t\tprops,\n\t\t\t\t\tmergedAttributes\n\t\t\t\t);\n\n\t\t\t\tif ( upgradedBlock ) {\n\t\t\t\t\tonReplace( upgradedBlock );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [ preview, isEditingURL ] );\n\n\tuseEffect(\n\t\t() => setShowEmbedBottomSheet( isEditingURL ),\n\t\t[ isEditingURL ]\n\t);\n\n\tconst onEditURL = useCallback(\n\t\t( value ) => {\n\t\t\t// If the embed URL was changed, we need to reset the aspect ratio class.\n\t\t\t// To do this we have to remove the existing ratio class so it can be recalculated.\n\t\t\tif ( attributes.url !== value ) {\n\t\t\t\tconst blockClass = removeAspectRatioClasses(\n\t\t\t\t\tattributes.className\n\t\t\t\t);\n\t\t\t\tsetAttributes( { className: blockClass } );\n\t\t\t}\n\n\t\t\t// The order of the following calls is important, we need to update the URL attribute before changing `isEditingURL`,\n\t\t\t// otherwise the side-effect that potentially replaces the block when updating the local state won't use the new URL\n\t\t\t// for creating the new block.\n\t\t\tsetAttributes( { url: value } );\n\t\t\tsetIsEditingURL( false );\n\t\t},\n\t\t[ attributes, setAttributes ]\n\t);\n\n\tconst blockProps = useBlockProps();\n\n\tif ( fetching ) {\n\t\treturn (\n\t\t\t<View { ...blockProps }>\n\t\t\t\t<EmbedLoading />\n\t\t\t</View>\n\t\t);\n\t}\n\n\tconst showEmbedPlaceholder = ! preview || cannotEmbed;\n\n\t// Even though we set attributes that get derived from the preview,\n\t// we don't access them directly because for the initial render,\n\t// the `setAttributes` call will not have taken effect. If we're\n\t// rendering responsive content, setting the responsive classes\n\t// after the preview has been rendered can result in unwanted\n\t// clipping or scrollbars. The `getAttributesFromPreview` function\n\t// that `getMergedAttributes` uses is memoized so that we're not\n\t// calculating them on every render.\n\tconst {\n\t\ttype,\n\t\tallowResponsive,\n\t\tclassName: classFromPreview,\n\t} = getMergedAttributes();\n\tconst className = classnames( classFromPreview, props.className );\n\n\tconst isProviderPreviewable =\n\t\tPREVIEWABLE_PROVIDERS.includes( providerNameSlug ) ||\n\t\t// For WordPress embeds, we enable the inline preview for all its providers\n\t\t// except the ones that are not supported yet.\n\t\t( WP_EMBED_TYPE === type &&\n\t\t\t! NOT_PREVIEWABLE_WP_EMBED_PROVIDERS.includes( providerNameSlug ) );\n\n\tconst linkLabel = WP_EMBED_TYPE === type ? 'WordPress' : title;\n\n\treturn (\n\t\t<>\n\t\t\t{ showEmbedPlaceholder ? (\n\t\t\t\t<>\n\t\t\t\t\t<View { ...blockProps }>\n\t\t\t\t\t\t<EmbedPlaceholder\n\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\tlabel={ title }\n\t\t\t\t\t\t\tonPress={ ( event ) => {\n\t\t\t\t\t\t\t\tonFocus( event );\n\t\t\t\t\t\t\t\tsetIsEditingURL( true );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tcannotEmbed={ cannotEmbed }\n\t\t\t\t\t\t\tfallback={ () => fallback( url, onReplace ) }\n\t\t\t\t\t\t\ttryAgain={ () => {\n\t\t\t\t\t\t\t\tinvalidateResolution( 'getEmbedPreview', [\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t] );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\topenEmbedLinkSettings={ () =>\n\t\t\t\t\t\t\t\tsetShowEmbedBottomSheet( true )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<EmbedControls\n\t\t\t\t\t\tthemeSupportsResponsive={ themeSupportsResponsive }\n\t\t\t\t\t\tblockSupportsResponsive={ responsive }\n\t\t\t\t\t\tallowResponsive={ allowResponsive }\n\t\t\t\t\t\ttoggleResponsive={ toggleResponsive }\n\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\tlinkLabel={ linkLabel }\n\t\t\t\t\t\tonEditURL={ onEditURL }\n\t\t\t\t\t/>\n\t\t\t\t\t<View { ...blockProps }>\n\t\t\t\t\t\t<EmbedPreview\n\t\t\t\t\t\t\talign={ align }\n\t\t\t\t\t\t\tclassName={ className }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\tinsertBlocksAfter={ insertBlocksAfter }\n\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\tlabel={ title }\n\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\tpreview={ preview }\n\t\t\t\t\t\t\tisProviderPreviewable={ isProviderPreviewable }\n\t\t\t\t\t\t\tpreviewable={ previewable }\n\t\t\t\t\t\t\ttype={ type }\n\t\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\t\tisDefaultEmbedInfo={ ! embedInfoByProvider }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t<EmbedLinkSettings\n\t\t\t\t// eslint-disable-next-line jsx-a11y/no-autofocus\n\t\t\t\tautoFocus\n\t\t\t\tvalue={ url }\n\t\t\t\tlabel={ linkLabel }\n\t\t\t\tisVisible={ showEmbedBottomSheet }\n\t\t\t\tonClose={ () => setShowEmbedBottomSheet( false ) }\n\t\t\t\tonSubmit={ onEditURL }\n\t\t\t\twithBottomSheet\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default EmbedEdit;\n"],"mappings":"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"}