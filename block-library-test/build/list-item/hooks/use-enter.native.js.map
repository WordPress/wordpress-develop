{"version":3,"names":["_blocks","require","_element","_data","_blockEditor","_useOutdentListItem","_interopRequireDefault","useEnter","props","preventDefault","replaceBlocks","selectionChange","useDispatch","blockEditorStore","getBlock","getBlockRootClientId","getBlockIndex","getBlockName","useSelect","propsRef","useRef","current","outdentListItem","useOutdentListItem","onEnter","content","clientId","length","topParentListBlock","blockIndex","head","cloneBlock","innerBlocks","slice","middle","createBlock","getDefaultBlockName","after","tail"],"sources":["@wordpress/block-library/src/list-item/hooks/use-enter.native.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tcreateBlock,\n\tgetDefaultBlockName,\n\tcloneBlock,\n} from '@wordpress/blocks';\nimport { useRef } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport useOutdentListItem from './use-outdent-list-item';\n\nexport default function useEnter( props, preventDefault ) {\n\tconst { replaceBlocks, selectionChange } = useDispatch( blockEditorStore );\n\tconst { getBlock, getBlockRootClientId, getBlockIndex, getBlockName } =\n\t\tuseSelect( blockEditorStore );\n\tconst propsRef = useRef( props );\n\tpropsRef.current = props;\n\tconst outdentListItem = useOutdentListItem();\n\n\treturn {\n\t\tonEnter() {\n\t\t\tconst { content, clientId } = propsRef.current;\n\t\t\tif ( content.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpreventDefault.current = true;\n\t\t\tif (\n\t\t\t\tgetBlockName(\n\t\t\t\t\tgetBlockRootClientId(\n\t\t\t\t\t\tgetBlockRootClientId( propsRef.current.clientId )\n\t\t\t\t\t)\n\t\t\t\t) === 'core/list-item'\n\t\t\t) {\n\t\t\t\toutdentListItem();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Here we are in top level list so we need to split.\n\t\t\tconst topParentListBlock = getBlock(\n\t\t\t\tgetBlockRootClientId( clientId )\n\t\t\t);\n\t\t\tconst blockIndex = getBlockIndex( clientId );\n\t\t\tconst head = cloneBlock( {\n\t\t\t\t...topParentListBlock,\n\t\t\t\tinnerBlocks: topParentListBlock.innerBlocks.slice(\n\t\t\t\t\t0,\n\t\t\t\t\tblockIndex\n\t\t\t\t),\n\t\t\t} );\n\t\t\tconst middle = createBlock( getDefaultBlockName() );\n\t\t\t// Last list item might contain a `list` block innerBlock\n\t\t\t// In that case append remaining innerBlocks blocks.\n\t\t\tconst after = [\n\t\t\t\t...( topParentListBlock.innerBlocks[ blockIndex ]\n\t\t\t\t\t.innerBlocks[ 0 ]?.innerBlocks || [] ),\n\t\t\t\t...topParentListBlock.innerBlocks.slice( blockIndex + 1 ),\n\t\t\t];\n\t\t\tconst tail = after.length\n\t\t\t\t? [\n\t\t\t\t\t\tcloneBlock( {\n\t\t\t\t\t\t\t...topParentListBlock,\n\t\t\t\t\t\t\tinnerBlocks: after,\n\t\t\t\t\t\t} ),\n\t\t\t\t  ]\n\t\t\t\t: [];\n\t\t\treplaceBlocks(\n\t\t\t\ttopParentListBlock.clientId,\n\t\t\t\t[ head, middle, ...tail ],\n\t\t\t\t1\n\t\t\t);\n\t\t\t// We manually change the selection here because we are replacing\n\t\t\t// a different block than the selected one.\n\t\t\tselectionChange( middle.clientId );\n\t\t},\n\t};\n}\n"],"mappings":";;;;;;;AAGA,IAAAA,OAAA,GAAAC,OAAA;AAKA,IAAAC,QAAA,GAAAD,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AACA,IAAAG,YAAA,GAAAH,OAAA;AAKA,IAAAI,mBAAA,GAAAC,sBAAA,CAAAL,OAAA;AAfA;AACA;AACA;;AAUA;AACA;AACA;;AAGe,SAASM,QAAQA,CAAEC,KAAK,EAAEC,cAAc,EAAG;EACzD,MAAM;IAAEC,aAAa;IAAEC;EAAgB,CAAC,GAAG,IAAAC,iBAAW,EAAEC,kBAAiB,CAAC;EAC1E,MAAM;IAAEC,QAAQ;IAAEC,oBAAoB;IAAEC,aAAa;IAAEC;EAAa,CAAC,GACpE,IAAAC,eAAS,EAAEL,kBAAiB,CAAC;EAC9B,MAAMM,QAAQ,GAAG,IAAAC,eAAM,EAAEZ,KAAM,CAAC;EAChCW,QAAQ,CAACE,OAAO,GAAGb,KAAK;EACxB,MAAMc,eAAe,GAAG,IAAAC,2BAAkB,EAAC,CAAC;EAE5C,OAAO;IACNC,OAAOA,CAAA,EAAG;MACT,MAAM;QAAEC,OAAO;QAAEC;MAAS,CAAC,GAAGP,QAAQ,CAACE,OAAO;MAC9C,IAAKI,OAAO,CAACE,MAAM,EAAG;QACrB;MACD;MACAlB,cAAc,CAACY,OAAO,GAAG,IAAI;MAC7B,IACCJ,YAAY,CACXF,oBAAoB,CACnBA,oBAAoB,CAAEI,QAAQ,CAACE,OAAO,CAACK,QAAS,CACjD,CACD,CAAC,KAAK,gBAAgB,EACrB;QACDJ,eAAe,CAAC,CAAC;QACjB;MACD;MACA;MACA,MAAMM,kBAAkB,GAAGd,QAAQ,CAClCC,oBAAoB,CAAEW,QAAS,CAChC,CAAC;MACD,MAAMG,UAAU,GAAGb,aAAa,CAAEU,QAAS,CAAC;MAC5C,MAAMI,IAAI,GAAG,IAAAC,kBAAU,EAAE;QACxB,GAAGH,kBAAkB;QACrBI,WAAW,EAAEJ,kBAAkB,CAACI,WAAW,CAACC,KAAK,CAChD,CAAC,EACDJ,UACD;MACD,CAAE,CAAC;MACH,MAAMK,MAAM,GAAG,IAAAC,mBAAW,EAAE,IAAAC,2BAAmB,EAAC,CAAE,CAAC;MACnD;MACA;MACA,MAAMC,KAAK,GAAG,CACb,IAAKT,kBAAkB,CAACI,WAAW,CAAEH,UAAU,CAAE,CAC/CG,WAAW,CAAE,CAAC,CAAE,EAAEA,WAAW,IAAI,EAAE,CAAE,EACvC,GAAGJ,kBAAkB,CAACI,WAAW,CAACC,KAAK,CAAEJ,UAAU,GAAG,CAAE,CAAC,CACzD;MACD,MAAMS,IAAI,GAAGD,KAAK,CAACV,MAAM,GACtB,CACA,IAAAI,kBAAU,EAAE;QACX,GAAGH,kBAAkB;QACrBI,WAAW,EAAEK;MACd,CAAE,CAAC,CACF,GACD,EAAE;MACL3B,aAAa,CACZkB,kBAAkB,CAACF,QAAQ,EAC3B,CAAEI,IAAI,EAAEI,MAAM,EAAE,GAAGI,IAAI,CAAE,EACzB,CACD,CAAC;MACD;MACA;MACA3B,eAAe,CAAEuB,MAAM,CAACR,QAAS,CAAC;IACnC;EACD,CAAC;AACF"}