{"version":3,"names":["_reactNative","require","_blockEditor","_i18n","_compose","_data","_element","_hooks","_utils","_edit","_style","_interopRequireDefault","_listStyleType","OPACITY","ListItemEdit","attributes","setAttributes","onReplace","clientId","style","mergeBlocks","contentWidth","setContentWidth","useState","placeholder","content","blockIndex","hasInnerBlocks","indentationLevel","numberOfListItems","ordered","reversed","start","useSelect","select","getBlockAttributes","getBlockCount","getBlockIndex","getBlockParentsByBlockName","getBlockRootClientId","blockEditorStore","currentIdentationLevel","length","currentBlockIndex","blockWithInnerBlocks","rootClientId","blockAttributes","totalListItems","isOrdered","isReversed","startValue","blockProps","useBlockProps","styles","innerBlocksProps","useInnerBlocksProps","renderAppender","defaultPlaceholderFromScheme","usePreferredColorSchemeStyle","currentTextColor","color","baseColors","text","defaultPlaceholderTextColor","defaultPlaceholderTextColorWithOpacity","styleWithPlaceholderOpacity","placeholderColor","preventDefault","useRef","onEnter","useEnter","onSplit","useSplit","onMerge","useMerge","onSplitList","useCallback","value","current","onReplaceList","blocks","args","convertToListItems","onLayout","nativeEvent","prevState","width","layout","Math","floor","_react","createElement","View","default","RichText","identifier","tagName","onChange","nextContent","__","placeholderTextColor","deleteEnter","containerWidth","BlockControls","group","IndentUI"],"sources":["@wordpress/block-library/src/list-item/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tRichText,\n\tuseBlockProps,\n\tuseInnerBlocksProps,\n\tBlockControls,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { useState, useCallback, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useSplit, useMerge, useEnter } from './hooks';\nimport { convertToListItems } from './utils';\nimport { IndentUI } from './edit.js';\nimport styles from './style.scss';\nimport ListStyleType from './list-style-type';\n\nconst OPACITY = '9e';\n\nexport default function ListItemEdit( {\n\tattributes,\n\tsetAttributes,\n\tonReplace,\n\tclientId,\n\tstyle,\n\tmergeBlocks,\n} ) {\n\tconst [ contentWidth, setContentWidth ] = useState();\n\tconst { placeholder, content } = attributes;\n\tconst {\n\t\tblockIndex,\n\t\thasInnerBlocks,\n\t\tindentationLevel,\n\t\tnumberOfListItems,\n\t\tordered,\n\t\treversed,\n\t\tstart,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tgetBlockCount,\n\t\t\t\tgetBlockIndex,\n\t\t\t\tgetBlockParentsByBlockName,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst currentIdentationLevel = getBlockParentsByBlockName(\n\t\t\t\tclientId,\n\t\t\t\t'core/list-item',\n\t\t\t\ttrue\n\t\t\t).length;\n\t\t\tconst currentBlockIndex = getBlockIndex( clientId );\n\t\t\tconst blockWithInnerBlocks = getBlockCount( clientId ) > 0;\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\t\t\tconst blockAttributes = getBlockAttributes( rootClientId );\n\t\t\tconst totalListItems = getBlockCount( rootClientId );\n\t\t\tconst {\n\t\t\t\tordered: isOrdered,\n\t\t\t\treversed: isReversed,\n\t\t\t\tstart: startValue,\n\t\t\t} = blockAttributes || {};\n\n\t\t\treturn {\n\t\t\t\tblockIndex: currentBlockIndex,\n\t\t\t\thasInnerBlocks: blockWithInnerBlocks,\n\t\t\t\tindentationLevel: currentIdentationLevel,\n\t\t\t\tnumberOfListItems: totalListItems,\n\t\t\t\tordered: isOrdered,\n\t\t\t\treversed: isReversed,\n\t\t\t\tstart: startValue,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst blockProps = useBlockProps( {\n\t\t...( hasInnerBlocks && styles[ 'wp-block-list-item__nested-blocks' ] ),\n\t} );\n\n\tconst innerBlocksProps = useInnerBlocksProps( blockProps, {\n\t\trenderAppender: false,\n\t} );\n\n\t// Set default placeholder text color from light/dark scheme or base colors\n\tconst defaultPlaceholderFromScheme = usePreferredColorSchemeStyle(\n\t\tstyles[ 'wp-block-list-item__list-item-placeholder' ],\n\t\tstyles[ 'wp-block-list-item__list-item-placeholder--dark' ]\n\t);\n\n\tconst currentTextColor = style?.color || style?.baseColors?.color?.text;\n\n\tconst defaultPlaceholderTextColor = currentTextColor\n\t\t? currentTextColor\n\t\t: defaultPlaceholderFromScheme?.color;\n\n\t// Add hex opacity to default placeholder text color and style object\n\tconst defaultPlaceholderTextColorWithOpacity =\n\t\tdefaultPlaceholderTextColor + OPACITY;\n\n\tconst styleWithPlaceholderOpacity = {\n\t\t...style,\n\t\t...( style?.color && {\n\t\t\tplaceholderColor: style.color + OPACITY,\n\t\t} ),\n\t};\n\n\tconst preventDefault = useRef( false );\n\tconst { onEnter } = useEnter( { content, clientId }, preventDefault );\n\tconst onSplit = useSplit( clientId );\n\tconst onMerge = useMerge( clientId, mergeBlocks );\n\tconst onSplitList = useCallback(\n\t\t( value ) => {\n\t\t\tif ( ! preventDefault.current ) {\n\t\t\t\treturn onSplit( value );\n\t\t\t}\n\t\t},\n\t\t[ clientId, onSplit ]\n\t);\n\tconst onReplaceList = useCallback(\n\t\t( blocks, ...args ) => {\n\t\t\tif ( ! preventDefault.current ) {\n\t\t\t\tonReplace( convertToListItems( blocks ), ...args );\n\t\t\t}\n\t\t},\n\t\t[ clientId, onReplace, convertToListItems ]\n\t);\n\tconst onLayout = useCallback( ( { nativeEvent } ) => {\n\t\tsetContentWidth( ( prevState ) => {\n\t\t\tconst { width } = nativeEvent.layout;\n\n\t\t\tif ( ! prevState || prevState.width !== width ) {\n\t\t\t\treturn Math.floor( width );\n\t\t\t}\n\t\t\treturn prevState;\n\t\t} );\n\t}, [] );\n\n\treturn (\n\t\t<View style={ styles[ 'wp-block-list-item__list-item-parent' ] }>\n\t\t\t<View style={ styles[ 'wp-block-list-item__list-item' ] }>\n\t\t\t\t<View style={ styles[ 'wp-block-list-item__list-item-icon' ] }>\n\t\t\t\t\t<ListStyleType\n\t\t\t\t\t\tblockIndex={ blockIndex }\n\t\t\t\t\t\tindentationLevel={ indentationLevel }\n\t\t\t\t\t\tnumberOfListItems={ numberOfListItems }\n\t\t\t\t\t\tordered={ ordered }\n\t\t\t\t\t\treversed={ reversed }\n\t\t\t\t\t\tstart={ start }\n\t\t\t\t\t\tstyle={ style }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t\t<View\n\t\t\t\t\tstyle={ styles[ 'wp-block-list-item__list-item-content' ] }\n\t\t\t\t\tonLayout={ onLayout }\n\t\t\t\t>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\tidentifier=\"content\"\n\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\tonChange={ ( nextContent ) =>\n\t\t\t\t\t\t\tsetAttributes( { content: nextContent } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue={ content }\n\t\t\t\t\t\tplaceholder={ placeholder || __( 'List' ) }\n\t\t\t\t\t\tplaceholderTextColor={\n\t\t\t\t\t\t\tdefaultPlaceholderTextColorWithOpacity\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonSplit={ onSplitList }\n\t\t\t\t\t\tonMerge={ onMerge }\n\t\t\t\t\t\tonReplace={ onReplaceList }\n\t\t\t\t\t\tonEnter={ onEnter }\n\t\t\t\t\t\tstyle={ styleWithPlaceholderOpacity }\n\t\t\t\t\t\tdeleteEnter={ true }\n\t\t\t\t\t\tcontainerWidth={ contentWidth }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</View>\n\t\t\t<View { ...innerBlocksProps }></View>\n\t\t\t<BlockControls group=\"block\">\n\t\t\t\t<IndentUI clientId={ clientId } />\n\t\t\t</BlockControls>\n\t\t</View>\n\t);\n}\n"],"mappings":";;;;;;;;AAGA,IAAAA,YAAA,GAAAC,OAAA;AAKA,IAAAC,YAAA,GAAAD,OAAA;AAOA,IAAAE,KAAA,GAAAF,OAAA;AACA,IAAAG,QAAA,GAAAH,OAAA;AACA,IAAAI,KAAA,GAAAJ,OAAA;AACA,IAAAK,QAAA,GAAAL,OAAA;AAKA,IAAAM,MAAA,GAAAN,OAAA;AACA,IAAAO,MAAA,GAAAP,OAAA;AACA,IAAAQ,KAAA,GAAAR,OAAA;AACA,IAAAS,MAAA,GAAAC,sBAAA,CAAAV,OAAA;AACA,IAAAW,cAAA,GAAAD,sBAAA,CAAAV,OAAA;AA3BA;AACA;AACA;;AAGA;AACA;AACA;;AAaA;AACA;AACA;;AAOA,MAAMY,OAAO,GAAG,IAAI;AAEL,SAASC,YAAYA,CAAE;EACrCC,UAAU;EACVC,aAAa;EACbC,SAAS;EACTC,QAAQ;EACRC,KAAK;EACLC;AACD,CAAC,EAAG;EACH,MAAM,CAAEC,YAAY,EAAEC,eAAe,CAAE,GAAG,IAAAC,iBAAQ,EAAC,CAAC;EACpD,MAAM;IAAEC,WAAW;IAAEC;EAAQ,CAAC,GAAGV,UAAU;EAC3C,MAAM;IACLW,UAAU;IACVC,cAAc;IACdC,gBAAgB;IAChBC,iBAAiB;IACjBC,OAAO;IACPC,QAAQ;IACRC;EACD,CAAC,GAAG,IAAAC,eAAS,EACVC,MAAM,IAAM;IACb,MAAM;MACLC,kBAAkB;MAClBC,aAAa;MACbC,aAAa;MACbC,0BAA0B;MAC1BC;IACD,CAAC,GAAGL,MAAM,CAAEM,kBAAiB,CAAC;IAC9B,MAAMC,sBAAsB,GAAGH,0BAA0B,CACxDpB,QAAQ,EACR,gBAAgB,EAChB,IACD,CAAC,CAACwB,MAAM;IACR,MAAMC,iBAAiB,GAAGN,aAAa,CAAEnB,QAAS,CAAC;IACnD,MAAM0B,oBAAoB,GAAGR,aAAa,CAAElB,QAAS,CAAC,GAAG,CAAC;IAC1D,MAAM2B,YAAY,GAAGN,oBAAoB,CAAErB,QAAS,CAAC;IACrD,MAAM4B,eAAe,GAAGX,kBAAkB,CAAEU,YAAa,CAAC;IAC1D,MAAME,cAAc,GAAGX,aAAa,CAAES,YAAa,CAAC;IACpD,MAAM;MACLf,OAAO,EAAEkB,SAAS;MAClBjB,QAAQ,EAAEkB,UAAU;MACpBjB,KAAK,EAAEkB;IACR,CAAC,GAAGJ,eAAe,IAAI,CAAC,CAAC;IAEzB,OAAO;MACNpB,UAAU,EAAEiB,iBAAiB;MAC7BhB,cAAc,EAAEiB,oBAAoB;MACpChB,gBAAgB,EAAEa,sBAAsB;MACxCZ,iBAAiB,EAAEkB,cAAc;MACjCjB,OAAO,EAAEkB,SAAS;MAClBjB,QAAQ,EAAEkB,UAAU;MACpBjB,KAAK,EAAEkB;IACR,CAAC;EACF,CAAC,EACD,CAAEhC,QAAQ,CACX,CAAC;EAED,MAAMiC,UAAU,GAAG,IAAAC,0BAAa,EAAE;IACjC,IAAKzB,cAAc,IAAI0B,cAAM,CAAE,mCAAmC,CAAE;EACrE,CAAE,CAAC;EAEH,MAAMC,gBAAgB,GAAG,IAAAC,gCAAmB,EAAEJ,UAAU,EAAE;IACzDK,cAAc,EAAE;EACjB,CAAE,CAAC;;EAEH;EACA,MAAMC,4BAA4B,GAAG,IAAAC,qCAA4B,EAChEL,cAAM,CAAE,2CAA2C,CAAE,EACrDA,cAAM,CAAE,iDAAiD,CAC1D,CAAC;EAED,MAAMM,gBAAgB,GAAGxC,KAAK,EAAEyC,KAAK,IAAIzC,KAAK,EAAE0C,UAAU,EAAED,KAAK,EAAEE,IAAI;EAEvE,MAAMC,2BAA2B,GAAGJ,gBAAgB,GACjDA,gBAAgB,GAChBF,4BAA4B,EAAEG,KAAK;;EAEtC;EACA,MAAMI,sCAAsC,GAC3CD,2BAA2B,GAAGlD,OAAO;EAEtC,MAAMoD,2BAA2B,GAAG;IACnC,GAAG9C,KAAK;IACR,IAAKA,KAAK,EAAEyC,KAAK,IAAI;MACpBM,gBAAgB,EAAE/C,KAAK,CAACyC,KAAK,GAAG/C;IACjC,CAAC;EACF,CAAC;EAED,MAAMsD,cAAc,GAAG,IAAAC,eAAM,EAAE,KAAM,CAAC;EACtC,MAAM;IAAEC;EAAQ,CAAC,GAAG,IAAAC,eAAQ,EAAE;IAAE7C,OAAO;IAAEP;EAAS,CAAC,EAAEiD,cAAe,CAAC;EACrE,MAAMI,OAAO,GAAG,IAAAC,eAAQ,EAAEtD,QAAS,CAAC;EACpC,MAAMuD,OAAO,GAAG,IAAAC,eAAQ,EAAExD,QAAQ,EAAEE,WAAY,CAAC;EACjD,MAAMuD,WAAW,GAAG,IAAAC,oBAAW,EAC5BC,KAAK,IAAM;IACZ,IAAK,CAAEV,cAAc,CAACW,OAAO,EAAG;MAC/B,OAAOP,OAAO,CAAEM,KAAM,CAAC;IACxB;EACD,CAAC,EACD,CAAE3D,QAAQ,EAAEqD,OAAO,CACpB,CAAC;EACD,MAAMQ,aAAa,GAAG,IAAAH,oBAAW,EAChC,CAAEI,MAAM,EAAE,GAAGC,IAAI,KAAM;IACtB,IAAK,CAAEd,cAAc,CAACW,OAAO,EAAG;MAC/B7D,SAAS,CAAE,IAAAiE,yBAAkB,EAAEF,MAAO,CAAC,EAAE,GAAGC,IAAK,CAAC;IACnD;EACD,CAAC,EACD,CAAE/D,QAAQ,EAAED,SAAS,EAAEiE,yBAAkB,CAC1C,CAAC;EACD,MAAMC,QAAQ,GAAG,IAAAP,oBAAW,EAAE,CAAE;IAAEQ;EAAY,CAAC,KAAM;IACpD9D,eAAe,CAAI+D,SAAS,IAAM;MACjC,MAAM;QAAEC;MAAM,CAAC,GAAGF,WAAW,CAACG,MAAM;MAEpC,IAAK,CAAEF,SAAS,IAAIA,SAAS,CAACC,KAAK,KAAKA,KAAK,EAAG;QAC/C,OAAOE,IAAI,CAACC,KAAK,CAAEH,KAAM,CAAC;MAC3B;MACA,OAAOD,SAAS;IACjB,CAAE,CAAC;EACJ,CAAC,EAAE,EAAG,CAAC;EAEP,OACC,IAAAK,MAAA,CAAAC,aAAA,EAAC3F,YAAA,CAAA4F,IAAI;IAACzE,KAAK,EAAGkC,cAAM,CAAE,sCAAsC;EAAI,GAC/D,IAAAqC,MAAA,CAAAC,aAAA,EAAC3F,YAAA,CAAA4F,IAAI;IAACzE,KAAK,EAAGkC,cAAM,CAAE,+BAA+B;EAAI,GACxD,IAAAqC,MAAA,CAAAC,aAAA,EAAC3F,YAAA,CAAA4F,IAAI;IAACzE,KAAK,EAAGkC,cAAM,CAAE,oCAAoC;EAAI,GAC7D,IAAAqC,MAAA,CAAAC,aAAA,EAAC/E,cAAA,CAAAiF,OAAa;IACbnE,UAAU,EAAGA,UAAY;IACzBE,gBAAgB,EAAGA,gBAAkB;IACrCC,iBAAiB,EAAGA,iBAAmB;IACvCC,OAAO,EAAGA,OAAS;IACnBC,QAAQ,EAAGA,QAAU;IACrBC,KAAK,EAAGA,KAAO;IACfb,KAAK,EAAGA;EAAO,CACf,CACI,CAAC,EACP,IAAAuE,MAAA,CAAAC,aAAA,EAAC3F,YAAA,CAAA4F,IAAI;IACJzE,KAAK,EAAGkC,cAAM,CAAE,uCAAuC,CAAI;IAC3D8B,QAAQ,EAAGA;EAAU,GAErB,IAAAO,MAAA,CAAAC,aAAA,EAACzF,YAAA,CAAA4F,QAAQ;IACRC,UAAU,EAAC,SAAS;IACpBC,OAAO,EAAC,GAAG;IACXC,QAAQ,EAAKC,WAAW,IACvBlF,aAAa,CAAE;MAAES,OAAO,EAAEyE;IAAY,CAAE,CACxC;IACDrB,KAAK,EAAGpD,OAAS;IACjBD,WAAW,EAAGA,WAAW,IAAI,IAAA2E,QAAE,EAAE,MAAO,CAAG;IAC3CC,oBAAoB,EACnBpC,sCACA;IACDO,OAAO,EAAGI,WAAa;IACvBF,OAAO,EAAGA,OAAS;IACnBxD,SAAS,EAAG8D,aAAe;IAC3BV,OAAO,EAAGA,OAAS;IACnBlD,KAAK,EAAG8C,2BAA6B;IACrCoC,WAAW,EAAG,IAAM;IACpBC,cAAc,EAAGjF;EAAc,CAC/B,CACI,CACD,CAAC,EACP,IAAAqE,MAAA,CAAAC,aAAA,EAAC3F,YAAA,CAAA4F,IAAI;IAAA,GAAMtC;EAAgB,CAAS,CAAC,EACrC,IAAAoC,MAAA,CAAAC,aAAA,EAACzF,YAAA,CAAAqG,aAAa;IAACC,KAAK,EAAC;EAAO,GAC3B,IAAAd,MAAA,CAAAC,aAAA,EAAClF,KAAA,CAAAgG,QAAQ;IAACvF,QAAQ,EAAGA;EAAU,CAAE,CACnB,CACV,CAAC;AAET"}