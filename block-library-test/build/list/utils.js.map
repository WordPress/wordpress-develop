{"version":3,"names":["_blocks","require","LIST_STYLES","A","a","I","i","createListBlockFromDOMElement","listElement","type","getAttribute","listAttributes","ordered","tagName","anchor","id","undefined","start","parseInt","reversed","hasAttribute","innerBlocks","Array","from","children","map","listItem","childNodes","filter","node","nodeType","TEXT_NODE","textContent","trim","length","reverse","nestedList","nodes","hasNestedList","createBlock","content","innerHTML","htmlNodes","outerHTML","childAttributes","join","childInnerBlocks","migrateToListV2","attributes","values","otherAttributes","list","document","createElement","setAttribute","listBlock","rawHandler","HTML","migrateTypeToInlineStyle"],"sources":["@wordpress/block-library/src/list/utils.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlock, rawHandler } from '@wordpress/blocks';\n\nconst LIST_STYLES = {\n\tA: 'upper-alpha',\n\ta: 'lower-alpha',\n\tI: 'upper-roman',\n\ti: 'lower-roman',\n};\n\nexport function createListBlockFromDOMElement( listElement ) {\n\tconst type = listElement.getAttribute( 'type' );\n\tconst listAttributes = {\n\t\tordered: 'OL' === listElement.tagName,\n\t\tanchor: listElement.id === '' ? undefined : listElement.id,\n\t\tstart: listElement.getAttribute( 'start' )\n\t\t\t? parseInt( listElement.getAttribute( 'start' ), 10 )\n\t\t\t: undefined,\n\t\treversed: listElement.hasAttribute( 'reversed' ) ? true : undefined,\n\t\ttype: type && LIST_STYLES[ type ] ? LIST_STYLES[ type ] : undefined,\n\t};\n\n\tconst innerBlocks = Array.from( listElement.children ).map(\n\t\t( listItem ) => {\n\t\t\tconst children = Array.from( listItem.childNodes ).filter(\n\t\t\t\t( node ) =>\n\t\t\t\t\tnode.nodeType !== node.TEXT_NODE ||\n\t\t\t\t\tnode.textContent.trim().length !== 0\n\t\t\t);\n\t\t\tchildren.reverse();\n\t\t\tconst [ nestedList, ...nodes ] = children;\n\n\t\t\tconst hasNestedList =\n\t\t\t\tnestedList?.tagName === 'UL' || nestedList?.tagName === 'OL';\n\t\t\tif ( ! hasNestedList ) {\n\t\t\t\treturn createBlock( 'core/list-item', {\n\t\t\t\t\tcontent: listItem.innerHTML,\n\t\t\t\t} );\n\t\t\t}\n\t\t\tconst htmlNodes = nodes.map( ( node ) => {\n\t\t\t\tif ( node.nodeType === node.TEXT_NODE ) {\n\t\t\t\t\treturn node.textContent;\n\t\t\t\t}\n\t\t\t\treturn node.outerHTML;\n\t\t\t} );\n\t\t\thtmlNodes.reverse();\n\t\t\tconst childAttributes = {\n\t\t\t\tcontent: htmlNodes.join( '' ).trim(),\n\t\t\t};\n\t\t\tconst childInnerBlocks = [\n\t\t\t\tcreateListBlockFromDOMElement( nestedList ),\n\t\t\t];\n\t\t\treturn createBlock(\n\t\t\t\t'core/list-item',\n\t\t\t\tchildAttributes,\n\t\t\t\tchildInnerBlocks\n\t\t\t);\n\t\t}\n\t);\n\n\treturn createBlock( 'core/list', listAttributes, innerBlocks );\n}\n\nexport function migrateToListV2( attributes ) {\n\tconst { values, start, reversed, ordered, type, ...otherAttributes } =\n\t\tattributes;\n\n\tconst list = document.createElement( ordered ? 'ol' : 'ul' );\n\tlist.innerHTML = values;\n\tif ( start ) {\n\t\tlist.setAttribute( 'start', start );\n\t}\n\tif ( reversed ) {\n\t\tlist.setAttribute( 'reversed', true );\n\t}\n\tif ( type ) {\n\t\tlist.setAttribute( 'type', type );\n\t}\n\n\tconst [ listBlock ] = rawHandler( { HTML: list.outerHTML } );\n\n\treturn [\n\t\t{ ...otherAttributes, ...listBlock.attributes },\n\t\tlistBlock.innerBlocks,\n\t];\n}\n\nexport function migrateTypeToInlineStyle( attributes ) {\n\tconst { type } = attributes;\n\n\tif ( type && LIST_STYLES[ type ] ) {\n\t\treturn {\n\t\t\t...attributes,\n\t\t\ttype: LIST_STYLES[ type ],\n\t\t};\n\t}\n\n\treturn attributes;\n}\n"],"mappings":"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"}