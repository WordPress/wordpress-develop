{"version":3,"names":["_blockEditor","require","_blocks","transforms","from","type","blocks","transform","value","citation","anchor","fontSize","style","createBlock","content","prefix","schema","blockquote","children","selector","node","handler","HTML","innerHTML","mode","isMultiBlock","isMatch","length","includes","name","some","__experimentalConvert","map","block","attributes","innerBlocks","to","every","join","RichText","isEmpty","ungroup","_default","exports","default"],"sources":["@wordpress/block-library/src/quote/transforms.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { RichText } from '@wordpress/block-editor';\nimport { createBlock } from '@wordpress/blocks';\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/pullquote' ],\n\t\t\ttransform: ( { value, citation, anchor, fontSize, style } ) => {\n\t\t\t\treturn createBlock(\n\t\t\t\t\t'core/quote',\n\t\t\t\t\t{\n\t\t\t\t\t\tcitation,\n\t\t\t\t\t\tanchor,\n\t\t\t\t\t\tfontSize,\n\t\t\t\t\t\tstyle,\n\t\t\t\t\t},\n\t\t\t\t\t[ createBlock( 'core/paragraph', { content: value } ) ]\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'prefix',\n\t\t\tprefix: '>',\n\t\t\ttransform: ( content ) =>\n\t\t\t\tcreateBlock( 'core/quote', {}, [\n\t\t\t\t\tcreateBlock( 'core/paragraph', { content } ),\n\t\t\t\t] ),\n\t\t},\n\t\t{\n\t\t\ttype: 'raw',\n\t\t\tschema: () => ( {\n\t\t\t\tblockquote: {\n\t\t\t\t\tchildren: '*',\n\t\t\t\t},\n\t\t\t} ),\n\t\t\tselector: 'blockquote',\n\t\t\ttransform: ( node, handler ) => {\n\t\t\t\treturn createBlock(\n\t\t\t\t\t'core/quote',\n\t\t\t\t\t// Don't try to parse any `cite` out of this content.\n\t\t\t\t\t// * There may be more than one cite.\n\t\t\t\t\t// * There may be more attribution text than just the cite.\n\t\t\t\t\t// * If the cite is nested in the quoted text, it's wrong to\n\t\t\t\t\t//   remove it.\n\t\t\t\t\t{},\n\t\t\t\t\thandler( {\n\t\t\t\t\t\tHTML: node.innerHTML,\n\t\t\t\t\t\tmode: 'BLOCKS',\n\t\t\t\t\t} )\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tisMultiBlock: true,\n\t\t\tblocks: [ '*' ],\n\t\t\tisMatch: ( {}, blocks ) => {\n\t\t\t\t// When a single block is selected make the tranformation\n\t\t\t\t// available only to specific blocks that make sense.\n\t\t\t\tif ( blocks.length === 1 ) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t'core/paragraph',\n\t\t\t\t\t\t'core/heading',\n\t\t\t\t\t\t'core/list',\n\t\t\t\t\t\t'core/pullquote',\n\t\t\t\t\t].includes( blocks[ 0 ].name );\n\t\t\t\t}\n\t\t\t\treturn ! blocks.some( ( { name } ) => name === 'core/quote' );\n\t\t\t},\n\t\t\t__experimentalConvert: ( blocks ) =>\n\t\t\t\tcreateBlock(\n\t\t\t\t\t'core/quote',\n\t\t\t\t\t{},\n\t\t\t\t\tblocks.map( ( block ) =>\n\t\t\t\t\t\tcreateBlock(\n\t\t\t\t\t\t\tblock.name,\n\t\t\t\t\t\t\tblock.attributes,\n\t\t\t\t\t\t\tblock.innerBlocks\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t},\n\t],\n\tto: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/pullquote' ],\n\t\t\tisMatch: ( {}, block ) => {\n\t\t\t\treturn block.innerBlocks.every(\n\t\t\t\t\t( { name } ) => name === 'core/paragraph'\n\t\t\t\t);\n\t\t\t},\n\t\t\ttransform: (\n\t\t\t\t{ citation, anchor, fontSize, style },\n\t\t\t\tinnerBlocks\n\t\t\t) => {\n\t\t\t\tconst value = innerBlocks\n\t\t\t\t\t.map( ( { attributes } ) => `${ attributes.content }` )\n\t\t\t\t\t.join( '<br>' );\n\t\t\t\treturn createBlock( 'core/pullquote', {\n\t\t\t\t\tvalue,\n\t\t\t\t\tcitation,\n\t\t\t\t\tanchor,\n\t\t\t\t\tfontSize,\n\t\t\t\t\tstyle,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/paragraph' ],\n\t\t\ttransform: ( { citation }, innerBlocks ) =>\n\t\t\t\tRichText.isEmpty( citation )\n\t\t\t\t\t? innerBlocks\n\t\t\t\t\t: [\n\t\t\t\t\t\t\t...innerBlocks,\n\t\t\t\t\t\t\tcreateBlock( 'core/paragraph', {\n\t\t\t\t\t\t\t\tcontent: citation,\n\t\t\t\t\t\t\t} ),\n\t\t\t\t\t  ],\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/group' ],\n\t\t\ttransform: ( { citation, anchor }, innerBlocks ) =>\n\t\t\t\tcreateBlock(\n\t\t\t\t\t'core/group',\n\t\t\t\t\t{ anchor },\n\t\t\t\t\tRichText.isEmpty( citation )\n\t\t\t\t\t\t? innerBlocks\n\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t...innerBlocks,\n\t\t\t\t\t\t\t\tcreateBlock( 'core/paragraph', {\n\t\t\t\t\t\t\t\t\tcontent: citation,\n\t\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t  ]\n\t\t\t\t),\n\t\t},\n\t],\n\tungroup: ( { citation }, innerBlocks ) =>\n\t\tRichText.isEmpty( citation )\n\t\t\t? innerBlocks\n\t\t\t: [\n\t\t\t\t\t...innerBlocks,\n\t\t\t\t\tcreateBlock( 'core/paragraph', {\n\t\t\t\t\t\tcontent: citation,\n\t\t\t\t\t} ),\n\t\t\t  ],\n};\n\nexport default transforms;\n"],"mappings":"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"}