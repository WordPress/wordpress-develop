{"version":3,"names":["_i18n","require","_element","_components","_blocks","_data","_blockEditor","_dom","MissingBlockWarning","attributes","convertToHTML","clientId","originalName","originalUndelimitedContent","hasContent","hasFreeformBlock","hasHTMLBlock","useSelect","select","canInsertBlockType","getBlockRootClientId","blockEditorStore","actions","messageHTML","convertToHtmlButton","_react","createElement","Button","key","onClick","variant","__","push","sprintf","useBlockProps","className","Warning","RawHTML","safeHTML","MissingEdit","withDispatch","dispatch","replaceBlock","createBlock","content","_default","exports","default"],"sources":["@wordpress/block-library/src/missing/edit.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { RawHTML } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport { createBlock } from '@wordpress/blocks';\nimport { withDispatch, useSelect } from '@wordpress/data';\nimport {\n\tWarning,\n\tuseBlockProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { safeHTML } from '@wordpress/dom';\n\nfunction MissingBlockWarning( { attributes, convertToHTML, clientId } ) {\n\tconst { originalName, originalUndelimitedContent } = attributes;\n\tconst hasContent = !! originalUndelimitedContent;\n\tconst { hasFreeformBlock, hasHTMLBlock } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { canInsertBlockType, getBlockRootClientId } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\treturn {\n\t\t\t\thasFreeformBlock: canInsertBlockType(\n\t\t\t\t\t'core/freeform',\n\t\t\t\t\tgetBlockRootClientId( clientId )\n\t\t\t\t),\n\t\t\t\thasHTMLBlock: canInsertBlockType(\n\t\t\t\t\t'core/html',\n\t\t\t\t\tgetBlockRootClientId( clientId )\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst actions = [];\n\tlet messageHTML;\n\n\tconst convertToHtmlButton = (\n\t\t<Button key=\"convert\" onClick={ convertToHTML } variant=\"primary\">\n\t\t\t{ __( 'Keep as HTML' ) }\n\t\t</Button>\n\t);\n\n\tif ( hasContent && ! hasFreeformBlock && ! originalName ) {\n\t\tif ( hasHTMLBlock ) {\n\t\t\tmessageHTML = __(\n\t\t\t\t'It appears you are trying to use the deprecated Classic block. You can leave this block intact, convert its content to a Custom HTML block, or remove it entirely. Alternatively, you can refresh the page to use the Classic block.'\n\t\t\t);\n\t\t\tactions.push( convertToHtmlButton );\n\t\t} else {\n\t\t\tmessageHTML = __(\n\t\t\t\t'It appears you are trying to use the deprecated Classic block. You can leave this block intact, or remove it entirely. Alternatively, you can refresh the page to use the Classic block.'\n\t\t\t);\n\t\t}\n\t} else if ( hasContent && hasHTMLBlock ) {\n\t\tmessageHTML = sprintf(\n\t\t\t/* translators: %s: block name */\n\t\t\t__(\n\t\t\t\t'Your site doesn’t include support for the \"%s\" block. You can leave this block intact, convert its content to a Custom HTML block, or remove it entirely.'\n\t\t\t),\n\t\t\toriginalName\n\t\t);\n\t\tactions.push( convertToHtmlButton );\n\t} else {\n\t\tmessageHTML = sprintf(\n\t\t\t/* translators: %s: block name */\n\t\t\t__(\n\t\t\t\t'Your site doesn’t include support for the \"%s\" block. You can leave this block intact or remove it entirely.'\n\t\t\t),\n\t\t\toriginalName\n\t\t);\n\t}\n\n\treturn (\n\t\t<div { ...useBlockProps( { className: 'has-warning' } ) }>\n\t\t\t<Warning actions={ actions }>{ messageHTML }</Warning>\n\t\t\t<RawHTML>{ safeHTML( originalUndelimitedContent ) }</RawHTML>\n\t\t</div>\n\t);\n}\n\nconst MissingEdit = withDispatch( ( dispatch, { clientId, attributes } ) => {\n\tconst { replaceBlock } = dispatch( blockEditorStore );\n\treturn {\n\t\tconvertToHTML() {\n\t\t\treplaceBlock(\n\t\t\t\tclientId,\n\t\t\t\tcreateBlock( 'core/html', {\n\t\t\t\t\tcontent: attributes.originalUndelimitedContent,\n\t\t\t\t} )\n\t\t\t);\n\t\t},\n\t};\n} )( MissingBlockWarning );\n\nexport default MissingEdit;\n"],"mappings":"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"}