{"version":3,"names":["_blockEditor","require","_components","_data","_i18n","_navigationMenuSelector","_interopRequireDefault","_lockUnlock","_deletedNavigationWarning","_useNavigationMenu","_leafMoreMenu","_updateAttributes","_linkUi","actionLabel","__","BLOCKS_WITH_LINK_UI_SUPPORT","PrivateListView","unlock","blockEditorPrivateApis","AdditionalBlockContent","block","insertedBlock","setInsertedBlock","updateBlockAttributes","useDispatch","blockEditorStore","supportsLinkControls","includes","name","blockWasJustInserted","clientId","showLinkControls","setInsertedBlockAttributes","_insertedBlockClientId","_updatedAttributes","_react","createElement","LinkUI","link","attributes","onClose","onChange","updatedValue","updateAttributes","onCancel","MainContent","currentMenuId","isLoading","isNavigationMenuMissing","onCreateNew","hasChildren","useSelect","select","getBlockCount","navigationMenu","useNavigationMenu","default","Spinner","description","sprintf","title","className","rootClientId","isExpanded","showAppender","blockSettingsMenu","LeafMoreMenu","additionalBlockContent","MenuInspectorControls","props","createNavigationMenuIsSuccess","createNavigationMenuIsError","onSelectClassicMenu","onSelectNavigationMenu","isManageMenusButtonDisabled","blockEditingMode","InspectorControls","group","PanelBody","__experimentalHStack","__experimentalHeading","level","_default","exports"],"sources":["@wordpress/block-library/src/navigation/edit/menu-inspector-controls.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tprivateApis as blockEditorPrivateApis,\n\tInspectorControls,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport {\n\tPanelBody,\n\t__experimentalHStack as HStack,\n\t__experimentalHeading as Heading,\n\tSpinner,\n} from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport NavigationMenuSelector from './navigation-menu-selector';\nimport { unlock } from '../../lock-unlock';\nimport DeletedNavigationWarning from './deleted-navigation-warning';\nimport useNavigationMenu from '../use-navigation-menu';\nimport LeafMoreMenu from './leaf-more-menu';\nimport { updateAttributes } from '../../navigation-link/update-attributes';\nimport { LinkUI } from '../../navigation-link/link-ui';\n\n/* translators: %s: The name of a menu. */\nconst actionLabel = __( \"Switch to '%s'\" );\nconst BLOCKS_WITH_LINK_UI_SUPPORT = [\n\t'core/navigation-link',\n\t'core/navigation-submenu',\n];\nconst { PrivateListView } = unlock( blockEditorPrivateApis );\n\nfunction AdditionalBlockContent( { block, insertedBlock, setInsertedBlock } ) {\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\n\tconst supportsLinkControls = BLOCKS_WITH_LINK_UI_SUPPORT?.includes(\n\t\tinsertedBlock?.name\n\t);\n\tconst blockWasJustInserted = insertedBlock?.clientId === block.clientId;\n\tconst showLinkControls = supportsLinkControls && blockWasJustInserted;\n\n\tif ( ! showLinkControls ) {\n\t\treturn null;\n\t}\n\n\tconst setInsertedBlockAttributes =\n\t\t( _insertedBlockClientId ) => ( _updatedAttributes ) => {\n\t\t\tif ( ! _insertedBlockClientId ) return;\n\t\t\tupdateBlockAttributes( _insertedBlockClientId, _updatedAttributes );\n\t\t};\n\n\treturn (\n\t\t<LinkUI\n\t\t\tclientId={ insertedBlock?.clientId }\n\t\t\tlink={ insertedBlock?.attributes }\n\t\t\tonClose={ () => {\n\t\t\t\tsetInsertedBlock( null );\n\t\t\t} }\n\t\t\tonChange={ ( updatedValue ) => {\n\t\t\t\tupdateAttributes(\n\t\t\t\t\tupdatedValue,\n\t\t\t\t\tsetInsertedBlockAttributes( insertedBlock?.clientId ),\n\t\t\t\t\tinsertedBlock?.attributes\n\t\t\t\t);\n\t\t\t\tsetInsertedBlock( null );\n\t\t\t} }\n\t\t\tonCancel={ () => {\n\t\t\t\tsetInsertedBlock( null );\n\t\t\t} }\n\t\t/>\n\t);\n}\n\nconst MainContent = ( {\n\tclientId,\n\tcurrentMenuId,\n\tisLoading,\n\tisNavigationMenuMissing,\n\tonCreateNew,\n} ) => {\n\tconst hasChildren = useSelect(\n\t\t( select ) => {\n\t\t\treturn !! select( blockEditorStore ).getBlockCount( clientId );\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst { navigationMenu } = useNavigationMenu( currentMenuId );\n\n\tif ( currentMenuId && isNavigationMenuMissing ) {\n\t\treturn <DeletedNavigationWarning onCreateNew={ onCreateNew } />;\n\t}\n\n\tif ( isLoading ) {\n\t\treturn <Spinner />;\n\t}\n\n\tconst description = navigationMenu\n\t\t? sprintf(\n\t\t\t\t/* translators: %s: The name of a menu. */\n\t\t\t\t__( 'Structure for navigation menu: %s' ),\n\t\t\t\tnavigationMenu?.title || __( 'Untitled menu' )\n\t\t  )\n\t\t: __(\n\t\t\t\t'You have not yet created any menus. Displaying a list of your Pages'\n\t\t  );\n\n\treturn (\n\t\t<div className=\"wp-block-navigation__menu-inspector-controls\">\n\t\t\t{ ! hasChildren && (\n\t\t\t\t<p className=\"wp-block-navigation__menu-inspector-controls__empty-message\">\n\t\t\t\t\t{ __( 'This navigation menu is empty.' ) }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t\t<PrivateListView\n\t\t\t\trootClientId={ clientId }\n\t\t\t\tisExpanded\n\t\t\t\tdescription={ description }\n\t\t\t\tshowAppender\n\t\t\t\tblockSettingsMenu={ LeafMoreMenu }\n\t\t\t\tadditionalBlockContent={ AdditionalBlockContent }\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nconst MenuInspectorControls = ( props ) => {\n\tconst {\n\t\tcreateNavigationMenuIsSuccess,\n\t\tcreateNavigationMenuIsError,\n\t\tcurrentMenuId = null,\n\t\tonCreateNew,\n\t\tonSelectClassicMenu,\n\t\tonSelectNavigationMenu,\n\t\tisManageMenusButtonDisabled,\n\t\tblockEditingMode,\n\t} = props;\n\n\treturn (\n\t\t<InspectorControls group=\"list\">\n\t\t\t<PanelBody title={ null }>\n\t\t\t\t<HStack className=\"wp-block-navigation-off-canvas-editor__header\">\n\t\t\t\t\t<Heading\n\t\t\t\t\t\tclassName=\"wp-block-navigation-off-canvas-editor__title\"\n\t\t\t\t\t\tlevel={ 2 }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Menu' ) }\n\t\t\t\t\t</Heading>\n\t\t\t\t\t{ blockEditingMode === 'default' && (\n\t\t\t\t\t\t<NavigationMenuSelector\n\t\t\t\t\t\t\tcurrentMenuId={ currentMenuId }\n\t\t\t\t\t\t\tonSelectClassicMenu={ onSelectClassicMenu }\n\t\t\t\t\t\t\tonSelectNavigationMenu={ onSelectNavigationMenu }\n\t\t\t\t\t\t\tonCreateNew={ onCreateNew }\n\t\t\t\t\t\t\tcreateNavigationMenuIsSuccess={\n\t\t\t\t\t\t\t\tcreateNavigationMenuIsSuccess\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcreateNavigationMenuIsError={\n\t\t\t\t\t\t\t\tcreateNavigationMenuIsError\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tactionLabel={ actionLabel }\n\t\t\t\t\t\t\tisManageMenusButtonDisabled={\n\t\t\t\t\t\t\t\tisManageMenusButtonDisabled\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</HStack>\n\t\t\t\t<MainContent { ...props } />\n\t\t\t</PanelBody>\n\t\t</InspectorControls>\n\t);\n};\n\nexport default MenuInspectorControls;\n"],"mappings":"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"}