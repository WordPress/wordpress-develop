{"version":3,"names":["_classnames","_interopRequireDefault","require","_components","_compose","_blockEditor","_htmlEntities","_i18n","_icons","_coreData","CategoriesEdit","attributes","displayAsDropdown","showHierarchy","showPostCounts","showOnlyTopLevel","showEmpty","setAttributes","className","selectId","useInstanceId","query","per_page","hide_empty","context","parent","records","categories","isResolving","useEntityRecords","getCategoriesList","parentId","length","filter","toggleAttribute","attributeName","newValue","renderCategoryName","name","__","decodeEntities","trim","renderCategoryList","categoriesList","map","category","renderCategoryListItem","childCategories","id","link","count","_react","createElement","key","href","target","rel","childCategory","renderCategoryDropdown","Fragment","VisuallyHidden","as","htmlFor","renderCategoryDropdownItem","level","Array","from","TagName","classes","classnames","blockProps","useBlockProps","InspectorControls","PanelBody","title","ToggleControl","__nextHasNoMarginBottom","label","checked","onChange","Placeholder","icon","pin","Spinner"],"sources":["@wordpress/block-library/src/categories/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tPanelBody,\n\tPlaceholder,\n\tSpinner,\n\tToggleControl,\n\tVisuallyHidden,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { InspectorControls, useBlockProps } from '@wordpress/block-editor';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __ } from '@wordpress/i18n';\nimport { pin } from '@wordpress/icons';\nimport { useEntityRecords } from '@wordpress/core-data';\n\nexport default function CategoriesEdit( {\n\tattributes: {\n\t\tdisplayAsDropdown,\n\t\tshowHierarchy,\n\t\tshowPostCounts,\n\t\tshowOnlyTopLevel,\n\t\tshowEmpty,\n\t},\n\tsetAttributes,\n\tclassName,\n} ) {\n\tconst selectId = useInstanceId( CategoriesEdit, 'blocks-category-select' );\n\tconst query = { per_page: -1, hide_empty: ! showEmpty, context: 'view' };\n\tif ( showOnlyTopLevel ) {\n\t\tquery.parent = 0;\n\t}\n\n\tconst { records: categories, isResolving } = useEntityRecords(\n\t\t'taxonomy',\n\t\t'category',\n\t\tquery\n\t);\n\n\tconst getCategoriesList = ( parentId ) => {\n\t\tif ( ! categories?.length ) {\n\t\t\treturn [];\n\t\t}\n\t\tif ( parentId === null ) {\n\t\t\treturn categories;\n\t\t}\n\t\treturn categories.filter( ( { parent } ) => parent === parentId );\n\t};\n\n\tconst toggleAttribute = ( attributeName ) => ( newValue ) =>\n\t\tsetAttributes( { [ attributeName ]: newValue } );\n\n\tconst renderCategoryName = ( name ) =>\n\t\t! name ? __( '(Untitled)' ) : decodeEntities( name ).trim();\n\n\tconst renderCategoryList = () => {\n\t\tconst parentId = showHierarchy ? 0 : null;\n\t\tconst categoriesList = getCategoriesList( parentId );\n\t\treturn categoriesList.map( ( category ) =>\n\t\t\trenderCategoryListItem( category )\n\t\t);\n\t};\n\n\tconst renderCategoryListItem = ( category ) => {\n\t\tconst childCategories = getCategoriesList( category.id );\n\t\tconst { id, link, count, name } = category;\n\t\treturn (\n\t\t\t<li key={ id } className={ `cat-item cat-item-${ id }` }>\n\t\t\t\t<a href={ link } target=\"_blank\" rel=\"noreferrer noopener\">\n\t\t\t\t\t{ renderCategoryName( name ) }\n\t\t\t\t</a>\n\t\t\t\t{ showPostCounts && ` (${ count })` }\n\t\t\t\t{ showHierarchy && !! childCategories.length && (\n\t\t\t\t\t<ul className=\"children\">\n\t\t\t\t\t\t{ childCategories.map( ( childCategory ) =>\n\t\t\t\t\t\t\trenderCategoryListItem( childCategory )\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ul>\n\t\t\t\t) }\n\t\t\t</li>\n\t\t);\n\t};\n\n\tconst renderCategoryDropdown = () => {\n\t\tconst parentId = showHierarchy ? 0 : null;\n\t\tconst categoriesList = getCategoriesList( parentId );\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<VisuallyHidden as=\"label\" htmlFor={ selectId }>\n\t\t\t\t\t{ __( 'Categories' ) }\n\t\t\t\t</VisuallyHidden>\n\t\t\t\t<select id={ selectId }>\n\t\t\t\t\t<option>{ __( 'Select Category' ) }</option>\n\t\t\t\t\t{ categoriesList.map( ( category ) =>\n\t\t\t\t\t\trenderCategoryDropdownItem( category, 0 )\n\t\t\t\t\t) }\n\t\t\t\t</select>\n\t\t\t</>\n\t\t);\n\t};\n\n\tconst renderCategoryDropdownItem = ( category, level ) => {\n\t\tconst { id, count, name } = category;\n\t\tconst childCategories = getCategoriesList( id );\n\t\treturn [\n\t\t\t<option key={ id } className={ `level-${ level }` }>\n\t\t\t\t{ Array.from( { length: level * 3 } ).map( () => '\\xa0' ) }\n\t\t\t\t{ renderCategoryName( name ) }\n\t\t\t\t{ showPostCounts && ` (${ count })` }\n\t\t\t</option>,\n\t\t\tshowHierarchy &&\n\t\t\t\t!! childCategories.length &&\n\t\t\t\tchildCategories.map( ( childCategory ) =>\n\t\t\t\t\trenderCategoryDropdownItem( childCategory, level + 1 )\n\t\t\t\t),\n\t\t];\n\t};\n\n\tconst TagName =\n\t\t!! categories?.length && ! displayAsDropdown && ! isResolving\n\t\t\t? 'ul'\n\t\t\t: 'div';\n\n\tconst classes = classnames( className, {\n\t\t'wp-block-categories-list':\n\t\t\t!! categories?.length && ! displayAsDropdown && ! isResolving,\n\t\t'wp-block-categories-dropdown':\n\t\t\t!! categories?.length && displayAsDropdown && ! isResolving,\n\t} );\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: classes,\n\t} );\n\n\treturn (\n\t\t<TagName { ...blockProps }>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Display as dropdown' ) }\n\t\t\t\t\t\tchecked={ displayAsDropdown }\n\t\t\t\t\t\tonChange={ toggleAttribute( 'displayAsDropdown' ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Show post counts' ) }\n\t\t\t\t\t\tchecked={ showPostCounts }\n\t\t\t\t\t\tonChange={ toggleAttribute( 'showPostCounts' ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Show only top level categories' ) }\n\t\t\t\t\t\tchecked={ showOnlyTopLevel }\n\t\t\t\t\t\tonChange={ toggleAttribute( 'showOnlyTopLevel' ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Show empty categories' ) }\n\t\t\t\t\t\tchecked={ showEmpty }\n\t\t\t\t\t\tonChange={ toggleAttribute( 'showEmpty' ) }\n\t\t\t\t\t/>\n\t\t\t\t\t{ ! showOnlyTopLevel && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\tlabel={ __( 'Show hierarchy' ) }\n\t\t\t\t\t\t\tchecked={ showHierarchy }\n\t\t\t\t\t\t\tonChange={ toggleAttribute( 'showHierarchy' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t{ isResolving && (\n\t\t\t\t<Placeholder icon={ pin } label={ __( 'Categories' ) }>\n\t\t\t\t\t<Spinner />\n\t\t\t\t</Placeholder>\n\t\t\t) }\n\t\t\t{ ! isResolving && categories?.length === 0 && (\n\t\t\t\t<p>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Your site does not have any posts, so there is nothing to display here at the moment.'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t\t{ ! isResolving &&\n\t\t\t\tcategories?.length > 0 &&\n\t\t\t\t( displayAsDropdown\n\t\t\t\t\t? renderCategoryDropdown()\n\t\t\t\t\t: renderCategoryList() ) }\n\t\t</TagName>\n\t);\n}\n"],"mappings":"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"}