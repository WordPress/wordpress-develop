{"version":3,"names":["_reactNative","require","_clipboard","_interopRequireDefault","_reactNativeBridge","_blockEditor","_components","_icons","_element","_i18n","_compose","_data","_url","_coreData","_style","URL_COPIED_NOTIFICATION_DURATION_MS","MIN_WIDTH","FileEdit","Component","constructor","props","state","isUploadInProgress","isSidebarLinkSettings","placeholderTextWidth","maxWidth","timerRef","onLayout","bind","onSelectFile","onChangeFileName","onChangeDownloadButtonText","updateMediaProgress","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","getFileComponent","onChangeDownloadButtonVisibility","onCopyURL","onChangeOpenInNewWindow","onChangeLinkDestinationOption","onShowLinkSettings","onFilePressed","mediaUploadStateReset","componentDidMount","attributes","setAttributes","downloadButtonText","RichText","isEmpty","_x","id","url","getProtocol","mediaUploadSync","componentWillUnmount","clearTimeout","componentDidUpdate","prevProps","isSidebarOpened","setState","media","href","fileName","title","textLinkHref","showDownloadButton","newHref","isUrlCopied","Clipboard","setString","setTimeout","newValue","textLinkTarget","payload","mediaUrl","mediaServerId","mediaId","openSidebar","getToolbarEditButton","open","_react","createElement","BlockControls","ToolbarGroup","ToolbarButton","__","icon","replace","onClick","link","getInspectorControls","isUploadFailed","linkDestinationOptions","value","label","attachmentPage","actionButtonStyle","getStylesFromColorScheme","styles","actionButton","actionButtonDark","isCopyUrlDisabled","dimmedActionButtonStyle","dimmedActionButton","dimmedActionButtonDark","finalButtonStyle","InspectorControls","PanelBody","SelectControl","onChange","options","hideCancelButton","ToggleControl","external","checked","button","TextControl","disabled","labelStyle","onPress","getStyleForAlignment","align","getFlexAlign","alignment","alignSelf","getTextAlignmentForAlignment","requestImageUploadCancelDialog","requestImageFailedRetryDialog","nativeEvent","width","layout","paddingLeft","paddingRight","defaultButton","getPlaceholderWidth","placeholderText","Text","style","placeholder","onTextLayout","textWidth","lines","Math","min","openMediaOptions","getMediaOptions","isSelected","isButtonFocused","minWidth","MediaUploadProgress","onUpdateMediaProgress","onFinishMediaUploadWithSuccess","onFinishMediaUploadWithFailure","onMediaUploadStateReset","renderContent","dimmedStyle","disabledButton","errorIconStyle","Object","assign","errorIcon","uploadFailed","TouchableWithoutFeedback","accessible","View","testID","container","withoutInteractiveFormatting","__unstableMobileNoFocusOnMount","tagName","underlineColorAndroid","deleteEnter","textAlign","errorContainer","Icon","warning","PlainText","editable","buttonText","unstableOnFocus","onBlur","selectionColor","color","placeholderTextColor","render","wasBlockJustInserted","MediaPlaceholder","BlockIcon","labels","instructions","onSelect","onFocus","allowedTypes","MEDIA_TYPE_ANY","autoOpenMediaUpload","MediaUpload","isReplacingMedia","exports","_default","default","compose","withSelect","select","clientId","isEditorSidebarOpened","isNotFileHref","coreStore","getMedia","undefined","blockEditorStore","withDispatch","dispatch","openGeneralSidebar","withPreferredColorScheme"],"sources":["@wordpress/block-library/src/file/edit.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, TouchableWithoutFeedback, Text } from 'react-native';\nimport Clipboard from '@react-native-clipboard/clipboard';\n\n/**\n * WordPress dependencies\n */\nimport {\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n\tmediaUploadSync,\n} from '@wordpress/react-native-bridge';\nimport {\n\tBlockIcon,\n\tMediaPlaceholder,\n\tMediaUploadProgress,\n\tRichText,\n\tPlainText,\n\tBlockControls,\n\tMediaUpload,\n\tInspectorControls,\n\tMEDIA_TYPE_ANY,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport {\n\tToolbarButton,\n\tToolbarGroup,\n\tPanelBody,\n\tToggleControl,\n\tTextControl,\n\tSelectControl,\n\tIcon,\n} from '@wordpress/components';\nimport {\n\tfile as icon,\n\treplace,\n\tbutton,\n\texternal,\n\tlink,\n\twarning,\n} from '@wordpress/icons';\nimport { Component } from '@wordpress/element';\nimport { __, _x } from '@wordpress/i18n';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { getProtocol } from '@wordpress/url';\nimport { store as coreStore } from '@wordpress/core-data';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nconst URL_COPIED_NOTIFICATION_DURATION_MS = 1500;\nconst MIN_WIDTH = 40;\n\nexport class FileEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisUploadInProgress: false,\n\t\t\tisSidebarLinkSettings: false,\n\t\t\tplaceholderTextWidth: 0,\n\t\t\tmaxWidth: 0,\n\t\t};\n\n\t\tthis.timerRef = null;\n\n\t\tthis.onLayout = this.onLayout.bind( this );\n\t\tthis.onSelectFile = this.onSelectFile.bind( this );\n\t\tthis.onChangeFileName = this.onChangeFileName.bind( this );\n\t\tthis.onChangeDownloadButtonText =\n\t\t\tthis.onChangeDownloadButtonText.bind( this );\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\n\t\tthis.finishMediaUploadWithSuccess =\n\t\t\tthis.finishMediaUploadWithSuccess.bind( this );\n\t\tthis.finishMediaUploadWithFailure =\n\t\t\tthis.finishMediaUploadWithFailure.bind( this );\n\t\tthis.getFileComponent = this.getFileComponent.bind( this );\n\t\tthis.onChangeDownloadButtonVisibility =\n\t\t\tthis.onChangeDownloadButtonVisibility.bind( this );\n\t\tthis.onCopyURL = this.onCopyURL.bind( this );\n\t\tthis.onChangeOpenInNewWindow =\n\t\t\tthis.onChangeOpenInNewWindow.bind( this );\n\n\t\tthis.onChangeLinkDestinationOption =\n\t\t\tthis.onChangeLinkDestinationOption.bind( this );\n\t\tthis.onShowLinkSettings = this.onShowLinkSettings.bind( this );\n\t\tthis.onFilePressed = this.onFilePressed.bind( this );\n\t\tthis.mediaUploadStateReset = this.mediaUploadStateReset.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { attributes, setAttributes } = this.props;\n\t\tconst { downloadButtonText } = attributes;\n\n\t\tif ( RichText.isEmpty( downloadButtonText ) ) {\n\t\t\tsetAttributes( {\n\t\t\t\tdownloadButtonText: _x( 'Download', 'button label' ),\n\t\t\t} );\n\t\t}\n\n\t\tif (\n\t\t\tattributes.id &&\n\t\t\tattributes.url &&\n\t\t\tgetProtocol( attributes.url ) === 'file:'\n\t\t) {\n\t\t\tmediaUploadSync();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout( this.timerRef );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tprevProps.isSidebarOpened &&\n\t\t\t! this.props.isSidebarOpened &&\n\t\t\tthis.state.isSidebarLinkSettings\n\t\t) {\n\t\t\tthis.setState( { isSidebarLinkSettings: false } );\n\t\t}\n\t}\n\n\tonSelectFile( media ) {\n\t\tthis.props.setAttributes( {\n\t\t\thref: media.url,\n\t\t\tfileName: media.title,\n\t\t\ttextLinkHref: media.url,\n\t\t\tid: media.id,\n\t\t} );\n\t}\n\n\tonChangeFileName( fileName ) {\n\t\tthis.props.setAttributes( { fileName } );\n\t}\n\n\tonChangeDownloadButtonText( downloadButtonText ) {\n\t\tthis.props.setAttributes( { downloadButtonText } );\n\t}\n\n\tonChangeDownloadButtonVisibility( showDownloadButton ) {\n\t\tthis.props.setAttributes( { showDownloadButton } );\n\t}\n\n\tonChangeLinkDestinationOption( newHref ) {\n\t\t// Choose Media File or Attachment Page (when file is in Media Library)\n\t\tthis.props.setAttributes( { textLinkHref: newHref } );\n\t}\n\n\tonCopyURL() {\n\t\tif ( this.state.isUrlCopied ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { href } = this.props.attributes;\n\t\tClipboard.setString( href );\n\n\t\tthis.setState( { isUrlCopied: true } );\n\t\tthis.timerRef = setTimeout( () => {\n\t\t\tthis.setState( { isUrlCopied: false } );\n\t\t}, URL_COPIED_NOTIFICATION_DURATION_MS );\n\t}\n\n\tonChangeOpenInNewWindow( newValue ) {\n\t\tthis.props.setAttributes( {\n\t\t\ttextLinkTarget: newValue ? '_blank' : false,\n\t\t} );\n\t}\n\n\tupdateMediaProgress( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tif ( payload.mediaUrl ) {\n\t\t\tsetAttributes( { url: payload.mediaUrl } );\n\t\t}\n\t\tif ( ! this.state.isUploadInProgress ) {\n\t\t\tthis.setState( { isUploadInProgress: true } );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\thref: payload.mediaUrl,\n\t\t\tid: payload.mediaServerId,\n\t\t\ttextLinkHref: payload.mediaUrl,\n\t\t} );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tfinishMediaUploadWithFailure( payload ) {\n\t\tthis.props.setAttributes( { id: payload.mediaId } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tmediaUploadStateReset() {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\tid: null,\n\t\t\thref: null,\n\t\t\ttextLinkHref: null,\n\t\t\tfileName: null,\n\t\t} );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tonShowLinkSettings() {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tisSidebarLinkSettings: true,\n\t\t\t},\n\t\t\tthis.props.openSidebar\n\t\t);\n\t}\n\n\tgetToolbarEditButton( open ) {\n\t\treturn (\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ttitle={ __( 'Edit file' ) }\n\t\t\t\t\t\ticon={ replace }\n\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ttitle={ __( 'Link To' ) }\n\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\tonClick={ this.onShowLinkSettings }\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t);\n\t}\n\n\tgetInspectorControls(\n\t\t{ showDownloadButton, textLinkTarget, href, textLinkHref },\n\t\tmedia,\n\t\tisUploadInProgress,\n\t\tisUploadFailed\n\t) {\n\t\tlet linkDestinationOptions = [ { value: href, label: __( 'URL' ) } ];\n\t\tconst attachmentPage = media && media.link;\n\t\tconst { isSidebarLinkSettings } = this.state;\n\n\t\tif ( attachmentPage ) {\n\t\t\tlinkDestinationOptions = [\n\t\t\t\t{ value: href, label: __( 'Media file' ) },\n\t\t\t\t{ value: attachmentPage, label: __( 'Attachment page' ) },\n\t\t\t];\n\t\t}\n\n\t\tconst actionButtonStyle = this.props.getStylesFromColorScheme(\n\t\t\tstyles.actionButton,\n\t\t\tstyles.actionButtonDark\n\t\t);\n\n\t\tconst isCopyUrlDisabled = isUploadFailed || isUploadInProgress;\n\n\t\tconst dimmedActionButtonStyle = this.props.getStylesFromColorScheme(\n\t\t\tstyles.dimmedActionButton,\n\t\t\tstyles.dimmedActionButtonDark\n\t\t);\n\n\t\tconst finalButtonStyle = isCopyUrlDisabled\n\t\t\t? dimmedActionButtonStyle\n\t\t\t: actionButtonStyle;\n\n\t\treturn (\n\t\t\t<InspectorControls>\n\t\t\t\t{ isSidebarLinkSettings || (\n\t\t\t\t\t<PanelBody title={ __( 'File block settings' ) } />\n\t\t\t\t) }\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\tlabel={ __( 'Link to' ) }\n\t\t\t\t\t\tvalue={ textLinkHref }\n\t\t\t\t\t\tonChange={ this.onChangeLinkDestinationOption }\n\t\t\t\t\t\toptions={ linkDestinationOptions }\n\t\t\t\t\t\thideCancelButton={ true }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\ticon={ external }\n\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\tchecked={ textLinkTarget === '_blank' }\n\t\t\t\t\t\tonChange={ this.onChangeOpenInNewWindow }\n\t\t\t\t\t/>\n\t\t\t\t\t{ ! isSidebarLinkSettings && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\ticon={ button }\n\t\t\t\t\t\t\tlabel={ __( 'Show download button' ) }\n\t\t\t\t\t\t\tchecked={ showDownloadButton }\n\t\t\t\t\t\t\tonChange={ this.onChangeDownloadButtonVisibility }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tdisabled={ isCopyUrlDisabled }\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\tthis.state.isUrlCopied\n\t\t\t\t\t\t\t\t? __( 'Copied!' )\n\t\t\t\t\t\t\t\t: __( 'Copy file URL' )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlabelStyle={\n\t\t\t\t\t\t\tthis.state.isUrlCopied || finalButtonStyle\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonPress={ this.onCopyURL }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t);\n\t}\n\n\tgetStyleForAlignment( align ) {\n\t\tconst getFlexAlign = ( alignment ) => {\n\t\t\tswitch ( alignment ) {\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn 'flex-end';\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn 'center';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'flex-start';\n\t\t\t}\n\t\t};\n\t\treturn { alignSelf: getFlexAlign( align ) };\n\t}\n\n\tgetTextAlignmentForAlignment( align ) {\n\t\tswitch ( align ) {\n\t\t\tcase 'right':\n\t\t\t\treturn 'right';\n\t\t\tcase 'center':\n\t\t\t\treturn 'center';\n\t\t\tdefault:\n\t\t\t\treturn 'left';\n\t\t}\n\t}\n\n\tonFilePressed() {\n\t\tconst { attributes } = this.props;\n\n\t\tif ( this.state.isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( attributes.id );\n\t\t} else if (\n\t\t\tattributes.id &&\n\t\t\tgetProtocol( attributes.href ) === 'file:'\n\t\t) {\n\t\t\trequestImageFailedRetryDialog( attributes.id );\n\t\t}\n\t}\n\n\tonLayout( { nativeEvent } ) {\n\t\tconst { width } = nativeEvent.layout;\n\t\tconst { paddingLeft, paddingRight } = styles.defaultButton;\n\t\tthis.setState( {\n\t\t\tmaxWidth: width - ( paddingLeft + paddingRight ),\n\t\t} );\n\t}\n\n\t// Render `Text` with `placeholderText` styled as a placeholder\n\t// to calculate its width which then is set as a `minWidth`\n\t// This should be fixed on RNAztec level. In the mean time,\n\t// We use the same strategy implemented in Button block.\n\tgetPlaceholderWidth( placeholderText ) {\n\t\tconst { maxWidth, placeholderTextWidth } = this.state;\n\t\treturn (\n\t\t\t<Text\n\t\t\t\tstyle={ styles.placeholder }\n\t\t\t\tonTextLayout={ ( { nativeEvent } ) => {\n\t\t\t\t\tconst textWidth =\n\t\t\t\t\t\tnativeEvent.lines[ 0 ] && nativeEvent.lines[ 0 ].width;\n\t\t\t\t\tif ( textWidth && textWidth !== placeholderTextWidth ) {\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tplaceholderTextWidth: Math.min(\n\t\t\t\t\t\t\t\ttextWidth,\n\t\t\t\t\t\t\t\tmaxWidth\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ placeholderText }\n\t\t\t</Text>\n\t\t);\n\t}\n\n\tgetFileComponent( openMediaOptions, getMediaOptions ) {\n\t\tconst { attributes, media, isSelected } = this.props;\n\t\tconst { isButtonFocused, placeholderTextWidth } = this.state;\n\n\t\tconst { fileName, downloadButtonText, id, showDownloadButton, align } =\n\t\t\tattributes;\n\n\t\tconst minWidth =\n\t\t\tisButtonFocused ||\n\t\t\t( ! isButtonFocused &&\n\t\t\t\tdownloadButtonText &&\n\t\t\t\tdownloadButtonText !== '' )\n\t\t\t\t? MIN_WIDTH\n\t\t\t\t: placeholderTextWidth;\n\n\t\tconst placeholderText =\n\t\t\tisButtonFocused ||\n\t\t\t( ! isButtonFocused &&\n\t\t\t\tdownloadButtonText &&\n\t\t\t\tdownloadButtonText !== '' )\n\t\t\t\t? ''\n\t\t\t\t: __( 'Add textâ€¦' );\n\n\t\treturn (\n\t\t\t<MediaUploadProgress\n\t\t\t\tmediaId={ id }\n\t\t\t\tonUpdateMediaProgress={ this.updateMediaProgress }\n\t\t\t\tonFinishMediaUploadWithSuccess={\n\t\t\t\t\tthis.finishMediaUploadWithSuccess\n\t\t\t\t}\n\t\t\t\tonFinishMediaUploadWithFailure={\n\t\t\t\t\tthis.finishMediaUploadWithFailure\n\t\t\t\t}\n\t\t\t\tonMediaUploadStateReset={ this.mediaUploadStateReset }\n\t\t\t\trenderContent={ ( { isUploadInProgress, isUploadFailed } ) => {\n\t\t\t\t\tconst dimmedStyle =\n\t\t\t\t\t\t( this.state.isUploadInProgress || isUploadFailed ) &&\n\t\t\t\t\t\tstyles.disabledButton;\n\t\t\t\t\tconst finalButtonStyle = [\n\t\t\t\t\t\tstyles.defaultButton,\n\t\t\t\t\t\tdimmedStyle,\n\t\t\t\t\t];\n\n\t\t\t\t\tconst errorIconStyle = Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tstyles.errorIcon,\n\t\t\t\t\t\tstyles.uploadFailed\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\t\t\taccessible={ ! isSelected }\n\t\t\t\t\t\t\tonPress={ this.onFilePressed }\n\t\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\tonLayout={ this.onLayout }\n\t\t\t\t\t\t\t\ttestID=\"file-edit-container\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ this.getPlaceholderWidth( placeholderText ) }\n\t\t\t\t\t\t\t\t{ isUploadInProgress ||\n\t\t\t\t\t\t\t\t\tthis.getToolbarEditButton(\n\t\t\t\t\t\t\t\t\t\topenMediaOptions\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ getMediaOptions() }\n\t\t\t\t\t\t\t\t{ isSelected &&\n\t\t\t\t\t\t\t\t\tthis.getInspectorControls(\n\t\t\t\t\t\t\t\t\t\tattributes,\n\t\t\t\t\t\t\t\t\t\tmedia,\n\t\t\t\t\t\t\t\t\t\tisUploadInProgress,\n\t\t\t\t\t\t\t\t\t\tisUploadFailed\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<View style={ styles.container }>\n\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount\n\t\t\t\t\t\t\t\t\t\tonChange={ this.onChangeFileName }\n\t\t\t\t\t\t\t\t\t\tplaceholder={ __( 'File name' ) }\n\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\tunderlineColorAndroid=\"transparent\"\n\t\t\t\t\t\t\t\t\t\tvalue={ fileName }\n\t\t\t\t\t\t\t\t\t\tdeleteEnter={ true }\n\t\t\t\t\t\t\t\t\t\ttextAlign={ this.getTextAlignmentForAlignment(\n\t\t\t\t\t\t\t\t\t\t\talign\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{ isUploadFailed && (\n\t\t\t\t\t\t\t\t\t\t<View style={ styles.errorContainer }>\n\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\ticon={ warning }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ errorIconStyle }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<PlainText\n\t\t\t\t\t\t\t\t\t\t\t\teditable={ false }\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={ __( 'Error' ) }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ styles.uploadFailed }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t{ showDownloadButton &&\n\t\t\t\t\t\t\t\t\tthis.state.maxWidth > 0 && (\n\t\t\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\t\t\t\t\tfinalButtonStyle,\n\t\t\t\t\t\t\t\t\t\t\t\tthis.getStyleForAlignment(\n\t\t\t\t\t\t\t\t\t\t\t\t\talign\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount\n\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\t\t\ttextAlign=\"center\"\n\t\t\t\t\t\t\t\t\t\t\t\tminWidth={ minWidth }\n\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth={ this.state.maxWidth }\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteEnter={ true }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ styles.buttonText }\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={ downloadButtonText }\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={ placeholderText }\n\t\t\t\t\t\t\t\t\t\t\t\tunstableOnFocus={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisButtonFocused: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisButtonFocused: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tselectionColor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyles.buttonText.color\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholderTextColor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyles.placeholderTextColor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.color\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tunderlineColorAndroid=\"transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.onChangeDownloadButtonText\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { attributes, wasBlockJustInserted, isSelected } = this.props;\n\t\tconst { href } = attributes;\n\n\t\tif ( ! href ) {\n\t\t\treturn (\n\t\t\t\t<MediaPlaceholder\n\t\t\t\t\ticon={ <BlockIcon icon={ icon } /> }\n\t\t\t\t\tlabels={ {\n\t\t\t\t\t\ttitle: __( 'File' ),\n\t\t\t\t\t\tinstructions: __( 'Choose a file' ),\n\t\t\t\t\t} }\n\t\t\t\t\tonSelect={ this.onSelectFile }\n\t\t\t\t\tonFocus={ this.props.onFocus }\n\t\t\t\t\tallowedTypes={ [ MEDIA_TYPE_ANY ] }\n\t\t\t\t\tautoOpenMediaUpload={ isSelected && wasBlockJustInserted }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<MediaUpload\n\t\t\t\tallowedTypes={ [ MEDIA_TYPE_ANY ] }\n\t\t\t\tisReplacingMedia={ true }\n\t\t\t\tonSelect={ this.onSelectFile }\n\t\t\t\trender={ ( { open, getMediaOptions } ) => {\n\t\t\t\t\treturn this.getFileComponent( open, getMediaOptions );\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, props ) => {\n\t\tconst { attributes, isSelected, clientId } = props;\n\t\tconst { id, href } = attributes;\n\t\tconst { isEditorSidebarOpened } = select( 'core/edit-post' );\n\t\tconst isNotFileHref = id && getProtocol( href ) !== 'file:';\n\t\treturn {\n\t\t\tmedia: isNotFileHref\n\t\t\t\t? select( coreStore ).getMedia( id )\n\t\t\t\t: undefined,\n\t\t\tisSidebarOpened: isSelected && isEditorSidebarOpened(),\n\t\t\twasBlockJustInserted: select(\n\t\t\t\tblockEditorStore\n\t\t\t).wasBlockJustInserted( clientId, 'inserter_menu' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { openGeneralSidebar } = dispatch( 'core/edit-post' );\n\t\treturn {\n\t\t\topenSidebar: () => openGeneralSidebar( 'edit-post/block' ),\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( FileEdit );\n"],"mappings":"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"}