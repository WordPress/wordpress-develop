{"version":3,"names":["_reactNative","require","_reactNativeBridge","_components","_blockEditor","_element","_i18n","_url","_compose","_icons","_style","_interopRequireDefault","_iconRetry","_mediaContainer","ALLOWED_MEDIA_TYPES","MEDIA_TYPE_IMAGE","MEDIA_TYPE_VIDEO","ICON_TYPE","PLACEHOLDER","RETRY","MediaContainer","Component","constructor","arguments","updateMediaProgress","bind","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","mediaUploadStateReset","onSelectMediaUploadOption","onMediaPressed","state","isUploadInProgress","componentDidMount","mediaId","mediaUrl","props","getProtocol","mediaUploadSync","params","id","url","type","onSelectMedia","media_type","mediaType","isMediaSelected","onMediaSelected","requestImageUploadCancelDialog","requestImageFailedRetryDialog","requestImageFullscreenPreview","getIcon","iconType","getStylesFromColorScheme","iconStyle","styles","iconRetry","iconRetryVideo","iconRetryVideoDark","_react","createElement","Icon","icon","SvgIconRetry","iconPlaceholder","iconPlaceholderDark","setState","payload","onMediaUpdate","mediaServerId","renderImage","openMediaOptions","aligmentStyles","focalPoint","imageFill","isSelected","mediaAlt","mediaWidth","shouldStack","isUploadFailed","isUploadPaused","retryMessage","focalPointValues","IMAGE_DEFAULT_FOCAL_POINT","View","style","imageWithFocalPoint","height","TouchableWithoutFeedback","accessible","onPress","disabled","imageCropped","mediaImageContainer","Image","align","alt","width","renderVideo","showVideo","isURL","videoPlaceholderStyles","videoPlaceholder","videoPlaceholderDark","retryVideoTextStyles","uploadFailedText","uploadFailedTextVideo","uploadFailedTextVideoDark","mediaVideo","videoContainer","videoContent","aspectRatio","VIDEO_ASPECT_RATIO","videoPlayer","VideoPlayer","video","source","uri","paused","modalIcon","Text","renderContent","mediaElement","renderPlaceholder","MediaPlaceholder","labels","title","__","onSelect","allowedTypes","onFocus","className","render","onSetOpenPickerRef","coverUrl","MediaUpload","isReplacingMedia","value","open","getMediaOptions","Fragment","MediaUploadProgress","enablePausedUploads","onUpdateMediaProgress","onFinishMediaUploadWithSuccess","onFinishMediaUploadWithFailure","onMediaUploadStateReset","_default","exports","default","compose","withPreferredColorScheme"],"sources":["@wordpress/block-library/src/media-text/media-container.native.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, TouchableWithoutFeedback } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tmediaUploadSync,\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n\trequestImageFullscreenPreview,\n} from '@wordpress/react-native-bridge';\nimport { Icon, Image, IMAGE_DEFAULT_FOCAL_POINT } from '@wordpress/components';\nimport {\n\tMEDIA_TYPE_IMAGE,\n\tMEDIA_TYPE_VIDEO,\n\tMediaPlaceholder,\n\tMediaUpload,\n\tMediaUploadProgress,\n\tVIDEO_ASPECT_RATIO,\n\tVideoPlayer,\n} from '@wordpress/block-editor';\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { isURL, getProtocol } from '@wordpress/url';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { media as icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport SvgIconRetry from './icon-retry';\n\n/**\n * Constants\n */\nconst ALLOWED_MEDIA_TYPES = [ MEDIA_TYPE_IMAGE, MEDIA_TYPE_VIDEO ];\n\nconst ICON_TYPE = {\n\tPLACEHOLDER: 'placeholder',\n\tRETRY: 'retry',\n};\n\nexport { imageFillStyles } from './media-container.js';\n\nclass MediaContainer extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\n\t\tthis.finishMediaUploadWithSuccess =\n\t\t\tthis.finishMediaUploadWithSuccess.bind( this );\n\t\tthis.finishMediaUploadWithFailure =\n\t\t\tthis.finishMediaUploadWithFailure.bind( this );\n\t\tthis.mediaUploadStateReset = this.mediaUploadStateReset.bind( this );\n\t\tthis.onSelectMediaUploadOption =\n\t\t\tthis.onSelectMediaUploadOption.bind( this );\n\t\tthis.onMediaPressed = this.onMediaPressed.bind( this );\n\n\t\tthis.state = {\n\t\t\tisUploadInProgress: false,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { mediaId, mediaUrl } = this.props;\n\n\t\t// Make sure we mark any temporary images as failed if they failed while\n\t\t// the editor wasn't open.\n\t\tif ( mediaId && mediaUrl && getProtocol( mediaUrl ) === 'file:' ) {\n\t\t\tmediaUploadSync();\n\t\t}\n\t}\n\n\tonSelectMediaUploadOption( params ) {\n\t\tconst { id, url, type } = params;\n\t\tconst { onSelectMedia } = this.props;\n\n\t\tonSelectMedia( {\n\t\t\tmedia_type: type,\n\t\t\tid,\n\t\t\turl,\n\t\t} );\n\t}\n\n\tonMediaPressed() {\n\t\tconst { isUploadInProgress } = this.state;\n\t\tconst {\n\t\t\tmediaId,\n\t\t\tmediaUrl,\n\t\t\tmediaType,\n\t\t\tisMediaSelected,\n\t\t\tonMediaSelected,\n\t\t} = this.props;\n\n\t\tif ( isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( mediaId );\n\t\t} else if ( mediaId && getProtocol( mediaUrl ) === 'file:' ) {\n\t\t\trequestImageFailedRetryDialog( mediaId );\n\t\t} else if ( mediaType === MEDIA_TYPE_IMAGE && isMediaSelected ) {\n\t\t\trequestImageFullscreenPreview( mediaUrl );\n\t\t} else if ( mediaType === MEDIA_TYPE_IMAGE ) {\n\t\t\tonMediaSelected();\n\t\t}\n\t}\n\n\tgetIcon( iconType ) {\n\t\tconst { mediaType, getStylesFromColorScheme } = this.props;\n\t\tlet iconStyle;\n\t\tswitch ( iconType ) {\n\t\t\tcase ICON_TYPE.RETRY:\n\t\t\t\ticonStyle =\n\t\t\t\t\tmediaType === MEDIA_TYPE_IMAGE\n\t\t\t\t\t\t? styles.iconRetry\n\t\t\t\t\t\t: getStylesFromColorScheme(\n\t\t\t\t\t\t\t\tstyles.iconRetryVideo,\n\t\t\t\t\t\t\t\tstyles.iconRetryVideoDark\n\t\t\t\t\t\t  );\n\n\t\t\t\treturn <Icon icon={ SvgIconRetry } { ...iconStyle } />;\n\t\t\tcase ICON_TYPE.PLACEHOLDER:\n\t\t\t\ticonStyle = getStylesFromColorScheme(\n\t\t\t\t\tstyles.iconPlaceholder,\n\t\t\t\t\tstyles.iconPlaceholderDark\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\t\treturn <Icon icon={ icon } { ...iconStyle } />;\n\t}\n\n\tupdateMediaProgress() {\n\t\tif ( ! this.state.isUploadInProgress ) {\n\t\t\tthis.setState( { isUploadInProgress: true } );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tconst { onMediaUpdate } = this.props;\n\n\t\tonMediaUpdate( {\n\t\t\tid: payload.mediaServerId,\n\t\t\turl: payload.mediaUrl,\n\t\t} );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tfinishMediaUploadWithFailure() {\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tmediaUploadStateReset() {\n\t\tconst { onMediaUpdate } = this.props;\n\n\t\tonMediaUpdate( { id: null, url: null } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\trenderImage( params, openMediaOptions ) {\n\t\tconst { isUploadInProgress } = this.state;\n\t\tconst {\n\t\t\taligmentStyles,\n\t\t\tfocalPoint,\n\t\t\timageFill,\n\t\t\tisMediaSelected,\n\t\t\tisSelected,\n\t\t\tmediaAlt,\n\t\t\tmediaUrl,\n\t\t\tmediaWidth,\n\t\t\tshouldStack,\n\t\t} = this.props;\n\t\tconst { isUploadFailed, isUploadPaused, retryMessage } = params;\n\t\tconst focalPointValues = ! focalPoint\n\t\t\t? IMAGE_DEFAULT_FOCAL_POINT\n\t\t\t: focalPoint;\n\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ [\n\t\t\t\t\timageFill && styles.imageWithFocalPoint,\n\t\t\t\t\timageFill &&\n\t\t\t\t\t\tshouldStack && {\n\t\t\t\t\t\t\theight: styles.imageFill.height,\n\t\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t>\n\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\taccessible={ ! isSelected }\n\t\t\t\t\tonPress={ this.onMediaPressed }\n\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t>\n\t\t\t\t\t<View\n\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\timageFill && styles.imageCropped,\n\t\t\t\t\t\t\tstyles.mediaImageContainer,\n\t\t\t\t\t\t\t! isUploadInProgress && aligmentStyles,\n\t\t\t\t\t\t] }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Image\n\t\t\t\t\t\t\talign=\"center\"\n\t\t\t\t\t\t\talt={ mediaAlt }\n\t\t\t\t\t\t\tfocalPoint={ imageFill && focalPointValues }\n\t\t\t\t\t\t\tisSelected={ isMediaSelected }\n\t\t\t\t\t\t\tisUploadFailed={ isUploadFailed }\n\t\t\t\t\t\t\tisUploadPaused={ isUploadPaused }\n\t\t\t\t\t\t\tisUploadInProgress={ isUploadInProgress }\n\t\t\t\t\t\t\tonSelectMediaUploadOption={\n\t\t\t\t\t\t\t\tthis.onSelectMediaUploadOption\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\topenMediaOptions={ openMediaOptions }\n\t\t\t\t\t\t\tretryMessage={ retryMessage }\n\t\t\t\t\t\t\turl={ mediaUrl }\n\t\t\t\t\t\t\twidth={ ! isUploadInProgress && mediaWidth }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t</View>\n\t\t);\n\t}\n\n\trenderVideo( params ) {\n\t\tconst {\n\t\t\taligmentStyles,\n\t\t\tmediaUrl,\n\t\t\tisSelected,\n\t\t\tgetStylesFromColorScheme,\n\t\t} = this.props;\n\t\tconst { isUploadInProgress } = this.state;\n\t\tconst { isUploadFailed, retryMessage } = params;\n\t\tconst showVideo =\n\t\t\tisURL( mediaUrl ) && ! isUploadInProgress && ! isUploadFailed;\n\n\t\tconst videoPlaceholderStyles = getStylesFromColorScheme(\n\t\t\tstyles.videoPlaceholder,\n\t\t\tstyles.videoPlaceholderDark\n\t\t);\n\t\tconst retryVideoTextStyles = [\n\t\t\tstyles.uploadFailedText,\n\t\t\tgetStylesFromColorScheme(\n\t\t\t\tstyles.uploadFailedTextVideo,\n\t\t\t\tstyles.uploadFailedTextVideoDark\n\t\t\t),\n\t\t];\n\n\t\treturn (\n\t\t\t<View style={ styles.mediaVideo }>\n\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\taccessible={ ! isSelected }\n\t\t\t\t\tonPress={ this.onMediaPressed }\n\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t>\n\t\t\t\t\t<View style={ [ styles.videoContainer, aligmentStyles ] }>\n\t\t\t\t\t\t<View\n\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\tstyles.videoContent,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\taspectRatio: VIDEO_ASPECT_RATIO,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ showVideo && (\n\t\t\t\t\t\t\t\t<View style={ styles.videoPlayer }>\n\t\t\t\t\t\t\t\t\t<VideoPlayer\n\t\t\t\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\t\t\t\tstyle={ styles.video }\n\t\t\t\t\t\t\t\t\t\tsource={ { uri: mediaUrl } }\n\t\t\t\t\t\t\t\t\t\tpaused={ true }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ ! showVideo && (\n\t\t\t\t\t\t\t\t<View style={ videoPlaceholderStyles }>\n\t\t\t\t\t\t\t\t\t<View style={ styles.modalIcon }>\n\t\t\t\t\t\t\t\t\t\t{ isUploadFailed\n\t\t\t\t\t\t\t\t\t\t\t? this.getIcon( ICON_TYPE.RETRY )\n\t\t\t\t\t\t\t\t\t\t\t: this.getIcon(\n\t\t\t\t\t\t\t\t\t\t\t\t\tICON_TYPE.PLACEHOLDER\n\t\t\t\t\t\t\t\t\t\t\t  ) }\n\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t{ isUploadFailed && (\n\t\t\t\t\t\t\t\t\t\t<Text style={ retryVideoTextStyles }>\n\t\t\t\t\t\t\t\t\t\t\t{ retryMessage }\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t</View>\n\t\t);\n\t}\n\n\trenderContent( params, openMediaOptions ) {\n\t\tconst { mediaType } = this.props;\n\t\tlet mediaElement = null;\n\n\t\tswitch ( mediaType ) {\n\t\t\tcase MEDIA_TYPE_IMAGE:\n\t\t\t\tmediaElement = this.renderImage( params, openMediaOptions );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_TYPE_VIDEO:\n\t\t\t\tmediaElement = this.renderVideo( params );\n\t\t\t\tbreak;\n\t\t}\n\t\treturn mediaElement;\n\t}\n\n\trenderPlaceholder() {\n\t\treturn (\n\t\t\t<MediaPlaceholder\n\t\t\t\ticon={ this.getIcon( ICON_TYPE.PLACEHOLDER ) }\n\t\t\t\tlabels={ {\n\t\t\t\t\ttitle: __( 'Media area' ),\n\t\t\t\t} }\n\t\t\t\tonSelect={ this.onSelectMediaUploadOption }\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\tonFocus={ this.props.onFocus }\n\t\t\t\tclassName={ 'no-block-outline' }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { mediaUrl, mediaId, mediaType, onSetOpenPickerRef } = this.props;\n\t\tconst coverUrl = mediaType === MEDIA_TYPE_IMAGE ? mediaUrl : null;\n\n\t\tif ( mediaUrl ) {\n\t\t\treturn (\n\t\t\t\t<MediaUpload\n\t\t\t\t\tisReplacingMedia={ true }\n\t\t\t\t\tonSelect={ this.onSelectMediaUploadOption }\n\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\tvalue={ mediaId }\n\t\t\t\t\trender={ ( { open, getMediaOptions } ) => {\n\t\t\t\t\t\tonSetOpenPickerRef( open );\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{ getMediaOptions() }\n\n\t\t\t\t\t\t\t\t<MediaUploadProgress\n\t\t\t\t\t\t\t\t\tenablePausedUploads\n\t\t\t\t\t\t\t\t\tcoverUrl={ coverUrl }\n\t\t\t\t\t\t\t\t\tmediaId={ mediaId }\n\t\t\t\t\t\t\t\t\tonUpdateMediaProgress={\n\t\t\t\t\t\t\t\t\t\tthis.updateMediaProgress\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonFinishMediaUploadWithSuccess={\n\t\t\t\t\t\t\t\t\t\tthis.finishMediaUploadWithSuccess\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonFinishMediaUploadWithFailure={\n\t\t\t\t\t\t\t\t\t\tthis.finishMediaUploadWithFailure\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonMediaUploadStateReset={\n\t\t\t\t\t\t\t\t\t\tthis.mediaUploadStateReset\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\trenderContent={ ( params ) => {\n\t\t\t\t\t\t\t\t\t\treturn this.renderContent(\n\t\t\t\t\t\t\t\t\t\t\tparams,\n\t\t\t\t\t\t\t\t\t\t\topen\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn this.renderPlaceholder();\n\t}\n}\n\nexport default compose( [ withPreferredColorScheme ] )( MediaContainer );\n"],"mappings":"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"}