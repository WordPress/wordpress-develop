{"version":3,"names":["_blocks","require","MAXIMUM_SELECTED_BLOCKS","transforms","from","type","isMultiBlock","blocks","__experimentalConvert","columnWidth","length","toFixed","innerBlocksTemplate","map","name","attributes","innerBlocks","width","createBlock","createBlocksFromInnerBlocksTemplate","isMatch","selectedBlocksLength","priority","transform","align","backgroundColor","textColor","style","mediaAlt","alt","mediaId","id","mediaPosition","mediaSizeSlug","sizeSlug","mediaType","mediaUrl","url","mediaWidth","verticalAlignment","media","imageAttrs","linkAttrs","href","linkClass","linkDestination","linkTarget","rel","src","reverse","ungroup","flatMap","innerBlock","_default","exports","default"],"sources":["@wordpress/block-library/src/columns/transforms.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tcreateBlock,\n\tcreateBlocksFromInnerBlocksTemplate,\n} from '@wordpress/blocks';\n\nconst MAXIMUM_SELECTED_BLOCKS = 6;\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tisMultiBlock: true,\n\t\t\tblocks: [ '*' ],\n\t\t\t__experimentalConvert: ( blocks ) => {\n\t\t\t\tconst columnWidth = +( 100 / blocks.length ).toFixed( 2 );\n\t\t\t\tconst innerBlocksTemplate = blocks.map(\n\t\t\t\t\t( { name, attributes, innerBlocks } ) => [\n\t\t\t\t\t\t'core/column',\n\t\t\t\t\t\t{ width: `${ columnWidth }%` },\n\t\t\t\t\t\t[ [ name, { ...attributes }, innerBlocks ] ],\n\t\t\t\t\t]\n\t\t\t\t);\n\t\t\t\treturn createBlock(\n\t\t\t\t\t'core/columns',\n\t\t\t\t\t{},\n\t\t\t\t\tcreateBlocksFromInnerBlocksTemplate( innerBlocksTemplate )\n\t\t\t\t);\n\t\t\t},\n\t\t\tisMatch: ( { length: selectedBlocksLength }, blocks ) => {\n\t\t\t\t// If a user is trying to transform a single Columns block, skip\n\t\t\t\t// the transformation. Enabling this functiontionality creates\n\t\t\t\t// nested Columns blocks resulting in an unintuitive user experience.\n\t\t\t\t// Multiple Columns blocks can still be transformed.\n\t\t\t\tif (\n\t\t\t\t\tblocks.length === 1 &&\n\t\t\t\t\tblocks[ 0 ].name === 'core/columns'\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\tselectedBlocksLength &&\n\t\t\t\t\tselectedBlocksLength <= MAXIMUM_SELECTED_BLOCKS\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/media-text' ],\n\t\t\tpriority: 1,\n\t\t\ttransform: ( attributes, innerBlocks ) => {\n\t\t\t\tconst {\n\t\t\t\t\talign,\n\t\t\t\t\tbackgroundColor,\n\t\t\t\t\ttextColor,\n\t\t\t\t\tstyle,\n\t\t\t\t\tmediaAlt: alt,\n\t\t\t\t\tmediaId: id,\n\t\t\t\t\tmediaPosition,\n\t\t\t\t\tmediaSizeSlug: sizeSlug,\n\t\t\t\t\tmediaType,\n\t\t\t\t\tmediaUrl: url,\n\t\t\t\t\tmediaWidth,\n\t\t\t\t\tverticalAlignment,\n\t\t\t\t} = attributes;\n\t\t\t\tlet media;\n\t\t\t\tif ( mediaType === 'image' || ! mediaType ) {\n\t\t\t\t\tconst imageAttrs = { id, alt, url, sizeSlug };\n\t\t\t\t\tconst linkAttrs = {\n\t\t\t\t\t\thref: attributes.href,\n\t\t\t\t\t\tlinkClass: attributes.linkClass,\n\t\t\t\t\t\tlinkDestination: attributes.linkDestination,\n\t\t\t\t\t\tlinkTarget: attributes.linkTarget,\n\t\t\t\t\t\trel: attributes.rel,\n\t\t\t\t\t};\n\t\t\t\t\tmedia = [ 'core/image', { ...imageAttrs, ...linkAttrs } ];\n\t\t\t\t} else {\n\t\t\t\t\tmedia = [ 'core/video', { id, src: url } ];\n\t\t\t\t}\n\t\t\t\tconst innerBlocksTemplate = [\n\t\t\t\t\t[ 'core/column', { width: `${ mediaWidth }%` }, [ media ] ],\n\t\t\t\t\t[\n\t\t\t\t\t\t'core/column',\n\t\t\t\t\t\t{ width: `${ 100 - mediaWidth }%` },\n\t\t\t\t\t\tinnerBlocks,\n\t\t\t\t\t],\n\t\t\t\t];\n\t\t\t\tif ( mediaPosition === 'right' ) {\n\t\t\t\t\tinnerBlocksTemplate.reverse();\n\t\t\t\t}\n\t\t\t\treturn createBlock(\n\t\t\t\t\t'core/columns',\n\t\t\t\t\t{\n\t\t\t\t\t\talign,\n\t\t\t\t\t\tbackgroundColor,\n\t\t\t\t\t\ttextColor,\n\t\t\t\t\t\tstyle,\n\t\t\t\t\t\tverticalAlignment,\n\t\t\t\t\t},\n\t\t\t\t\tcreateBlocksFromInnerBlocksTemplate( innerBlocksTemplate )\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t],\n\tungroup: ( attributes, innerBlocks ) =>\n\t\tinnerBlocks.flatMap( ( innerBlock ) => innerBlock.innerBlocks ),\n};\n\nexport default transforms;\n"],"mappings":"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"}