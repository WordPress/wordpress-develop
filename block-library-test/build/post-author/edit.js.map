{"version":3,"names":["_classnames","_interopRequireDefault","require","_blockEditor","_components","_data","_i18n","_coreData","minimumUsersForCombobox","AUTHORS_QUERY","who","per_page","PostAuthorEdit","isSelected","context","postType","postId","queryId","attributes","setAttributes","isDescendentOfQueryLoop","Number","isFinite","authorId","authorDetails","authors","useSelect","select","getEditedEntityRecord","getUser","getUsers","coreStore","_authorId","author","editEntityRecord","useDispatch","textAlign","showAvatar","showBio","byline","isLink","linkTarget","avatarSizes","authorName","name","__","avatar_urls","Object","keys","forEach","size","push","value","label","blockProps","useBlockProps","className","classnames","authorOptions","length","map","id","handleSelect","nextAuthorId","showCombobox","showAuthorControl","_react","createElement","Fragment","InspectorControls","PanelBody","title","ComboboxControl","__nextHasNoMarginBottom","options","onChange","allowReset","SelectControl","ToggleControl","checked","avatarSize","BlockControls","group","AlignmentControl","nextAlign","width","src","alt","RichText","isEmpty","placeholder","href","onClick","event","preventDefault","dangerouslySetInnerHTML","__html","description","_default","exports","default"],"sources":["@wordpress/block-library/src/post-author/edit.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tAlignmentControl,\n\tBlockControls,\n\tInspectorControls,\n\tRichText,\n\tuseBlockProps,\n} from '@wordpress/block-editor';\nimport {\n\tComboboxControl,\n\tPanelBody,\n\tSelectControl,\n\tToggleControl,\n} from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { store as coreStore } from '@wordpress/core-data';\n\nconst minimumUsersForCombobox = 25;\n\nconst AUTHORS_QUERY = {\n\twho: 'authors',\n\tper_page: 100,\n};\n\nfunction PostAuthorEdit( {\n\tisSelected,\n\tcontext: { postType, postId, queryId },\n\tattributes,\n\tsetAttributes,\n} ) {\n\tconst isDescendentOfQueryLoop = Number.isFinite( queryId );\n\tconst { authorId, authorDetails, authors } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEditedEntityRecord, getUser, getUsers } =\n\t\t\t\tselect( coreStore );\n\t\t\tconst _authorId = getEditedEntityRecord(\n\t\t\t\t'postType',\n\t\t\t\tpostType,\n\t\t\t\tpostId\n\t\t\t)?.author;\n\n\t\t\treturn {\n\t\t\t\tauthorId: _authorId,\n\t\t\t\tauthorDetails: _authorId ? getUser( _authorId ) : null,\n\t\t\t\tauthors: getUsers( AUTHORS_QUERY ),\n\t\t\t};\n\t\t},\n\t\t[ postType, postId ]\n\t);\n\n\tconst { editEntityRecord } = useDispatch( coreStore );\n\n\tconst { textAlign, showAvatar, showBio, byline, isLink, linkTarget } =\n\t\tattributes;\n\tconst avatarSizes = [];\n\tconst authorName = authorDetails?.name || __( 'Post Author' );\n\tif ( authorDetails?.avatar_urls ) {\n\t\tObject.keys( authorDetails.avatar_urls ).forEach( ( size ) => {\n\t\t\tavatarSizes.push( {\n\t\t\t\tvalue: size,\n\t\t\t\tlabel: `${ size } x ${ size }`,\n\t\t\t} );\n\t\t} );\n\t}\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: classnames( {\n\t\t\t[ `has-text-align-${ textAlign }` ]: textAlign,\n\t\t} ),\n\t} );\n\n\tconst authorOptions = authors?.length\n\t\t? authors.map( ( { id, name } ) => {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: id,\n\t\t\t\t\tlabel: name,\n\t\t\t\t};\n\t\t  } )\n\t\t: [];\n\n\tconst handleSelect = ( nextAuthorId ) => {\n\t\teditEntityRecord( 'postType', postType, postId, {\n\t\t\tauthor: nextAuthorId,\n\t\t} );\n\t};\n\n\tconst showCombobox = authorOptions.length >= minimumUsersForCombobox;\n\tconst showAuthorControl =\n\t\t!! postId && ! isDescendentOfQueryLoop && authorOptions.length > 0;\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t\t\t{ showAuthorControl &&\n\t\t\t\t\t\t( ( showCombobox && (\n\t\t\t\t\t\t\t<ComboboxControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={ __( 'Author' ) }\n\t\t\t\t\t\t\t\toptions={ authorOptions }\n\t\t\t\t\t\t\t\tvalue={ authorId }\n\t\t\t\t\t\t\t\tonChange={ handleSelect }\n\t\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) || (\n\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tlabel={ __( 'Author' ) }\n\t\t\t\t\t\t\t\tvalue={ authorId }\n\t\t\t\t\t\t\t\toptions={ authorOptions }\n\t\t\t\t\t\t\t\tonChange={ handleSelect }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Show avatar' ) }\n\t\t\t\t\t\tchecked={ showAvatar }\n\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\tsetAttributes( { showAvatar: ! showAvatar } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t{ showAvatar && (\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\tlabel={ __( 'Avatar size' ) }\n\t\t\t\t\t\t\tvalue={ attributes.avatarSize }\n\t\t\t\t\t\t\toptions={ avatarSizes }\n\t\t\t\t\t\t\tonChange={ ( size ) => {\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tavatarSize: Number( size ),\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Show bio' ) }\n\t\t\t\t\t\tchecked={ showBio }\n\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\tsetAttributes( { showBio: ! showBio } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tlabel={ __( 'Link author name to author page' ) }\n\t\t\t\t\t\tchecked={ isLink }\n\t\t\t\t\t\tonChange={ () => setAttributes( { isLink: ! isLink } ) }\n\t\t\t\t\t/>\n\t\t\t\t\t{ isLink && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tlinkTarget: value ? '_blank' : '_self',\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchecked={ linkTarget === '_blank' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\n\t\t\t<BlockControls group=\"block\">\n\t\t\t\t<AlignmentControl\n\t\t\t\t\tvalue={ textAlign }\n\t\t\t\t\tonChange={ ( nextAlign ) => {\n\t\t\t\t\t\tsetAttributes( { textAlign: nextAlign } );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\n\t\t\t<div { ...blockProps }>\n\t\t\t\t{ showAvatar && authorDetails?.avatar_urls && (\n\t\t\t\t\t<div className=\"wp-block-post-author__avatar\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\twidth={ attributes.avatarSize }\n\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\tauthorDetails.avatar_urls[\n\t\t\t\t\t\t\t\t\tattributes.avatarSize\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\talt={ authorDetails.name }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t<div className=\"wp-block-post-author__content\">\n\t\t\t\t\t{ ( ! RichText.isEmpty( byline ) || isSelected ) && (\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tclassName=\"wp-block-post-author__byline\"\n\t\t\t\t\t\t\taria-label={ __( 'Post author byline text' ) }\n\t\t\t\t\t\t\tplaceholder={ __( 'Write bylineâ€¦' ) }\n\t\t\t\t\t\t\tvalue={ byline }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { byline: value } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<p className=\"wp-block-post-author__name\">\n\t\t\t\t\t\t{ isLink ? (\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref=\"#post-author-pseudo-link\"\n\t\t\t\t\t\t\t\tonClick={ ( event ) => event.preventDefault() }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ authorName }\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tauthorName\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t\t{ showBio && (\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tclassName=\"wp-block-post-author__bio\"\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={ {\n\t\t\t\t\t\t\t\t__html: authorDetails?.description,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default PostAuthorEdit;\n"],"mappings":"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"}