{"version":3,"names":["INHERITED_COLUMN_ATTRIBUTES","createTable","rowCount","columnCount","body","Array","from","length","map","cells","content","tag","getFirstRow","state","isEmptyTableSection","head","foot","getCellAttribute","cellLocation","attributeName","sectionName","rowIndex","columnIndex","updateSelectedCell","selection","updateCell","tableSections","Object","fromEntries","entries","filter","key","includes","selectionSectionName","selectionRowIndex","section","row","cellAttributes","isCellSelected","type","insertRow","firstRow","cellCount","undefined","slice","_","index","_firstRow$cells$index","firstCellInColumn","inheritedAttributes","deleteRow","insertColumn","isEmptyRow","deleteColumn","cell","toggleSection","_state$body$0$cells$l","every"],"sources":["@wordpress/block-library/src/table/state.js"],"sourcesContent":["const INHERITED_COLUMN_ATTRIBUTES = [ 'align' ];\n\n/**\n * Creates a table state.\n *\n * @param {Object} options\n * @param {number} options.rowCount    Row count for the table to create.\n * @param {number} options.columnCount Column count for the table to create.\n *\n * @return {Object} New table state.\n */\nexport function createTable( { rowCount, columnCount } ) {\n\treturn {\n\t\tbody: Array.from( { length: rowCount } ).map( () => ( {\n\t\t\tcells: Array.from( { length: columnCount } ).map( () => ( {\n\t\t\t\tcontent: '',\n\t\t\t\ttag: 'td',\n\t\t\t} ) ),\n\t\t} ) ),\n\t};\n}\n\n/**\n * Returns the first row in the table.\n *\n * @param {Object} state Current table state.\n *\n * @return {Object | undefined} The first table row.\n */\nexport function getFirstRow( state ) {\n\tif ( ! isEmptyTableSection( state.head ) ) {\n\t\treturn state.head[ 0 ];\n\t}\n\tif ( ! isEmptyTableSection( state.body ) ) {\n\t\treturn state.body[ 0 ];\n\t}\n\tif ( ! isEmptyTableSection( state.foot ) ) {\n\t\treturn state.foot[ 0 ];\n\t}\n}\n\n/**\n * Gets an attribute for a cell.\n *\n * @param {Object} state         Current table state.\n * @param {Object} cellLocation  The location of the cell\n * @param {string} attributeName The name of the attribute to get the value of.\n *\n * @return {*} The attribute value.\n */\nexport function getCellAttribute( state, cellLocation, attributeName ) {\n\tconst { sectionName, rowIndex, columnIndex } = cellLocation;\n\treturn state[ sectionName ]?.[ rowIndex ]?.cells?.[ columnIndex ]?.[\n\t\tattributeName\n\t];\n}\n\n/**\n * Returns updated cell attributes after applying the `updateCell` function to the selection.\n *\n * @param {Object}   state      The block attributes.\n * @param {Object}   selection  The selection of cells to update.\n * @param {Function} updateCell A function to update the selected cell attributes.\n *\n * @return {Object} New table state including the updated cells.\n */\nexport function updateSelectedCell( state, selection, updateCell ) {\n\tif ( ! selection ) {\n\t\treturn state;\n\t}\n\n\tconst tableSections = Object.fromEntries(\n\t\tObject.entries( state ).filter( ( [ key ] ) =>\n\t\t\t[ 'head', 'body', 'foot' ].includes( key )\n\t\t)\n\t);\n\tconst { sectionName: selectionSectionName, rowIndex: selectionRowIndex } =\n\t\tselection;\n\n\treturn Object.fromEntries(\n\t\tObject.entries( tableSections ).map( ( [ sectionName, section ] ) => {\n\t\t\tif (\n\t\t\t\tselectionSectionName &&\n\t\t\t\tselectionSectionName !== sectionName\n\t\t\t) {\n\t\t\t\treturn [ sectionName, section ];\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\tsectionName,\n\t\t\t\tsection.map( ( row, rowIndex ) => {\n\t\t\t\t\tif ( selectionRowIndex && selectionRowIndex !== rowIndex ) {\n\t\t\t\t\t\treturn row;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcells: row.cells.map(\n\t\t\t\t\t\t\t( cellAttributes, columnIndex ) => {\n\t\t\t\t\t\t\t\tconst cellLocation = {\n\t\t\t\t\t\t\t\t\tsectionName,\n\t\t\t\t\t\t\t\t\tcolumnIndex,\n\t\t\t\t\t\t\t\t\trowIndex,\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t! isCellSelected( cellLocation, selection )\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturn cellAttributes;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn updateCell( cellAttributes );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\t\t\t\t} ),\n\t\t\t];\n\t\t} )\n\t);\n}\n\n/**\n * Returns whether the cell at `cellLocation` is included in the selection `selection`.\n *\n * @param {Object} cellLocation An object containing cell location properties.\n * @param {Object} selection    An object containing selection properties.\n *\n * @return {boolean} True if the cell is selected, false otherwise.\n */\nexport function isCellSelected( cellLocation, selection ) {\n\tif ( ! cellLocation || ! selection ) {\n\t\treturn false;\n\t}\n\n\tswitch ( selection.type ) {\n\t\tcase 'column':\n\t\t\treturn (\n\t\t\t\tselection.type === 'column' &&\n\t\t\t\tcellLocation.columnIndex === selection.columnIndex\n\t\t\t);\n\t\tcase 'cell':\n\t\t\treturn (\n\t\t\t\tselection.type === 'cell' &&\n\t\t\t\tcellLocation.sectionName === selection.sectionName &&\n\t\t\t\tcellLocation.columnIndex === selection.columnIndex &&\n\t\t\t\tcellLocation.rowIndex === selection.rowIndex\n\t\t\t);\n\t}\n}\n\n/**\n * Inserts a row in the table state.\n *\n * @param {Object} state               Current table state.\n * @param {Object} options\n * @param {string} options.sectionName Section in which to insert the row.\n * @param {number} options.rowIndex    Row index at which to insert the row.\n * @param {number} options.columnCount Column count for the table to create.\n *\n * @return {Object} New table state.\n */\nexport function insertRow( state, { sectionName, rowIndex, columnCount } ) {\n\tconst firstRow = getFirstRow( state );\n\tconst cellCount =\n\t\tcolumnCount === undefined ? firstRow?.cells?.length : columnCount;\n\n\t// Bail early if the function cannot determine how many cells to add.\n\tif ( ! cellCount ) {\n\t\treturn state;\n\t}\n\n\treturn {\n\t\t[ sectionName ]: [\n\t\t\t...state[ sectionName ].slice( 0, rowIndex ),\n\t\t\t{\n\t\t\t\tcells: Array.from( { length: cellCount } ).map(\n\t\t\t\t\t( _, index ) => {\n\t\t\t\t\t\tconst firstCellInColumn =\n\t\t\t\t\t\t\tfirstRow?.cells?.[ index ] ?? {};\n\n\t\t\t\t\t\tconst inheritedAttributes = Object.fromEntries(\n\t\t\t\t\t\t\tObject.entries( firstCellInColumn ).filter(\n\t\t\t\t\t\t\t\t( [ key ] ) =>\n\t\t\t\t\t\t\t\t\tINHERITED_COLUMN_ATTRIBUTES.includes( key )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...inheritedAttributes,\n\t\t\t\t\t\t\tcontent: '',\n\t\t\t\t\t\t\ttag: sectionName === 'head' ? 'th' : 'td',\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t},\n\t\t\t...state[ sectionName ].slice( rowIndex ),\n\t\t],\n\t};\n}\n\n/**\n * Deletes a row from the table state.\n *\n * @param {Object} state               Current table state.\n * @param {Object} options\n * @param {string} options.sectionName Section in which to delete the row.\n * @param {number} options.rowIndex    Row index to delete.\n *\n * @return {Object} New table state.\n */\nexport function deleteRow( state, { sectionName, rowIndex } ) {\n\treturn {\n\t\t[ sectionName ]: state[ sectionName ].filter(\n\t\t\t( row, index ) => index !== rowIndex\n\t\t),\n\t};\n}\n\n/**\n * Inserts a column in the table state.\n *\n * @param {Object} state               Current table state.\n * @param {Object} options\n * @param {number} options.columnIndex Column index at which to insert the column.\n *\n * @return {Object} New table state.\n */\nexport function insertColumn( state, { columnIndex } ) {\n\tconst tableSections = Object.fromEntries(\n\t\tObject.entries( state ).filter( ( [ key ] ) =>\n\t\t\t[ 'head', 'body', 'foot' ].includes( key )\n\t\t)\n\t);\n\n\treturn Object.fromEntries(\n\t\tObject.entries( tableSections ).map( ( [ sectionName, section ] ) => {\n\t\t\t// Bail early if the table section is empty.\n\t\t\tif ( isEmptyTableSection( section ) ) {\n\t\t\t\treturn [ sectionName, section ];\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\tsectionName,\n\t\t\t\tsection.map( ( row ) => {\n\t\t\t\t\t// Bail early if the row is empty or it's an attempt to insert past\n\t\t\t\t\t// the last possible index of the array.\n\t\t\t\t\tif ( isEmptyRow( row ) || row.cells.length < columnIndex ) {\n\t\t\t\t\t\treturn row;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcells: [\n\t\t\t\t\t\t\t...row.cells.slice( 0, columnIndex ),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcontent: '',\n\t\t\t\t\t\t\t\ttag: sectionName === 'head' ? 'th' : 'td',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...row.cells.slice( columnIndex ),\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t} ),\n\t\t\t];\n\t\t} )\n\t);\n}\n\n/**\n * Deletes a column from the table state.\n *\n * @param {Object} state               Current table state.\n * @param {Object} options\n * @param {number} options.columnIndex Column index to delete.\n *\n * @return {Object} New table state.\n */\nexport function deleteColumn( state, { columnIndex } ) {\n\tconst tableSections = Object.fromEntries(\n\t\tObject.entries( state ).filter( ( [ key ] ) =>\n\t\t\t[ 'head', 'body', 'foot' ].includes( key )\n\t\t)\n\t);\n\n\treturn Object.fromEntries(\n\t\tObject.entries( tableSections ).map( ( [ sectionName, section ] ) => {\n\t\t\t// Bail early if the table section is empty.\n\t\t\tif ( isEmptyTableSection( section ) ) {\n\t\t\t\treturn [ sectionName, section ];\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\tsectionName,\n\t\t\t\tsection\n\t\t\t\t\t.map( ( row ) => ( {\n\t\t\t\t\t\tcells:\n\t\t\t\t\t\t\trow.cells.length >= columnIndex\n\t\t\t\t\t\t\t\t? row.cells.filter(\n\t\t\t\t\t\t\t\t\t\t( cell, index ) => index !== columnIndex\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t: row.cells,\n\t\t\t\t\t} ) )\n\t\t\t\t\t.filter( ( row ) => row.cells.length ),\n\t\t\t];\n\t\t} )\n\t);\n}\n\n/**\n * Toggles the existence of a section.\n *\n * @param {Object} state       Current table state.\n * @param {string} sectionName Name of the section to toggle.\n *\n * @return {Object} New table state.\n */\nexport function toggleSection( state, sectionName ) {\n\t// Section exists, replace it with an empty row to remove it.\n\tif ( ! isEmptyTableSection( state[ sectionName ] ) ) {\n\t\treturn { [ sectionName ]: [] };\n\t}\n\n\t// Get the length of the first row of the body to use when creating the header.\n\tconst columnCount = state.body?.[ 0 ]?.cells?.length ?? 1;\n\n\t// Section doesn't exist, insert an empty row to create the section.\n\treturn insertRow( state, { sectionName, rowIndex: 0, columnCount } );\n}\n\n/**\n * Determines whether a table section is empty.\n *\n * @param {Object} section Table section state.\n *\n * @return {boolean} True if the table section is empty, false otherwise.\n */\nexport function isEmptyTableSection( section ) {\n\treturn ! section || ! section.length || section.every( isEmptyRow );\n}\n\n/**\n * Determines whether a table row is empty.\n *\n * @param {Object} row Table row state.\n *\n * @return {boolean} True if the table section is empty, false otherwise.\n */\nexport function isEmptyRow( row ) {\n\treturn ! ( row.cells && row.cells.length );\n}\n"],"mappings":"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"}