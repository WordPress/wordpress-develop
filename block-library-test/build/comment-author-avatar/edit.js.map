{"version":3,"names":["_blockEditor","require","_components","_coreData","_data","_i18n","Edit","attributes","context","commentId","setAttributes","isSelected","height","width","avatars","useEntityProp","authorName","avatarUrls","Object","values","sizes","keys","minSize","maxSize","length","blockProps","useBlockProps","spacingProps","useSpacingProps","maxSizeBuffer","Math","floor","avatarURL","useSelect","select","getSettings","blockEditorStore","__experimentalDiscussionSettings","inspectorControls","_react","createElement","InspectorControls","PanelBody","title","__","RangeControl","__nextHasNoMarginBottom","__next40pxDefaultSize","label","onChange","newWidth","min","max","initialPosition","value","resizableAvatar","ResizableBox","size","showHandle","onResizeStop","event","direction","elt","delta","parseInt","lockAspectRatio","enable","top","right","isRTL","bottom","left","minWidth","maxWidth","src","alt","Fragment"],"sources":["@wordpress/block-library/src/comment-author-avatar/edit.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tInspectorControls,\n\tuseBlockProps,\n\t__experimentalGetSpacingClassesAndStyles as useSpacingProps,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { PanelBody, ResizableBox, RangeControl } from '@wordpress/components';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { useSelect } from '@wordpress/data';\nimport { __, isRTL } from '@wordpress/i18n';\n\nexport default function Edit( {\n\tattributes,\n\tcontext: { commentId },\n\tsetAttributes,\n\tisSelected,\n} ) {\n\tconst { height, width } = attributes;\n\n\tconst [ avatars ] = useEntityProp(\n\t\t'root',\n\t\t'comment',\n\t\t'author_avatar_urls',\n\t\tcommentId\n\t);\n\n\tconst [ authorName ] = useEntityProp(\n\t\t'root',\n\t\t'comment',\n\t\t'author_name',\n\t\tcommentId\n\t);\n\tconst avatarUrls = avatars ? Object.values( avatars ) : null;\n\tconst sizes = avatars ? Object.keys( avatars ) : null;\n\tconst minSize = sizes ? sizes[ 0 ] : 24;\n\tconst maxSize = sizes ? sizes[ sizes.length - 1 ] : 96;\n\tconst blockProps = useBlockProps();\n\tconst spacingProps = useSpacingProps( attributes );\n\tconst maxSizeBuffer = Math.floor( maxSize * 2.5 );\n\tconst { avatarURL } = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\tconst { __experimentalDiscussionSettings } = getSettings();\n\t\treturn __experimentalDiscussionSettings;\n\t} );\n\n\tconst inspectorControls = (\n\t\t<InspectorControls>\n\t\t\t<PanelBody title={ __( 'Avatar Settings' ) }>\n\t\t\t\t<RangeControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\tlabel={ __( 'Image size' ) }\n\t\t\t\t\tonChange={ ( newWidth ) =>\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\twidth: newWidth,\n\t\t\t\t\t\t\theight: newWidth,\n\t\t\t\t\t\t} )\n\t\t\t\t\t}\n\t\t\t\t\tmin={ minSize }\n\t\t\t\t\tmax={ maxSizeBuffer }\n\t\t\t\t\tinitialPosition={ width }\n\t\t\t\t\tvalue={ width }\n\t\t\t\t/>\n\t\t\t</PanelBody>\n\t\t</InspectorControls>\n\t);\n\n\tconst resizableAvatar = (\n\t\t<ResizableBox\n\t\t\tsize={ {\n\t\t\t\twidth,\n\t\t\t\theight,\n\t\t\t} }\n\t\t\tshowHandle={ isSelected }\n\t\t\tonResizeStop={ ( event, direction, elt, delta ) => {\n\t\t\t\tsetAttributes( {\n\t\t\t\t\theight: parseInt( height + delta.height, 10 ),\n\t\t\t\t\twidth: parseInt( width + delta.width, 10 ),\n\t\t\t\t} );\n\t\t\t} }\n\t\t\tlockAspectRatio\n\t\t\tenable={ {\n\t\t\t\ttop: false,\n\t\t\t\tright: ! isRTL(),\n\t\t\t\tbottom: true,\n\t\t\t\tleft: isRTL(),\n\t\t\t} }\n\t\t\tminWidth={ minSize }\n\t\t\tmaxWidth={ maxSizeBuffer }\n\t\t>\n\t\t\t<img\n\t\t\t\tsrc={\n\t\t\t\t\tavatarUrls ? avatarUrls[ avatarUrls.length - 1 ] : avatarURL\n\t\t\t\t}\n\t\t\t\talt={ `${ authorName } ${ __( 'Avatar' ) }` }\n\t\t\t\t{ ...blockProps }\n\t\t\t/>\n\t\t</ResizableBox>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{ inspectorControls }\n\t\t\t<div { ...spacingProps }>{ resizableAvatar }</div>\n\t\t</>\n\t);\n}\n"],"mappings":"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"}