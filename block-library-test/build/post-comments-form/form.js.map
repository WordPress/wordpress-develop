{"version":3,"names":["_classnames","_interopRequireDefault","require","_i18n","_blockEditor","_components","_compose","_coreData","_data","CommentsFormPlaceholder","instanceId","useInstanceId","_react","createElement","className","__","noValidate","onSubmit","event","preventDefault","htmlFor","id","name","cols","rows","readOnly","type","classnames","__experimentalGetElementClassName","label","value","CommentsForm","postId","postType","commentStatus","setCommentStatus","useEntityProp","isSiteEditor","undefined","defaultCommentStatus","useSelect","select","blockEditorStore","getSettings","__experimentalDiscussionSettings","postTypeSupportsComments","coreStore","getPostType","supports","comments","actions","Button","key","onClick","variant","_x","Warning","sprintf","_default","exports","default"],"sources":["@wordpress/block-library/src/post-comments-form/form.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x, sprintf } from '@wordpress/i18n';\nimport {\n\tWarning,\n\tstore as blockEditorStore,\n\t__experimentalGetElementClassName,\n} from '@wordpress/block-editor';\nimport { Button } from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useEntityProp, store as coreStore } from '@wordpress/core-data';\nimport { useSelect } from '@wordpress/data';\n\nconst CommentsFormPlaceholder = () => {\n\tconst instanceId = useInstanceId( CommentsFormPlaceholder );\n\n\treturn (\n\t\t<div className=\"comment-respond\">\n\t\t\t<h3 className=\"comment-reply-title\">{ __( 'Leave a Reply' ) }</h3>\n\t\t\t<form\n\t\t\t\tnoValidate\n\t\t\t\tclassName=\"comment-form\"\n\t\t\t\tonSubmit={ ( event ) => event.preventDefault() }\n\t\t\t>\n\t\t\t\t<p>\n\t\t\t\t\t<label htmlFor={ `comment-${ instanceId }` }>\n\t\t\t\t\t\t{ __( 'Comment' ) }\n\t\t\t\t\t</label>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tid={ `comment-${ instanceId }` }\n\t\t\t\t\t\tname=\"comment\"\n\t\t\t\t\t\tcols=\"45\"\n\t\t\t\t\t\trows=\"8\"\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t/>\n\t\t\t\t</p>\n\t\t\t\t<p className=\"form-submit wp-block-button\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tname=\"submit\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'wp-block-button__link',\n\t\t\t\t\t\t\t__experimentalGetElementClassName( 'button' )\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tlabel={ __( 'Post Comment' ) }\n\t\t\t\t\t\tvalue={ __( 'Post Comment' ) }\n\t\t\t\t\t\taria-disabled=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t</p>\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n\nconst CommentsForm = ( { postId, postType } ) => {\n\tconst [ commentStatus, setCommentStatus ] = useEntityProp(\n\t\t'postType',\n\t\tpostType,\n\t\t'comment_status',\n\t\tpostId\n\t);\n\n\tconst isSiteEditor = postType === undefined || postId === undefined;\n\n\tconst { defaultCommentStatus } = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getSettings()\n\t\t\t\t.__experimentalDiscussionSettings\n\t);\n\n\tconst postTypeSupportsComments = useSelect( ( select ) =>\n\t\tpostType\n\t\t\t? !! select( coreStore ).getPostType( postType )?.supports.comments\n\t\t\t: false\n\t);\n\n\tif ( ! isSiteEditor && 'open' !== commentStatus ) {\n\t\tif ( 'closed' === commentStatus ) {\n\t\t\tconst actions = [\n\t\t\t\t<Button\n\t\t\t\t\tkey=\"enableComments\"\n\t\t\t\t\tonClick={ () => setCommentStatus( 'open' ) }\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t>\n\t\t\t\t\t{ _x(\n\t\t\t\t\t\t'Enable comments',\n\t\t\t\t\t\t'action that affects the current post'\n\t\t\t\t\t) }\n\t\t\t\t</Button>,\n\t\t\t];\n\t\t\treturn (\n\t\t\t\t<Warning actions={ actions }>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Post Comments Form block: Comments are not enabled for this item.'\n\t\t\t\t\t) }\n\t\t\t\t</Warning>\n\t\t\t);\n\t\t} else if ( ! postTypeSupportsComments ) {\n\t\t\treturn (\n\t\t\t\t<Warning>\n\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t/* translators: 1: Post type (i.e. \"post\", \"page\") */\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Post Comments Form block: Comments are not enabled for this post type (%s).'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tpostType\n\t\t\t\t\t) }\n\t\t\t\t</Warning>\n\t\t\t);\n\t\t} else if ( 'open' !== defaultCommentStatus ) {\n\t\t\treturn (\n\t\t\t\t<Warning>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Post Comments Form block: Comments are not enabled.'\n\t\t\t\t\t) }\n\t\t\t\t</Warning>\n\t\t\t);\n\t\t}\n\t}\n\n\treturn <CommentsFormPlaceholder />;\n};\n\nexport default CommentsForm;\n"],"mappings":"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"}